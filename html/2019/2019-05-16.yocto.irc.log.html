<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Thursday, 2019-05-16</title>
  <link rel="stylesheet" href="irclog.css" />
  <meta name="generator" content="irclog2html.py 2.11.0 by Marius Gedminas" />
  <meta name="version" content="2.11.0 - 2012-07-30" />
</head>
<body>
<h1>Thursday, 2019-05-16</h1>
<div class="navigation"> <a href="%23yocto.2019-05-15.log.html">&#171; Wednesday, 2019-05-15</a> <a href="index.html">Index</a> <a href="%23yocto.2019-05-17.log.html">Friday, 2019-05-17 &#187;</a> </div>
<table class="irclog">
<tr id="t2019-05-16T00:39:31"><th class="nick" style="background: #407a40">samlman</th><td class="text" style="color: #407a40">After adding 'tools-sdk tools-debug' to EXTRA_IMAGE_FEATURES I can no longer login to my board with root/nopassword.. am I doing something wrong?</td><td class="time"><a href="#t2019-05-16T00:39:31" class="time">00:39</a></td></tr>
<tr id="t2019-05-16T02:46:28"><td class="nickchange" colspan="2">*** camus is now known as kaspter</td><td><a href="#t2019-05-16T02:46:28" class="time">02:46</a></td></tr>
<tr id="t2019-05-16T07:26:20"><th class="nick" style="background: #42427e">ernstp</th><td class="text" style="color: #42427e">what clean commands do people use? I often do rm -rf tmp/ because it never has issues and is pretty fast on my computer</td><td class="time"><a href="#t2019-05-16T07:26:20" class="time">07:26</a></td></tr>
<tr id="t2019-05-16T07:26:59"><th class="nick" style="background: #818144">LetoThe2nd</th><td class="text" style="color: #818144">ernstp: depends on what i want to archieve</td><td class="time"><a href="#t2019-05-16T07:26:59" class="time">07:26</a></td></tr>
<tr id="t2019-05-16T07:27:54"><th class="nick" style="background: #42427e">ernstp</th><td class="text" style="color: #42427e">I know deleting tmp/deploy/ can lead to issues because the recipies don't expect that...</td><td class="time"><a href="#t2019-05-16T07:27:54" class="time">07:27</a></td></tr>
<tr id="t2019-05-16T07:29:34"><th class="nick" style="background: #42427e">ernstp</th><td class="text" style="color: #42427e">I saw rm -rf tmp/work/ suggested by someone, is that picked up correctly by the buildsystem?</td><td class="time"><a href="#t2019-05-16T07:29:34" class="time">07:29</a></td></tr>
<tr id="t2019-05-16T07:29:44"><th class="nick" style="background: #818144">LetoThe2nd</th><td class="text" style="color: #818144">ernstp: well *why* are you cleaning? what do you want to archieve</td><td class="time"><a href="#t2019-05-16T07:29:44" class="time">07:29</a></td></tr>
<tr id="t2019-05-16T07:31:19"><th class="nick" style="background: #42427e">ernstp</th><td class="text" style="color: #42427e">right! my Jenkins server right now nukes the whole tmp/, to be able to handle any kind of change</td><td class="time"><a href="#t2019-05-16T07:31:19" class="time">07:31</a></td></tr>
<tr id="t2019-05-16T07:32:04"><th class="nick" style="background: #42427e">ernstp</th><td class="text" style="color: #42427e">but it's on the slow side so parsing recipes and setting up tools takes a lot of time every time</td><td class="time"><a href="#t2019-05-16T07:32:04" class="time">07:32</a></td></tr>
<tr id="t2019-05-16T07:32:40"><th class="nick" style="background: #42427e">ernstp</th><td class="text" style="color: #42427e">so I was thinking if there was something in between that was a good compromise</td><td class="time"><a href="#t2019-05-16T07:32:40" class="time">07:32</a></td></tr>
<tr id="t2019-05-16T07:32:58"><th class="nick" style="background: #42427e">ernstp</th><td class="text" style="color: #42427e">there's also tmp/stamps/ that's interesting...</td><td class="time"><a href="#t2019-05-16T07:32:58" class="time">07:32</a></td></tr>
<tr id="t2019-05-16T07:34:50"><th class="nick" style="background: #854685">kroon</th><td class="text" style="color: #854685">ernstp, have you seen rm_work.bbclass ?</td><td class="time"><a href="#t2019-05-16T07:34:50" class="time">07:34</a></td></tr>
<tr id="t2019-05-16T07:36:10"><th class="nick" style="background: #42427e">ernstp</th><td class="text" style="color: #42427e">kroon: interesting... is that to save disk space mostly or?</td><td class="time"><a href="#t2019-05-16T07:36:10" class="time">07:36</a></td></tr>
<tr id="t2019-05-16T07:37:54"><th class="nick" style="background: #854685">kroon</th><td class="text" style="color: #854685">ernstp, yes</td><td class="time"><a href="#t2019-05-16T07:37:54" class="time">07:37</a></td></tr>
<tr id="t2019-05-16T07:38:18"><th class="nick" style="background: #854685">kroon</th><td class="text" style="color: #854685">ernstp, it wipes most of the build artefacts after a recipe build, but keeps log files around</td><td class="time"><a href="#t2019-05-16T07:38:18" class="time">07:38</a></td></tr>
<tr id="t2019-05-16T07:41:13"><th class="nick" style="background: #818144">LetoThe2nd</th><td class="text" style="color: #818144">ernstp: the point is, what do you want to test? if you nuke tmp including sstate, then a new rerun actually will probably just exercise the signatures and image creation, but no source rebuilds</td><td class="time"><a href="#t2019-05-16T07:41:13" class="time">07:41</a></td></tr>
<tr id="t2019-05-16T07:42:09"><th class="nick" style="background: #818144">LetoThe2nd</th><td class="text" style="color: #818144">ernstp: so if you want to make sure your ci exercises rebuilds of your applications, you either have to wipe sstate (globally), or bitbake -c cleansstate $YOURRECIPE (specifically)</td><td class="time"><a href="#t2019-05-16T07:42:09" class="time">07:42</a></td></tr>
<tr id="t2019-05-16T07:42:20"><th class="nick" style="background: #42427e">ernstp</th><td class="text" style="color: #42427e">LetoThe2nd: you mean nuke tmp and save sstate? yes, and that's pretty close to what I want</td><td class="time"><a href="#t2019-05-16T07:42:20" class="time">07:42</a></td></tr>
<tr id="t2019-05-16T07:42:50"><th class="nick" style="background: #818144">LetoThe2nd</th><td class="text" style="color: #818144">ernstp: nuking tmp and saving sstate exercises image creating, but no source rebuilds.</td><td class="time"><a href="#t2019-05-16T07:42:50" class="time">07:42</a></td></tr>
<tr id="t2019-05-16T07:43:04"><th class="nick" style="background: #42427e">ernstp</th><td class="text" style="color: #42427e">LetoThe2nd: but let's say there's one recipe that's been updated</td><td class="time"><a href="#t2019-05-16T07:43:04" class="time">07:43</a></td></tr>
<tr id="t2019-05-16T07:43:24"><td class="part" colspan="2">*** Hodhr &lt;Hodhr!~Hodhr@162.206.70.37.rev.sfr.net&gt; has left #yocto</td><td><a href="#t2019-05-16T07:43:24" class="time">07:43</a></td></tr>
<tr id="t2019-05-16T07:43:37"><th class="nick" style="background: #42427e">ernstp</th><td class="text" style="color: #42427e">LetoThe2nd: then you need to setup the native sysroot and the sysroot, from sstate. and that takes some time on a slow computer</td><td class="time"><a href="#t2019-05-16T07:43:37" class="time">07:43</a></td></tr>
<tr id="t2019-05-16T07:47:07"><th class="nick" style="background: #42427e">ernstp</th><td class="text" style="color: #42427e">all the setscene stuff...</td><td class="time"><a href="#t2019-05-16T07:47:07" class="time">07:47</a></td></tr>
<tr id="t2019-05-16T07:49:39"><th class="nick" style="background: #818144">LetoThe2nd</th><td class="text" style="color: #818144">ernstp: i would maybe agree in a dev workflow, but on a ci system? those are basically meant to check your work asynchronously anyways.</td><td class="time"><a href="#t2019-05-16T07:49:39" class="time">07:49</a></td></tr>
<tr id="t2019-05-16T07:50:57"><th class="nick" style="background: #42427e">ernstp</th><td class="text" style="color: #42427e">LetoThe2nd: somewhat of a microoptimization yes... just incredibly starved on HW at the moment</td><td class="time"><a href="#t2019-05-16T07:50:57" class="time">07:50</a></td></tr>
<tr id="t2019-05-16T07:51:27"><th class="nick" style="background: #42427e">ernstp</th><td class="text" style="color: #42427e">nuking tmp/ is extremely stable, so that's nice.</td><td class="time"><a href="#t2019-05-16T07:51:27" class="time">07:51</a></td></tr>
<tr id="t2019-05-16T07:51:32"><th class="nick" style="background: #818144">LetoThe2nd</th><td class="text" style="color: #818144">ernstp: consider spinning up cloud instances :)</td><td class="time"><a href="#t2019-05-16T07:51:32" class="time">07:51</a></td></tr>
<tr id="t2019-05-16T07:51:45"><th class="nick" style="background: #42427e">ernstp</th><td class="text" style="color: #42427e">no matter what kindof silly patches people throw at it...</td><td class="time"><a href="#t2019-05-16T07:51:45" class="time">07:51</a></td></tr>
<tr id="t2019-05-16T07:52:09"><th class="nick" style="background: #42427e">ernstp</th><td class="text" style="color: #42427e">LetoThe2nd: I've heard about this cloud :-)</td><td class="time"><a href="#t2019-05-16T07:52:09" class="time">07:52</a></td></tr>
<tr id="t2019-05-16T07:55:19"><th class="nick" style="background: #42427e">ernstp</th><td class="text" style="color: #42427e">"rm -rf tmp/stamps/" runs all the setscene like "rm -rf tmp/" but your recipe parsing cache seems to not be invalidated...</td><td class="time"><a href="#t2019-05-16T07:55:19" class="time">07:55</a></td></tr>
<tr id="t2019-05-16T08:01:32"><th class="nick" style="background: #488888">mcfrisk</th><td class="text" style="color: #488888">hmm, are patches which reduce GPLv3 dependecies ok for poky?</td><td class="time"><a href="#t2019-05-16T08:01:32" class="time">08:01</a></td></tr>
<tr id="t2019-05-16T08:01:50"><th class="nick" style="background: #488888">mcfrisk</th><td class="text" style="color: #488888">for example dropping GNU readline support from sqlite3?</td><td class="time"><a href="#t2019-05-16T08:01:50" class="time">08:01</a></td></tr>
<tr id="t2019-05-16T08:02:14"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">they have been fine in the past..</td><td class="time"><a href="#t2019-05-16T08:02:14" class="time">08:02</a></td></tr>
<tr id="t2019-05-16T08:02:16"><th class="nick" style="background: #488888">mcfrisk</th><td class="text" style="color: #488888">this kind of changes don't fit to meta-gplv2 either</td><td class="time"><a href="#t2019-05-16T08:02:16" class="time">08:02</a></td></tr>
<tr id="t2019-05-16T08:02:36"><th class="nick" style="background: #488888">mcfrisk</th><td class="text" style="color: #488888">could there be gplv3 distro feature which could be disabled?</td><td class="time"><a href="#t2019-05-16T08:02:36" class="time">08:02</a></td></tr>
<tr id="t2019-05-16T08:02:42"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">there is a meta-gplv2 repository that may be used for some of these things, but in the main oe-core -- usually we want this implemented as an optional PKGCONFIG/PACKAGECONFIG setting..</td><td class="time"><a href="#t2019-05-16T08:02:42" class="time">08:02</a></td></tr>
<tr id="t2019-05-16T08:03:25"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">If there were a gplv3 distro feature, it should be implemented in the meta-gplv2 layer IMHO.&nbsp;&nbsp;The general OE community is not interested in a GPLv3 limited or free system.&nbsp;&nbsp;However they are interested in reducing dependencies (or alternative dependencies)</td><td class="time"><a href="#t2019-05-16T08:03:25" class="time">08:03</a></td></tr>
<tr id="t2019-05-16T08:03:29"><th class="nick" style="background: #488888">mcfrisk</th><td class="text" style="color: #488888">ah, so I could create readline PKGCONFIG setting and disable RDEPENDS based on that</td><td class="time"><a href="#t2019-05-16T08:03:29" class="time">08:03</a></td></tr>
<tr id="t2019-05-16T08:03:34"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">yes</td><td class="time"><a href="#t2019-05-16T08:03:34" class="time">08:03</a></td></tr>
<tr id="t2019-05-16T08:04:14"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">if reducing / changing dependencies meets your goals -- then I'd say oe-core.&nbsp;&nbsp;If it's specifically just reducing dependency on GPLv3, then it likely belongs in the meta-gplv2 layer</td><td class="time"><a href="#t2019-05-16T08:04:14" class="time">08:04</a></td></tr>
<tr id="t2019-05-16T08:04:55"><th class="nick" style="background: #488888">mcfrisk</th><td class="text" style="color: #488888">currently meta-gplv2 provides old readline version so the changes don't fit there either..</td><td class="time"><a href="#t2019-05-16T08:04:55" class="time">08:04</a></td></tr>
<tr id="t2019-05-16T08:05:38"><th class="nick" style="background: #488888">mcfrisk</th><td class="text" style="color: #488888">then again the bbappends to drop readline dependency in sqlite3, lua etc are really trivial for me now</td><td class="time"><a href="#t2019-05-16T08:05:38" class="time">08:05</a></td></tr>
<tr id="t2019-05-16T08:05:40"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">even in that case, linking against readline is something that is frowned upon -- since it introduced a GPL 'library'.&nbsp;&nbsp;(vs LGPL).&nbsp;&nbsp;So that dependency drop is reasonable in any of the layers in my opinion..</td><td class="time"><a href="#t2019-05-16T08:05:40" class="time">08:05</a></td></tr>
<tr id="t2019-05-16T08:06:10"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">ya, dropping readline dependencies belong in the originating layer in my opinion.&nbsp;&nbsp;This isn't a GPLv* issue, but a general dependency thing</td><td class="time"><a href="#t2019-05-16T08:06:10" class="time">08:06</a></td></tr>
<tr id="t2019-05-16T08:06:18"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">are you just dropping it, or replacing it with something like editline?</td><td class="time"><a href="#t2019-05-16T08:06:18" class="time">08:06</a></td></tr>
<tr id="t2019-05-16T08:06:32"><th class="nick" style="background: #488888">mcfrisk</th><td class="text" style="color: #488888">atm just dropping it.</td><td class="time"><a href="#t2019-05-16T08:06:32" class="time">08:06</a></td></tr>
<tr id="t2019-05-16T08:06:46"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">ok.. ya, that makes sense for a PACKAGECONFIG switch to me</td><td class="time"><a href="#t2019-05-16T08:06:46" class="time">08:06</a></td></tr>
<tr id="t2019-05-16T08:33:16"><td class="nickchange" colspan="2">*** florian_kc is now known as florian</td><td><a href="#t2019-05-16T08:33:16" class="time">08:33</a></td></tr>
<tr id="t2019-05-16T08:33:33"><th class="nick" style="background: #4b904b">RP</th><td class="text" style="color: #4b904b">mcfrisk: adding a PACKAGECONFIG for it certainly should be fine</td><td class="time"><a href="#t2019-05-16T08:33:33" class="time">08:33</a></td></tr>
<tr id="t2019-05-16T08:33:50"><th class="nick" style="background: #4b904b">RP</th><td class="text" style="color: #4b904b">mcfrisk: we could then put an example set of PACKAGECONFIGs into meta-gplv2</td><td class="time"><a href="#t2019-05-16T08:33:50" class="time">08:33</a></td></tr>
<tr id="t2019-05-16T09:28:34"><th class="nick" style="background: #4d4d93">fl0v0</th><td class="text" style="color: #4d4d93">Is there an easy way to mark a package as machine independent? The recipe has one package that includes a file depending on the machine, but the other package it produces is completely independent</td><td class="time"><a href="#t2019-05-16T09:28:34" class="time">09:28</a></td></tr>
<tr id="t2019-05-16T09:29:16"><th class="nick" style="background: #818144">LetoThe2nd</th><td class="text" style="color: #818144">fl0v0: <a href="https://www.yoctoproject.org/docs/latest/mega-manual/mega-manual.html#ref-classes-allarch" rel="nofollow">https://www.yoctoproject.org/docs/latest/mega-manual/mega-manual.html#ref-classes-allarch</a></td><td class="time"><a href="#t2019-05-16T09:29:16" class="time">09:29</a></td></tr>
<tr id="t2019-05-16T09:33:31"><th class="nick" style="background: #4d4d93">fl0v0</th><td class="text" style="color: #4d4d93">LetoThe2nd: the allarch class makes the whole recipe architecure independent if I understood correctly, but i just want to make one package machine independent. Maybe i have to create a own recipe then for the dependent package</td><td class="time"><a href="#t2019-05-16T09:33:31" class="time">09:33</a></td></tr>
<tr id="t2019-05-16T09:33:50"><th class="nick" style="background: #818144">LetoThe2nd</th><td class="text" style="color: #818144">fl0v0: exacty. sounds like you want to split the recipe.</td><td class="time"><a href="#t2019-05-16T09:33:50" class="time">09:33</a></td></tr>
<tr id="t2019-05-16T10:02:40"><td class="nickchange" colspan="2">*** mckoan|away is now known as mckoan</td><td><a href="#t2019-05-16T10:02:40" class="time">10:02</a></td></tr>
<tr id="t2019-05-16T11:23:01"><th class="nick" style="background: #97974f">kanavin</th><td class="text" style="color: #97974f">RP: is DL_DIR safe to share over r/w NFS? I couldn't find a definitive answer.</td><td class="time"><a href="#t2019-05-16T11:23:01" class="time">11:23</a></td></tr>
<tr id="t2019-05-16T11:23:16"><th class="nick" style="background: #4b904b">RP</th><td class="text" style="color: #4b904b">kanavin: yes</td><td class="time"><a href="#t2019-05-16T11:23:16" class="time">11:23</a></td></tr>
<tr id="t2019-05-16T11:23:26"><th class="nick" style="background: #4b904b">RP</th><td class="text" style="color: #4b904b">kanavin: the autobuilder does it</td><td class="time"><a href="#t2019-05-16T11:23:26" class="time">11:23</a></td></tr>
<tr id="t2019-05-16T11:26:08"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">is there some documentation about what is published in <a href="http://sstate.yoctoproject.org/" rel="nofollow">http://sstate.yoctoproject.org/</a> ? and how (e.g. from which builds)?</td><td class="time"><a href="#t2019-05-16T11:26:08" class="time">11:26</a></td></tr>
<tr id="t2019-05-16T11:27:12"><th class="nick" style="background: #97974f">kanavin</th><td class="text" style="color: #97974f">RP: thanks. I thought the autobuilder fetches things separately prior to starting the builds?</td><td class="time"><a href="#t2019-05-16T11:27:12" class="time">11:27</a></td></tr>
<tr id="t2019-05-16T11:37:36"><th class="nick" style="background: #4b904b">RP</th><td class="text" style="color: #4b904b">kanavin: it once did, these days it only does a sanity check on what is there :/</td><td class="time"><a href="#t2019-05-16T11:37:36" class="time">11:37</a></td></tr>
<tr id="t2019-05-16T11:47:55"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">the big issue with any sharing over NFS is that many NFS servers and clients are 'slightly broken'.&nbsp;&nbsp;So replacing files causes issues..</td><td class="time"><a href="#t2019-05-16T11:47:55" class="time">11:47</a></td></tr>
<tr id="t2019-05-16T11:48:10"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">if you can do the file replacement in an atomic fashion, that usually resolves the problem except on the really broken systems</td><td class="time"><a href="#t2019-05-16T11:48:10" class="time">11:48</a></td></tr>
<tr id="t2019-05-16T11:48:59"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">doesn't bitbake fetcher locks handle that well enough?</td><td class="time"><a href="#t2019-05-16T11:48:59" class="time">11:48</a></td></tr>
<tr id="t2019-05-16T11:49:21"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">no.. because locking doesn't always work on NFS fileservers.. :P</td><td class="time"><a href="#t2019-05-16T11:49:21" class="time">11:49</a></td></tr>
<tr id="t2019-05-16T11:49:31"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">cause NFS is usually slightly broken</td><td class="time"><a href="#t2019-05-16T11:49:31" class="time">11:49</a></td></tr>
<tr id="t2019-05-16T11:49:48"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">none of this is anything wrong with OE/bitbake..&nbsp;&nbsp;it's all due to NFS itself being horribly broken..</td><td class="time"><a href="#t2019-05-16T11:49:48" class="time">11:49</a></td></tr>
<tr id="t2019-05-16T11:50:00"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">usually result is failures reading files (as they're being written to by other sessions)</td><td class="time"><a href="#t2019-05-16T11:50:00" class="time">11:50</a></td></tr>
<tr id="t2019-05-16T11:50:17"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">the only issue I've seen related to this in last 6+ years (with 20+ builders sharing NFS from quite old RHEL) is when the lock file wasn't removed when bitbake was forcibly killed at wrong moment (happended about 3 times)</td><td class="time"><a href="#t2019-05-16T11:50:17" class="time">11:50</a></td></tr>
<tr id="t2019-05-16T11:50:23"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">i.e. you start reading a file.. the file then changes and the NFS server pukes and you get the equivalent of an I/O error on the original client</td><td class="time"><a href="#t2019-05-16T11:50:23" class="time">11:50</a></td></tr>
<tr id="t2019-05-16T11:50:49"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">I have customers who see this all the time.. much of the time they are use netapps and such to serve NFS to Linux clients..</td><td class="time"><a href="#t2019-05-16T11:50:49" class="time">11:50</a></td></tr>
<tr id="t2019-05-16T11:50:58"><td class="part" colspan="2">*** prabhakarlad &lt;prabhakarlad!~prabhakar@194.75.40.178&gt; has left #yocto</td><td><a href="#t2019-05-16T11:50:58" class="time">11:50</a></td></tr>
<tr id="t2019-05-16T11:51:01"><td class="action" colspan="2">* JaMa surprised that RHEL 5.6 isn't broken enough for us to see this :)</td><td><a href="#t2019-05-16T11:51:01" class="time">11:51</a></td></tr>
<tr id="t2019-05-16T11:51:30"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">but I've even seen it Linux client to Linux client..&nbsp;&nbsp;IF they have problems with this kind of things, I always recommend moving to an rsync 'push', with an http pull for mirrors... takes more local space, but seems to resolve the issues</td><td class="time"><a href="#t2019-05-16T11:51:30" class="time">11:51</a></td></tr>
<tr id="t2019-05-16T11:52:10"><th class="nick" style="background: #4b904b">RP</th><td class="text" style="color: #4b904b">fray: we're quite careful about not changing files unless we have locks so file issues tend not to be a problem. We assume the locking works well enough for our use cases</td><td class="time"><a href="#t2019-05-16T11:52:10" class="time">11:52</a></td></tr>
<tr id="t2019-05-16T11:52:19"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">but also re-downloads the same thing many times when multiple builders are triggered for the same change at the same time (our typical scenario)</td><td class="time"><a href="#t2019-05-16T11:52:19" class="time">11:52</a></td></tr>
<tr id="t2019-05-16T11:52:33"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">ya, like I said.. the problem is NOT OE/bitbake.. the rpoblem is 100% in the NFS servers and clients</td><td class="time"><a href="#t2019-05-16T11:52:33" class="time">11:52</a></td></tr>
<tr id="t2019-05-16T11:52:42"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">they're just plain broken in many cases</td><td class="time"><a href="#t2019-05-16T11:52:42" class="time">11:52</a></td></tr>
<tr id="t2019-05-16T11:53:53"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">for our builders we have dedicated processes that fetch from the network..&nbsp;&nbsp;all of the other build process then only fetch from the local download cache..&nbsp;&nbsp;that avoids the multiple builders trying to fetch the same thing issue (and ensures our local cache is always complete)</td><td class="time"><a href="#t2019-05-16T11:53:53" class="time">11:53</a></td></tr>
<tr id="t2019-05-16T11:54:45"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">--runall=fetch FYI</td><td class="time"><a href="#t2019-05-16T11:54:45" class="time">11:54</a></td></tr>
<tr id="t2019-05-16T11:55:09"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">and then you share that local download cache with PREMIRROR?</td><td class="time"><a href="#t2019-05-16T11:55:09" class="time">11:55</a></td></tr>
<tr id="t2019-05-16T11:55:13"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">yes</td><td class="time"><a href="#t2019-05-16T11:55:13" class="time">11:55</a></td></tr>
<tr id="t2019-05-16T11:55:29"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">(we also disable external network acccess on those builders)</td><td class="time"><a href="#t2019-05-16T11:55:29" class="time">11:55</a></td></tr>
<tr id="t2019-05-16T11:56:00"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">limits it to one controlled environment that accesses outside network resources.. helped us control network traffic when a major upgrade happened</td><td class="time"><a href="#t2019-05-16T11:56:00" class="time">11:56</a></td></tr>
<tr id="t2019-05-16T11:56:55"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">ok, makes sense, the only downside I see is that all the builders are blocked until this separate process is done updating all needed pieces</td><td class="time"><a href="#t2019-05-16T11:56:55" class="time">11:56</a></td></tr>
<tr id="t2019-05-16T11:57:19"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">correct.. but you can run that process in parallel with the regular builds, since it's addative</td><td class="time"><a href="#t2019-05-16T11:57:19" class="time">11:57</a></td></tr>
<tr id="t2019-05-16T11:57:27"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">which might not be big issue for you if you don't need so many updates</td><td class="time"><a href="#t2019-05-16T11:57:27" class="time">11:57</a></td></tr>
<tr id="t2019-05-16T11:58:17"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">just have to make sure you do the download fetch before running a series of builds..&nbsp;&nbsp;in our environment we have ways to do this -- but due to the volume of builds, there may be short periods of time that the featcher hasnt caught up.. but these are generally "quick" failures..</td><td class="time"><a href="#t2019-05-16T11:58:17" class="time">11:58</a></td></tr>
<tr id="t2019-05-16T11:58:26"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">not in the way how we're using it, we have a developer which creates a review in gerrit somewhere and might trigger CI in completely different location few minutes after that</td><td class="time"><a href="#t2019-05-16T11:58:26" class="time">11:58</a></td></tr>
<tr id="t2019-05-16T11:58:41"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">ya that is different then us..</td><td class="time"><a href="#t2019-05-16T11:58:41" class="time">11:58</a></td></tr>
<tr id="t2019-05-16T11:59:10"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">for those types of builds we start with the premirror from the fetch resource, and then allow network access for the rest..&nbsp;&nbsp;but that 'rest' is not cached, since the change hasn't been comitted to the repository yet..</td><td class="time"><a href="#t2019-05-16T11:59:10" class="time">11:59</a></td></tr>
<tr id="t2019-05-16T11:59:22"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">with shared DL_DIR first builder which gets to do_fetch, downloads new reference from remote location to local NFS in shared DL_DIR, other builders if they reach do_fetch as well, will wait a bit until the lock is lifted and then they finish all at almost the same time</td><td class="time"><a href="#t2019-05-16T11:59:22" class="time">11:59</a></td></tr>
<tr id="t2019-05-16T11:59:23"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">once it's committed hten the regular process kicks off and actually stores the download longer term..</td><td class="time"><a href="#t2019-05-16T11:59:23" class="time">11:59</a></td></tr>
<tr id="t2019-05-16T11:59:38"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">and the shared DL_DIR is then used by developers in given location as local PREMIRROR as well</td><td class="time"><a href="#t2019-05-16T11:59:38" class="time">11:59</a></td></tr>
<tr id="t2019-05-16T12:02:53"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">for the committed changes it's the same for us, someone will create annotated submissions/NN tag in the repository somewhere and almost immediately trigger verification build with metadata change incrementing the submission number for his component.</td><td class="time"><a href="#t2019-05-16T12:02:53" class="time">12:02</a></td></tr>
<tr id="t2019-05-16T12:05:46"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">and the same with shared SSTATE_DIR, except that the builds started in parallel cannot take much advantage of one of them finishing the task a bit sooner (because the setscene tasks were already finished and they all already decided to run the actual task itself)</td><td class="time"><a href="#t2019-05-16T12:05:46" class="time">12:05</a></td></tr>
<tr id="t2019-05-16T12:08:33"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">Ya the shared SSTATE_DIR, I'm not sure how exactly that is setup... the build guys have figured it out, but I know at one point rsync was involved to ensure atomic updates... not sure fi it's still being used.. but NFS was a real problem and we got away from it as far as R/W, and moved to read-only..</td><td class="time"><a href="#t2019-05-16T12:08:33" class="time">12:08</a></td></tr>
<tr id="t2019-05-16T12:08:54"><th class="nick" style="background: #97974f">kanavin</th><td class="text" style="color: #97974f">hopefully the task queue will be rewritten to consider cache after every step instead of only once at the beginning</td><td class="time"><a href="#t2019-05-16T12:08:54" class="time">12:08</a></td></tr>
<tr id="t2019-05-16T12:08:55"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">and every time we chased down a problem, it was a bug in the NFS server itself.. OE was doing the right thing already..</td><td class="time"><a href="#t2019-05-16T12:08:55" class="time">12:08</a></td></tr>
<tr id="t2019-05-16T12:09:48"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">kanavin that is really the only deficiency I see with the current way of doing things.. (other then initial parse performance, but we've looked at that and I'm not sure it can be optimized any further without a possibly radical change)</td><td class="time"><a href="#t2019-05-16T12:09:48" class="time">12:09</a></td></tr>
<tr id="t2019-05-16T12:10:09"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">kanavin: that would be nice especially with the sstate equivalence thing which would compare the build output of each step</td><td class="time"><a href="#t2019-05-16T12:10:09" class="time">12:10</a></td></tr>
<tr id="t2019-05-16T12:11:32"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">about to give an "intro to yocto" presentation to folks who were formerly application engineers and never had to deal with recipes or running the build system.. :)</td><td class="time"><a href="#t2019-05-16T12:11:32" class="time">12:11</a></td></tr>
<tr id="t2019-05-16T12:11:49"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">good luck! :)</td><td class="time"><a href="#t2019-05-16T12:11:49" class="time">12:11</a></td></tr>
<tr id="t2019-05-16T12:12:56"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">(biggest trick will be to get a taxi when I'm done with this back to Helsinki.. I'm some 35 minutes west of Helsinki right now.. kind of the middle of nowhere)&nbsp;&nbsp;:)</td><td class="time"><a href="#t2019-05-16T12:12:56" class="time">12:12</a></td></tr>
<tr id="t2019-05-16T12:13:30"><th class="nick" style="background: #97974f">kanavin</th><td class="text" style="color: #97974f">fray, may I ask whome are you visiting, or is that ultra secret? I lived in Helsinki for 15 years</td><td class="time"><a href="#t2019-05-16T12:13:30" class="time">12:13</a></td></tr>
<tr id="t2019-05-16T12:13:51"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">think large telco company.. :)&nbsp;&nbsp;headquartered in Espoo</td><td class="time"><a href="#t2019-05-16T12:13:51" class="time">12:13</a></td></tr>
<tr id="t2019-05-16T12:13:58"><th class="nick" style="background: #97974f">kanavin</th><td class="text" style="color: #97974f">worked for Nokia, then Intel</td><td class="time"><a href="#t2019-05-16T12:13:58" class="time">12:13</a></td></tr>
<tr id="t2019-05-16T12:14:10"><th class="nick" style="background: #8c4a4a">fray</th><td class="text" style="color: #8c4a4a">ya this is the training facility to the west</td><td class="time"><a href="#t2019-05-16T12:14:10" class="time">12:14</a></td></tr>
<tr id="t2019-05-16T12:15:45"><th class="nick" style="background: #97974f">kanavin</th><td class="text" style="color: #97974f">in Helsinki area anything outside of the smallish core center feels like middle of nowhere, it's basically an overgrown village</td><td class="time"><a href="#t2019-05-16T12:15:45" class="time">12:15</a></td></tr>
<tr id="t2019-05-16T12:34:11"><td class="part" colspan="2">*** TafThorne1 &lt;TafThorne1!~thomas@95.130.100.149&gt; has left #yocto</td><td><a href="#t2019-05-16T12:34:11" class="time">12:34</a></td></tr>
<tr id="t2019-05-16T13:19:22"><th class="nick" style="background: #539e9e">yocti</th><td class="text" style="color: #539e9e">New news from stackoverflow: How to build a customized linux kernel image for sama5d27 som1 ek1 board? &lt;<a href="https://stackoverflow.com/questions/56169585/how-to-build-a-customized-linux-kernel-image-for-sama5d27-som1-ek1-board&gt;" rel="nofollow">https://stackoverflow.com/questions/56169585/how-to-build-a-customized-linux-kernel-image-for-sama5d27-som1-ek1-board&gt;</a></td><td class="time"><a href="#t2019-05-16T13:19:22" class="time">13:19</a></td></tr>
<tr id="t2019-05-16T15:00:44"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">RP: khem: it looks like there is still some missing PREFERRED_VERSION for one of gcc recipes (maybe only with multilib enabled)</td><td class="time"><a href="#t2019-05-16T15:00:44" class="time">15:00</a></td></tr>
<tr id="t2019-05-16T15:01:28"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">glibc just failed for me with: 9.1.0/ld.bfd: cannot find -lgcc while using the current default GCCVERSION ?= "8.%"</td><td class="time"><a href="#t2019-05-16T15:01:28" class="time">15:01</a></td></tr>
<tr id="t2019-05-16T15:01:53"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">NOTE: recipe lib32-gcc-cross-arm-9.1.0-r0: task do_populate_lic_setscene: Started</td><td class="time"><a href="#t2019-05-16T15:01:53" class="time">15:01</a></td></tr>
<tr id="t2019-05-16T15:01:53"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">NOTE: recipe lib32-gcc-runtime-8.3.0-r0: task do_populate_lic_setscene: Started</td><td class="time"><a href="#t2019-05-16T15:01:53" class="time">15:01</a></td></tr>
<tr id="t2019-05-16T15:02:13"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">NOTE: recipe gcc-cross-canadian-aarch64-8.3.0-r0: task do_populate_lic_setscene: Succeeded</td><td class="time"><a href="#t2019-05-16T15:02:13" class="time">15:02</a></td></tr>
<tr id="t2019-05-16T15:02:16"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">NOTE: recipe gcc-cross-canadian-arm-9.1.0-r0: task do_populate_lic_setscene: Started</td><td class="time"><a href="#t2019-05-16T15:02:16" class="time">15:02</a></td></tr>
<tr id="t2019-05-16T15:03:56"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">it's set only for cross-${TARGET_ARCH}/cross-canadian-${TRANSLATED_TARGET_ARCH} not the other arch from multilib</td><td class="time"><a href="#t2019-05-16T15:03:56" class="time">15:03</a></td></tr>
<tr id="t2019-05-16T15:04:41"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">maybe using negative D_P while the newest one isn't the default one would make sense as well</td><td class="time"><a href="#t2019-05-16T15:04:41" class="time">15:04</a></td></tr>
<tr id="t2019-05-16T15:27:29"><th class="nick" style="background: #a25555">alessioigor</th><td class="text" style="color: #a25555">The do_image_complete function removes the old images. Is there a way to avoid this (that is keep the old images)?&nbsp;&nbsp;Thanks!</td><td class="time"><a href="#t2019-05-16T15:27:29" class="time">15:27</a></td></tr>
<tr id="t2019-05-16T15:30:54"><th class="nick" style="background: #4b904b">RP</th><td class="text" style="color: #4b904b">JaMa: I wonder why we don't see that on our multlib tests. I kind of left this fuzzy to track down some of these issues</td><td class="time"><a href="#t2019-05-16T15:30:54" class="time">15:30</a></td></tr>
<tr id="t2019-05-16T15:31:11"><th class="nick" style="background: #4b904b">RP</th><td class="text" style="color: #4b904b">JaMa: I did think I had them all after sorting fortran though</td><td class="time"><a href="#t2019-05-16T15:31:11" class="time">15:31</a></td></tr>
<tr id="t2019-05-16T15:31:28"><th class="nick" style="background: #4b904b">RP</th><td class="text" style="color: #4b904b">well, there is a better way to sort fortran but...</td><td class="time"><a href="#t2019-05-16T15:31:28" class="time">15:31</a></td></tr>
<tr id="t2019-05-16T15:35:41"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">RP: is there build log from one of multilib builds on AB? maybe it also builds 2 different versions, just without triggering the failure in glibc</td><td class="time"><a href="#t2019-05-16T15:35:41" class="time">15:35</a></td></tr>
<tr id="t2019-05-16T15:36:19"><th class="nick" style="background: #4b904b">RP</th><td class="text" style="color: #4b904b">JaMa: <a href="https://autobuilder.yoctoproject.org/typhoon/#/builders/44/builds/611" rel="nofollow">https://autobuilder.yoctoproject.org/typhoon/#/builders/44/builds/611</a></td><td class="time"><a href="#t2019-05-16T15:36:19" class="time">15:36</a></td></tr>
<tr id="t2019-05-16T15:36:25"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">I'm debugging the code in multilib_global.bbclass and I'm not seeing TARGET_ARCH to be expanded with multilib (only the MLPREFIX added)</td><td class="time"><a href="#t2019-05-16T15:36:25" class="time">15:36</a></td></tr>
<tr id="t2019-05-16T15:38:03"><th class="nick" style="background: #4b904b">RP</th><td class="text" style="color: #4b904b">JaMa: you're probably right about it working and not triggering the failure</td><td class="time"><a href="#t2019-05-16T15:38:03" class="time">15:38</a></td></tr>
<tr id="t2019-05-16T15:40:23"><th class="nick" style="background: #4b904b">RP</th><td class="text" style="color: #4b904b">JaMa: had a quick grep over the step*b logs and can't see gcc 9 anywhere</td><td class="time"><a href="#t2019-05-16T15:40:23" class="time">15:40</a></td></tr>
<tr id="t2019-05-16T15:41:53"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">neither did I, will try to replicate the multilib setup from AB and compare the debug output from multilib_global.bbclass</td><td class="time"><a href="#t2019-05-16T15:41:53" class="time">15:41</a></td></tr>
<tr id="t2019-05-16T16:46:00"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">multilib magic continues ERROR: Nothing PROVIDES 'lib32-gcc-cross-i586'. Close matches: lib32-gcc-cross-i686 lib32-go-cross-i586 lib32-gdb-cross-i686</td><td class="time"><a href="#t2019-05-16T16:46:00" class="time">16:46</a></td></tr>
<tr id="t2019-05-16T16:48:42"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">and I don't mean the i586 in lib32-gcc-cross-i586 I've used in bitbake -e, but go-cross is using i586 arch, while P_V is set only for lib32-go-cross-i686</td><td class="time"><a href="#t2019-05-16T16:48:42" class="time">16:48</a></td></tr>
<tr id="t2019-05-16T16:49:59"><td class="nickchange" colspan="2">*** mckoan is now known as mckoan|away</td><td><a href="#t2019-05-16T16:49:59" class="time">16:49</a></td></tr>
<tr id="t2019-05-16T16:52:17"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">ah, that's proabably because go-cross sets PN = "go-cross-${TUNE_PKGARCH}" and PREFERRED_VERSION_go-cross-${TARGET_ARCH}</td><td class="time"><a href="#t2019-05-16T16:52:17" class="time">16:52</a></td></tr>
<tr id="t2019-05-16T16:59:09"><th class="nick" style="background: #a25555">alessioigor</th><td class="text" style="color: #a25555">Is there a way to create more than an image(wic) from same recipe(bb)?</td><td class="time"><a href="#t2019-05-16T16:59:09" class="time">16:59</a></td></tr>
<tr id="t2019-05-16T17:02:16"><th class="nick" style="background: #4b904b">RP</th><td class="text" style="color: #4b904b">JaMa: ah, that starts to explain more about what is going on</td><td class="time"><a href="#t2019-05-16T17:02:16" class="time">17:02</a></td></tr>
<tr id="t2019-05-16T17:05:05"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">RP: but this only on go-cross (not gcc-cross), so it might be separate issue, in my build it seems to work for x86_64 (and i686 multilib), but not aarch64 (and arm multilib) with multilib enabled in both machines very similarly</td><td class="time"><a href="#t2019-05-16T17:05:05" class="time">17:05</a></td></tr>
<tr id="t2019-05-16T17:06:24"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">I've sent RFC about go-cross (in case someone remembers why TUNE_PKGARCH is used there)</td><td class="time"><a href="#t2019-05-16T17:06:24" class="time">17:06</a></td></tr>
<tr id="t2019-05-16T17:12:45"><th class="nick" style="background: #97974f">kanavin</th><td class="text" style="color: #97974f">RP: I took a look at bitbake/lib/bb/runqueue.py... yeah it's not easy :) there are two separate executor classes for setscene tasks and 'real' tasks, first one runs to completion then the other</td><td class="time"><a href="#t2019-05-16T17:12:45" class="time">17:12</a></td></tr>
<tr id="t2019-05-16T17:13:59"><th class="nick" style="background: #97974f">kanavin</th><td class="text" style="color: #97974f">the rewrite would have to somehow combine both into one mega-loop, where each completed real task would trigger another pass at setscene tasks</td><td class="time"><a href="#t2019-05-16T17:13:59" class="time">17:13</a></td></tr>
<tr id="t2019-05-16T17:23:23"><th class="nick" style="background: #57a657">JPEW</th><td class="text" style="color: #57a657">kanavin: That was my conclusion also</td><td class="time"><a href="#t2019-05-16T17:23:23" class="time">17:23</a></td></tr>
<tr id="t2019-05-16T17:55:50"><th class="nick" style="background: #5959a9">erakis</th><td class="text" style="color: #5959a9">Hi, it's probably a dumb question but if I call `bitbake` by setting first an environment variable `MY_VAR=1 &amp;&amp; bitbake image`. How can I read the value of MY_VAR from the recipe ? xx = ${MY_VAR} ?</td><td class="time"><a href="#t2019-05-16T17:55:50" class="time">17:55</a></td></tr>
<tr id="t2019-05-16T17:58:01"><th class="nick" style="background: #57a657">JPEW</th><td class="text" style="color: #57a657">erakis: I think bitbake only imports a small number of variable from the environment</td><td class="time"><a href="#t2019-05-16T17:58:01" class="time">17:58</a></td></tr>
<tr id="t2019-05-16T17:58:34"><th class="nick" style="background: #57a657">JPEW</th><td class="text" style="color: #57a657">erakis: <a href="https://www.yoctoproject.org/docs/current/bitbake-user-manual/bitbake-user-manual.html#var-bb-BB_ENV_WHITELIST" rel="nofollow">https://www.yoctoproject.org/docs/current/bitbake-user-manual/bitbake-user-manual.html#var-bb-BB_ENV_WHITELIST</a></td><td class="time"><a href="#t2019-05-16T17:58:34" class="time">17:58</a></td></tr>
<tr id="t2019-05-16T17:59:24"><th class="nick" style="background: #97974f">kanavin</th><td class="text" style="color: #97974f">erakis, environment variables are generally a very difficult thing to debug, I would recommend you control your recipe behaviour through other means</td><td class="time"><a href="#t2019-05-16T17:59:24" class="time">17:59</a></td></tr>
<tr id="t2019-05-16T17:59:25"><th class="nick" style="background: #57a657">JPEW</th><td class="text" style="color: #57a657">erakis: But, you want to be careful about doing that because it can cause a lot of unecessary rebuilding</td><td class="time"><a href="#t2019-05-16T17:59:25" class="time">17:59</a></td></tr>
<tr id="t2019-05-16T18:00:36"><th class="nick" style="background: #97974f">kanavin</th><td class="text" style="color: #97974f">If I had a time machine, I would prevent them from happening at all.</td><td class="time"><a href="#t2019-05-16T18:00:36" class="time">18:00</a></td></tr>
<tr id="t2019-05-16T18:03:44"><th class="nick" style="background: #5959a9">erakis</th><td class="text" style="color: #5959a9">Suppose I want to launch a build from a CD/DI system like Gitlab. I would like to pass the job/build ID to yocto and retrieved it from a recipe. The only way I found so far is to declare a variable into the `local.conf` and then lunch the bitbake from a script that use `sed ....` to replace the variable's value by the one coming from an environment variable or the script's parameters.</td><td class="time"><a href="#t2019-05-16T18:03:44" class="time">18:03</a></td></tr>
<tr id="t2019-05-16T18:04:15"><th class="nick" style="background: #5959a9">erakis</th><td class="text" style="color: #5959a9">kanavin: What do you propose?</td><td class="time"><a href="#t2019-05-16T18:04:15" class="time">18:04</a></td></tr>
<tr id="t2019-05-16T18:05:03"><th class="nick" style="background: #5959a9">erakis</th><td class="text" style="color: #5959a9">JPEW: Thank you.</td><td class="time"><a href="#t2019-05-16T18:05:03" class="time">18:05</a></td></tr>
<tr id="t2019-05-16T18:06:07"><th class="nick" style="background: #97974f">kanavin</th><td class="text" style="color: #97974f">erakis, where would you use the job id?</td><td class="time"><a href="#t2019-05-16T18:06:07" class="time">18:06</a></td></tr>
<tr id="t2019-05-16T18:07:00"><th class="nick" style="background: #97974f">kanavin</th><td class="text" style="color: #97974f">if you want to include it in images' filenames, you can rename them after bitbake completes</td><td class="time"><a href="#t2019-05-16T18:07:00" class="time">18:07</a></td></tr>
<tr id="t2019-05-16T18:12:33"><th class="nick" style="background: #5959a9">erakis</th><td class="text" style="color: #5959a9">kanavin: The job id is automatically generated on Gitlab when build is triggered via web api or web interface. We use it as a build id. But once the image is build and flash on the device we have no way to read the original build number. I recently discovered the recipe `distro-feed-configs` and then I would override it to include the gitlab job id in the `/etc/build` file. When gilab runner trigger a build it open a shell and then launch bitbake so this is</td><td class="time"><a href="#t2019-05-16T18:12:33" class="time">18:12</a></td></tr>
<tr id="t2019-05-16T18:12:33"><th class="nick" style="background: #5959a9">erakis</th><td class="text" style="color: #5959a9">way I though passing the job id using an environment variable was a good idea.</td><td class="time"><a href="#t2019-05-16T18:12:33" class="time">18:12</a></td></tr>
<tr id="t2019-05-16T18:15:35"><th class="nick" style="background: #57a657">JPEW</th><td class="text" style="color: #57a657">erakis: bitbake will respect an auto.conf file in addition to local.conf. The auto.conf file is designed to be written by CI. I think if you make your CI job write out this as auto.conf it will do what you want: <a href="https://pastebin.com/JxdELz6s" rel="nofollow">https://pastebin.com/JxdELz6s</a></td><td class="time"><a href="#t2019-05-16T18:15:35" class="time">18:15</a></td></tr>
<tr id="t2019-05-16T18:17:35"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">erakis: FWIW we're using BB_ENV_WHITELIST exacly for this to pass BUILD_ID from jenkins to bitbake environment</td><td class="time"><a href="#t2019-05-16T18:17:35" class="time">18:17</a></td></tr>
<tr id="t2019-05-16T18:18:04"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">which is then used to construct consistent versioning of all build artifacts (images, kernel images, modules, etc)</td><td class="time"><a href="#t2019-05-16T18:18:04" class="time">18:18</a></td></tr>
<tr id="t2019-05-16T18:18:36"><th class="nick" style="background: #97974f">kanavin</th><td class="text" style="color: #97974f">the problem with environment variables is that they live in memory, so when things go wrong, it's difficult to establish what they were at any given point</td><td class="time"><a href="#t2019-05-16T18:18:36" class="time">18:18</a></td></tr>
<tr id="t2019-05-16T18:18:59"><th class="nick" style="background: #97974f">kanavin</th><td class="text" style="color: #97974f">for this reason I always prefer passing data via files</td><td class="time"><a href="#t2019-05-16T18:18:59" class="time">18:18</a></td></tr>
<tr id="t2019-05-16T18:19:23"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">for us they are e.g. written at the beggining of build in the Build Configuration, so it's quite clear what they were</td><td class="time"><a href="#t2019-05-16T18:19:23" class="time">18:19</a></td></tr>
<tr id="t2019-05-16T18:19:38"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">unlike some files which most people cannot ever access on the build slaves filesystem</td><td class="time"><a href="#t2019-05-16T18:19:38" class="time">18:19</a></td></tr>
<tr id="t2019-05-16T18:20:47"><th class="nick" style="background: #97974f">kanavin</th><td class="text" style="color: #97974f">files however remain in place after something has failed, so you can go and inspect them</td><td class="time"><a href="#t2019-05-16T18:20:47" class="time">18:20</a></td></tr>
<tr id="t2019-05-16T18:21:05"><th class="nick" style="background: #97974f">kanavin</th><td class="text" style="color: #97974f">for environment vars, you have to insert printouts at strategic points in code</td><td class="time"><a href="#t2019-05-16T18:21:05" class="time">18:21</a></td></tr>
<tr id="t2019-05-16T18:21:09"><th class="nick" style="background: #5959a9">erakis</th><td class="text" style="color: #5959a9">What I'm doing is not far from this, I use a script to start the build. This script open the file `local.conf` and overwrite the value of the variable `MY_BUILD_NUMBER` for `MY_BUILD_NUMBER=4434`.</td><td class="time"><a href="#t2019-05-16T18:21:09" class="time">18:21</a></td></tr>
<tr id="t2019-05-16T18:21:09"><th class="nick" style="background: #5959a9">erakis</th><td class="text" style="color: #5959a9">after which the variable is available in the recipes.</td><td class="time"><a href="#t2019-05-16T18:21:09" class="time">18:21</a></td></tr>
<tr id="t2019-05-16T18:21:40"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">not for us, when something fails then there is probably many builds in queue which will happily remove all the left-over files and start their own script</td><td class="time"><a href="#t2019-05-16T18:21:40" class="time">18:21</a></td></tr>
<tr id="t2019-05-16T18:22:49"><th class="nick" style="background: #97974f">kanavin</th><td class="text" style="color: #97974f">JaMa, that's for debugging failures locally. I know from experience that env vars are a pain in the butt. Just the other day I wanted to upgrade apt in yocto (because the one we have has a major security hole).</td><td class="time"><a href="#t2019-05-16T18:22:49" class="time">18:22</a></td></tr>
<tr id="t2019-05-16T18:23:18"><th class="nick" style="background: #97974f">kanavin</th><td class="text" style="color: #97974f">I decided to do something else after finding out the new apt sanitizes the environment, and I have no idea where to start looking for where it happens.</td><td class="time"><a href="#t2019-05-16T18:23:18" class="time">18:23</a></td></tr>
<tr id="t2019-05-16T18:23:42"><th class="nick" style="background: #97974f">kanavin</th><td class="text" style="color: #97974f">had it passed configuration via a file, it'd be far easier to deduce</td><td class="time"><a href="#t2019-05-16T18:23:42" class="time">18:23</a></td></tr>
<tr id="t2019-05-16T18:24:05"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">as long as you don't export that BB_ENV_WHITELISTed variable, then what's wrong with that?</td><td class="time"><a href="#t2019-05-16T18:24:05" class="time">18:24</a></td></tr>
<tr id="t2019-05-16T18:29:42"><th class="nick" style="background: #5959a9">erakis</th><td class="text" style="color: #5959a9">kanavin: JaMa: Thank you for you advise.</td><td class="time"><a href="#t2019-05-16T18:29:42" class="time">18:29</a></td></tr>
<tr id="t2019-05-16T18:47:13"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">RP: the multilib/gcc P_V issue is really strange, if I add another localdata.expand(v) before <a href="http://git.openembedded.org/openembedded-core/tree/meta/classes/multilib_global.bbclass#n38" rel="nofollow">http://git.openembedded.org/openembedded-core/tree/meta/classes/multilib_global.bbclass#n38</a> then it works for my aarch64 (with arm multilib) case as well, will dig a bit more</td><td class="time"><a href="#t2019-05-16T18:47:13" class="time">18:47</a></td></tr>
<tr id="t2019-05-16T19:21:41"><th class="nick" style="background: #4b904b">RP</th><td class="text" style="color: #4b904b">JaMa: that does seem odd :/</td><td class="time"><a href="#t2019-05-16T19:21:41" class="time">19:21</a></td></tr>
<tr id="t2019-05-16T19:22:55"><th class="nick" style="background: #4b904b">RP</th><td class="text" style="color: #4b904b">kanavin: your summary is correct, it is basically a rewrite of runqueue :/</td><td class="time"><a href="#t2019-05-16T19:22:55" class="time">19:22</a></td></tr>
<tr id="t2019-05-16T19:23:53"><th class="nick" style="background: #4b904b">RP</th><td class="text" style="color: #4b904b">kanavin: still thinking about that packagegroup rebuild thing</td><td class="time"><a href="#t2019-05-16T19:23:53" class="time">19:23</a></td></tr>
<tr id="t2019-05-16T19:24:31"><th class="nick" style="background: #4b904b">RP</th><td class="text" style="color: #4b904b">kanavin: I worry 7298 is related and it'd be the second time that bug has come up recently</td><td class="time"><a href="#t2019-05-16T19:24:31" class="time">19:24</a></td></tr>
<tr id="t2019-05-16T19:40:20"><th class="nick" style="background: #97974f">kanavin</th><td class="text" style="color: #97974f">RP: this however is pretty clear-cut special case - the packagegroup explicitly refers to packages with TUNE_ARCH in their name (smth like binutils-cross-canadian-$TUNE_ARCH). If TUNE_ARCH changes, packagegroup must be rebuilt.</td><td class="time"><a href="#t2019-05-16T19:40:20" class="time">19:40</a></td></tr>
<tr id="t2019-05-16T19:51:11"><th class="nick" style="background: #adad5b">armpit</th><td class="text" style="color: #adad5b">RP you still awake ?</td><td class="time"><a href="#t2019-05-16T19:51:11" class="time">19:51</a></td></tr>
<tr id="t2019-05-16T19:51:47"><th class="nick" style="background: #adad5b">armpit</th><td class="text" style="color: #adad5b">bug 10653 is in Stephen's name</td><td class="time"><a href="#t2019-05-16T19:51:47" class="time">19:51</a></td></tr>
<tr id="t2019-05-16T19:51:48"><th class="nick" style="background: #539e9e">yocti</th><td class="text" style="color: #539e9e">Bug <a href="https://bugzilla.yoctoproject.org/show_bug.cgi?id=10653" rel="nofollow">https://bugzilla.yoctoproject.org/show_bug.cgi?id=10653</a> normal, Medium, Future, sjolley.yp.pm, NEW , Improve Node.js developer workflow.</td><td class="time"><a href="#t2019-05-16T19:51:48" class="time">19:51</a></td></tr>
<tr id="t2019-05-16T19:53:29"><td class="action" colspan="2">* armpit thats freaky</td><td><a href="#t2019-05-16T19:53:29" class="time">19:53</a></td></tr>
<tr id="t2019-05-16T20:21:41"><th class="nick" style="background: #b15db1">psrcode</th><td class="text" style="color: #b15db1">Is there any way to override/modify the CONFIGUREOPTS from autotools? I'm trying to remove the --target and replace it by --enable-targets= for gdb-cross, it is mostly to access the threaddb functionnality of gdb (a big hack).</td><td class="time"><a href="#t2019-05-16T20:21:41" class="time">20:21</a></td></tr>
<tr id="t2019-05-16T20:25:42"><th class="nick" style="background: #b15db1">psrcode</th><td class="text" style="color: #b15db1">easily that is</td><td class="time"><a href="#t2019-05-16T20:25:42" class="time">20:25</a></td></tr>
<tr id="t2019-05-16T20:28:34"><th class="nick" style="background: #5fb4b4">kergoth</th><td class="text" style="color: #5fb4b4">worst case just use _remove.</td><td class="time"><a href="#t2019-05-16T20:28:34" class="time">20:28</a></td></tr>
<tr id="t2019-05-16T20:30:09"><th class="nick" style="background: #4b904b">RP</th><td class="text" style="color: #4b904b">armpit: yes, kind of</td><td class="time"><a href="#t2019-05-16T20:30:09" class="time">20:30</a></td></tr>
<tr id="t2019-05-16T20:32:00"><th class="nick" style="background: #4b904b">RP</th><td class="text" style="color: #4b904b">psrcode: not sure if you saw it but I've been testing more ptest configurations and lttng-tools-ptest isn't working so well on a core-image-minimal. I suspect there are some "obvious" dependencies we're missing but its back to the timeouts :/</td><td class="time"><a href="#t2019-05-16T20:32:00" class="time">20:32</a></td></tr>
<tr id="t2019-05-16T20:32:41"><th class="nick" style="background: #b15db1">psrcode</th><td class="text" style="color: #b15db1">kergoth: that could actually do it, not sure why I did not think about thatr</td><td class="time"><a href="#t2019-05-16T20:32:41" class="time">20:32</a></td></tr>
<tr id="t2019-05-16T20:33:13"><th class="nick" style="background: #b15db1">psrcode</th><td class="text" style="color: #b15db1">RP: yep, will look at it. I should be able to reproduce this with a simple conf with lttng-tools-ptest installed?</td><td class="time"><a href="#t2019-05-16T20:33:13" class="time">20:33</a></td></tr>
<tr id="t2019-05-16T20:33:45"><th class="nick" style="background: #4b904b">RP</th><td class="text" style="color: #4b904b">psrcode: yes, its a core-image-minimal with lttng-tools-ptest and openssh added (plus some space and memory for qemu)</td><td class="time"><a href="#t2019-05-16T20:33:45" class="time">20:33</a></td></tr>
<tr id="t2019-05-16T20:33:47"><th class="nick" style="background: #b15db1">psrcode</th><td class="text" style="color: #b15db1">RP: what tree are you testing this against? juste to be sure I have the same tree</td><td class="time"><a href="#t2019-05-16T20:33:47" class="time">20:33</a></td></tr>
<tr id="t2019-05-16T20:34:02"><th class="nick" style="background: #4b904b">RP</th><td class="text" style="color: #4b904b">psrcode: basically the exact config lines in my email. It was with current master</td><td class="time"><a href="#t2019-05-16T20:34:02" class="time">20:34</a></td></tr>
<tr id="t2019-05-16T20:34:24"><th class="nick" style="background: #b15db1">psrcode</th><td class="text" style="color: #b15db1">perfect</td><td class="time"><a href="#t2019-05-16T20:34:24" class="time">20:34</a></td></tr>
<tr id="t2019-05-16T20:34:31"><th class="nick" style="background: #b15db1">psrcode</th><td class="text" style="color: #b15db1">i'll give it a try</td><td class="time"><a href="#t2019-05-16T20:34:31" class="time">20:34</a></td></tr>
<tr id="t2019-05-16T20:35:10"><th class="nick" style="background: #4b904b">RP</th><td class="text" style="color: #4b904b">psrcode: I'm sure its something obvious missing, I've not looked into what yet as there are a few issues that test highlighted...</td><td class="time"><a href="#t2019-05-16T20:35:10" class="time">20:35</a></td></tr>
<tr id="t2019-05-16T20:35:39"><th class="nick" style="background: #b15db1">psrcode</th><td class="text" style="color: #b15db1">kergoth: will the _remove be scoped to only the current recipe?</td><td class="time"><a href="#t2019-05-16T20:35:39" class="time">20:35</a></td></tr>
<tr id="t2019-05-16T20:36:00"><th class="nick" style="background: #5fb4b4">kergoth</th><td class="text" style="color: #5fb4b4">if it's defined in the recipe or bbappend, then by definition yes, a recipe can't affect configuration or other recipe metadata</td><td class="time"><a href="#t2019-05-16T20:36:00" class="time">20:36</a></td></tr>
<tr id="t2019-05-16T20:36:06"><th class="nick" style="background: #5fb4b4">kergoth</th><td class="text" style="color: #5fb4b4">otherwise use the _pn- override</td><td class="time"><a href="#t2019-05-16T20:36:06" class="time">20:36</a></td></tr>
<tr id="t2019-05-16T20:37:10"><th class="nick" style="background: #b15db1">psrcode</th><td class="text" style="color: #b15db1">kergoth: good, sorry for those stupid question, I need to find some time to do a proper reading of the manual.</td><td class="time"><a href="#t2019-05-16T20:37:10" class="time">20:37</a></td></tr>
<tr id="t2019-05-16T20:50:35"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">RP: I found the reason why the multilib_global.bbclass didn't work with our tune files, it's this line: OVERRIDES_append_class-target = "${@bb.utils.contains('TUNE_FEATURES', 'webos-minsize', ':webos-minsize', '', d)}"</td><td class="time"><a href="#t2019-05-16T20:50:35" class="time">20:50</a></td></tr>
<tr id="t2019-05-16T20:52:00"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">RP: so the OVERRIDES used by localdata in multilib_global.bbclass were: "${TARGET_OS}:${TRANSLATED_TARGET_ARCH}:pn-${PN}:${MACHINEOVERRIDES}:${DISTROOVERRIDES}:${CLASSOVERRIDE}${LIBCOVERRIDE}:forcevariable${@bb.utils.contains('TUNE_FEATURES', 'webos-minsize', ':webos-minsize', '', d)}:virtclass-multilib-lib32"</td><td class="time"><a href="#t2019-05-16T20:52:00" class="time">20:52</a></td></tr>
<tr id="t2019-05-16T21:00:27"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">RP: after replacing _append with .= it works as well</td><td class="time"><a href="#t2019-05-16T21:00:27" class="time">21:00</a></td></tr>
<tr id="t2019-05-16T21:08:16"><td class="action" colspan="2">* armpit wonders if overrides is shooting?</td><td><a href="#t2019-05-16T21:08:16" class="time">21:08</a></td></tr>
<tr id="t2019-05-16T21:09:15"><td class="action" colspan="2">* armpit or maybe overrides is German</td><td><a href="#t2019-05-16T21:09:15" class="time">21:09</a></td></tr>
<tr id="t2019-05-16T21:11:41"><th class="nick" style="background: #9b519b">JaMa</th><td class="text" style="color: #9b519b">shooting Germans?</td><td class="time"><a href="#t2019-05-16T21:11:41" class="time">21:11</a></td></tr>
<tr id="t2019-05-16T21:31:56"><th class="nick" style="background: #57a657">JPEW</th><td class="text" style="color: #57a657">Err, whats the Upstream-Status for an unmaintaned project (zip)?</td><td class="time"><a href="#t2019-05-16T21:31:56" class="time">21:31</a></td></tr>
<tr id="t2019-05-16T21:51:09"><th class="nick" style="background: #539e9e">yocti</th><td class="text" style="color: #539e9e">New news from stackoverflow: Unable to parse Machine ?= raspberrypi? &lt;<a href="https://stackoverflow.com/questions/56176934/unable-to-parse-machine-raspberrypi&gt;" rel="nofollow">https://stackoverflow.com/questions/56176934/unable-to-parse-machine-raspberrypi&gt;</a></td><td class="time"><a href="#t2019-05-16T21:51:09" class="time">21:51</a></td></tr>
<tr id="t2019-05-16T22:21:13"><th class="nick" style="background: #539e9e">yocti</th><td class="text" style="color: #539e9e">New news from stackoverflow: How To Determine Which Recipe Built A File In The Target SDK? &lt;<a href="https://stackoverflow.com/questions/56177122/how-to-determine-which-recipe-built-a-file-in-the-target-sdk&gt;" rel="nofollow">https://stackoverflow.com/questions/56177122/how-to-determine-which-recipe-built-a-file-in-the-target-sdk&gt;</a></td><td class="time"><a href="#t2019-05-16T22:21:13" class="time">22:21</a></td></tr>
<tr id="t2019-05-16T22:26:33"><th class="nick" style="background: #adad5b">armpit</th><td class="text" style="color: #adad5b">JPEW, Inappropriate [dead project] ?</td><td class="time"><a href="#t2019-05-16T22:26:33" class="time">22:26</a></td></tr>
<tr id="t2019-05-16T22:27:00"><th class="nick" style="background: #adad5b">armpit</th><td class="text" style="color: #adad5b">ah,, nope</td><td class="time"><a href="#t2019-05-16T22:27:00" class="time">22:27</a></td></tr>
<tr id="t2019-05-16T22:27:04"><th class="nick" style="background: #adad5b">armpit</th><td class="text" style="color: #adad5b">no upstream (the upstream is no longer available -- dead project)</td><td class="time"><a href="#t2019-05-16T22:27:04" class="time">22:27</a></td></tr>
<tr id="t2019-05-16T22:27:23"><th class="nick" style="background: #adad5b">armpit</th><td class="text" style="color: #adad5b">its in <a href="https://www.openembedded.org/wiki/Commit_Patch_Message_Guidelines" rel="nofollow">https://www.openembedded.org/wiki/Commit_Patch_Message_Guidelines</a></td><td class="time"><a href="#t2019-05-16T22:27:23" class="time">22:27</a></td></tr>
<tr id="t2019-05-16T22:51:18"><th class="nick" style="background: #539e9e">yocti</th><td class="text" style="color: #539e9e">New news from stackoverflow: How to tell bitbake to calculate variable's basehash value after specific task? &lt;<a href="https://stackoverflow.com/questions/55911423/how-to-tell-bitbake-to-calculate-variables-basehash-value-after-specific-task&gt;" rel="nofollow">https://stackoverflow.com/questions/55911423/how-to-tell-bitbake-to-calculate-variables-basehash-value-after-specific-task&gt;</a></td><td class="time"><a href="#t2019-05-16T22:51:18" class="time">22:51</a></td></tr>
</table>
<div class="navigation"> <a href="%23yocto.2019-05-15.log.html">&#171; Wednesday, 2019-05-15</a> <a href="index.html">Index</a> <a href="%23yocto.2019-05-17.log.html">Friday, 2019-05-17 &#187;</a> </div>

<div class="generatedby">
<p>Generated by irclog2html.py 2.11.0 by <a href="mailto:marius@pov.lt">Marius Gedminas</a>
 - find it at <a href="http://mg.pov.lt/irclog2html/">mg.pov.lt</a>!</p>
</div>
</body>
</html>
