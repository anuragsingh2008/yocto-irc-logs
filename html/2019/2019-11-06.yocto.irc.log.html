<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Wednesday, 2019-11-06</title>
  <link rel="stylesheet" href="irclog.css" />
  <meta name="generator" content="irclog2html.py 2.11.0 by Marius Gedminas" />
  <meta name="version" content="2.11.0 - 2012-07-30" />
</head>
<body>
<h1>Wednesday, 2019-11-06</h1>
<div class="navigation"> <a href="%23yocto.2019-11-05.log.html">&#171; Tuesday, 2019-11-05</a> <a href="index.html">Index</a> <a href="%23yocto.2019-11-07.log.html">Thursday, 2019-11-07 &#187;</a> </div>
<table class="irclog">
<tr id="t2019-11-06T01:14:06"><th class="nick" style="background: #407a40">khem</th><td class="text" style="color: #407a40">marler8997: install it directly from {WORKDIR}</td><td class="time"><a href="#t2019-11-06T01:14:06" class="time">01:14</a></td></tr>
<tr id="t2019-11-06T02:10:55"><th class="nick" style="background: #42427e">zhangzhi</th><td class="text" style="color: #42427e">Hello, if I modified do_install() but didn't touch do_compile() at all, will do_compile() also be processed?</td><td class="time"><a href="#t2019-11-06T02:10:55" class="time">02:10</a></td></tr>
<tr id="t2019-11-06T02:26:16"><th class="nick" style="background: #42427e">zhangzhi</th><td class="text" style="color: #42427e">from my local test, do_compile() won't be called. but sometimes it's called. I have no idea why</td><td class="time"><a href="#t2019-11-06T02:26:16" class="time">02:26</a></td></tr>
<tr id="t2019-11-06T02:38:00"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">d_thomas:&nbsp;&nbsp;you need to set KCONFIG_MODE to “alldefconfig”</td><td class="time"><a href="#t2019-11-06T02:38:00" class="time">02:38</a></td></tr>
<tr id="t2019-11-06T02:38:26"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">if it isn’t a *full* .config</td><td class="time"><a href="#t2019-11-06T02:38:26" class="time">02:38</a></td></tr>
<tr id="t2019-11-06T02:38:40"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">but I’d have to see the defconfig you are using to know which it actually is.</td><td class="time"><a href="#t2019-11-06T02:38:40" class="time">02:38</a></td></tr>
<tr id="t2019-11-06T04:00:45"><td class="nickchange" colspan="2">*** camus is now known as kaspter</td><td><a href="#t2019-11-06T04:00:45" class="time">04:00</a></td></tr>
<tr id="t2019-11-06T06:39:28"><th class="nick" style="background: #854685">thomasd13</th><td class="text" style="color: #854685">Good morning: Short question about starting an application during booting the machine: Whats a common strategy to provide "systemd" and "init.d" recipes (which start the application at boot), whereby the machine configuration pulls the correct one?</td><td class="time"><a href="#t2019-11-06T06:39:28" class="time">06:39</a></td></tr>
<tr id="t2019-11-06T06:40:12"><th class="nick" style="background: #854685">thomasd13</th><td class="text" style="color: #854685">Either systemd variant or init.d, depending which init-system the machine uses</td><td class="time"><a href="#t2019-11-06T06:40:12" class="time">06:40</a></td></tr>
<tr id="t2019-11-06T06:51:42"><th class="nick" style="background: #488888">kroon</th><td class="text" style="color: #488888">thomasd13, write both a systemd service and an init script, let yocto pick whatever is configured for the distro</td><td class="time"><a href="#t2019-11-06T06:51:42" class="time">06:51</a></td></tr>
<tr id="t2019-11-06T07:13:26"><th class="nick" style="background: #854685">thomasd13</th><td class="text" style="color: #854685">kroon thats what I did. I wrote systemd service and init script. I'm searching a way of HOW to let yocto (automatically) pick whatever is configured. Can you give me a hint how to accomplish this?</td><td class="time"><a href="#t2019-11-06T07:13:26" class="time">07:13</a></td></tr>
<tr id="t2019-11-06T07:14:11"><th class="nick" style="background: #854685">thomasd13</th><td class="text" style="color: #854685">For now I just append manually append the specific installation package (either init.d or systemd) to the image</td><td class="time"><a href="#t2019-11-06T07:14:11" class="time">07:14</a></td></tr>
<tr id="t2019-11-06T07:15:34"><th class="nick" style="background: #8c4a4a">letothe2nd</th><td class="text" style="color: #8c4a4a">thomasd13: i usually refer to the dropbear recipes, those serve as a good example for that</td><td class="time"><a href="#t2019-11-06T07:15:34" class="time">07:15</a></td></tr>
<tr id="t2019-11-06T07:18:57"><th class="nick" style="background: #854685">thomasd13</th><td class="text" style="color: #854685"> letothe2nd thanks for the hint</td><td class="time"><a href="#t2019-11-06T07:18:57" class="time">07:18</a></td></tr>
<tr id="t2019-11-06T07:45:53"><th class="nick" style="background: #4b904b">olani</th><td class="text" style="color: #4b904b">Saur: Testing my connection, can you see this? /Ola</td><td class="time"><a href="#t2019-11-06T07:45:53" class="time">07:45</a></td></tr>
<tr id="t2019-11-06T08:52:02"><td class="nickchange" colspan="2">*** camus is now known as kaspter</td><td><a href="#t2019-11-06T08:52:02" class="time">08:52</a></td></tr>
<tr id="t2019-11-06T08:52:35"><td class="nickchange" colspan="2">*** florian_kc is now known as florian</td><td><a href="#t2019-11-06T08:52:35" class="time">08:52</a></td></tr>
<tr id="t2019-11-06T09:17:11"><th class="nick" style="background: #4d4d93">Saur</th><td class="text" style="color: #4d4d93">olani: Yes, I can.</td><td class="time"><a href="#t2019-11-06T09:17:11" class="time">09:17</a></td></tr>
<tr id="t2019-11-06T09:25:37"><th class="nick" style="background: #97974f">alessioigor</th><td class="text" style="color: #97974f">good morning!</td><td class="time"><a href="#t2019-11-06T09:25:37" class="time">09:25</a></td></tr>
<tr id="t2019-11-06T09:25:40"><th class="nick" style="background: #97974f">alessioigor</th><td class="text" style="color: #97974f">Did someone ever use init-install-efi?</td><td class="time"><a href="#t2019-11-06T09:25:40" class="time">09:25</a></td></tr>
<tr id="t2019-11-06T09:26:14"><th class="nick" style="background: #97974f">alessioigor</th><td class="text" style="color: #97974f">It is a script to install an image on the target.</td><td class="time"><a href="#t2019-11-06T09:26:14" class="time">09:26</a></td></tr>
<tr id="t2019-11-06T09:52:48"><th class="nick" style="background: #9b519b">timblechmann</th><td class="text" style="color: #9b519b">hi! is there a good way to debug, why a specific package is rebuilt? it seems that the do_rootfs step is executed for my builds, although the package content doesn't seem to have changed</td><td class="time"><a href="#t2019-11-06T09:52:48" class="time">09:52</a></td></tr>
<tr id="t2019-11-06T09:53:55"><th class="nick" style="background: #8c4a4a">letothe2nd</th><td class="text" style="color: #8c4a4a">timblechmann: the do_rootfs stage is always carried out, IIRC.</td><td class="time"><a href="#t2019-11-06T09:53:55" class="time">09:53</a></td></tr>
<tr id="t2019-11-06T09:54:11"><th class="nick" style="background: #8c4a4a">letothe2nd</th><td class="text" style="color: #8c4a4a">RP: what was the rationale behind it?</td><td class="time"><a href="#t2019-11-06T09:54:11" class="time">09:54</a></td></tr>
<tr id="t2019-11-06T09:55:15"><th class="nick" style="background: #9b519b">timblechmann</th><td class="text" style="color: #9b519b">letothe2nd: ah, i see. i'm currently trying to work on a recipe that unifies multiple btrfs partition images as subvolumes of another btrfs partition</td><td class="time"><a href="#t2019-11-06T09:55:15" class="time">09:55</a></td></tr>
<tr id="t2019-11-06T09:55:51"><th class="nick" style="background: #8c4a4a">letothe2nd</th><td class="text" style="color: #8c4a4a">timblechmann: completely out of my area of expertise, sorry. can only give generic advice there</td><td class="time"><a href="#t2019-11-06T09:55:51" class="time">09:55</a></td></tr>
<tr id="t2019-11-06T09:56:29"><th class="nick" style="background: #539e9e">qschulz</th><td class="text" style="color: #539e9e">timblechmann: bitbake-diffsigs can be your friend :)</td><td class="time"><a href="#t2019-11-06T09:56:29" class="time">09:56</a></td></tr>
<tr id="t2019-11-06T09:56:51"><th class="nick" style="background: #8c4a4a">letothe2nd</th><td class="text" style="color: #8c4a4a">so you are basically channeling a number of images into subvolumes of some master-image?</td><td class="time"><a href="#t2019-11-06T09:56:51" class="time">09:56</a></td></tr>
<tr id="t2019-11-06T09:57:51"><th class="nick" style="background: #9b519b">timblechmann</th><td class="text" style="color: #9b519b">letothe2nd: exactly</td><td class="time"><a href="#t2019-11-06T09:57:51" class="time">09:57</a></td></tr>
<tr id="t2019-11-06T09:58:01"><th class="nick" style="background: #8c4a4a">letothe2nd</th><td class="text" style="color: #8c4a4a">timblechmann: interesting usecase :)</td><td class="time"><a href="#t2019-11-06T09:58:01" class="time">09:58</a></td></tr>
<tr id="t2019-11-06T09:58:36"><th class="nick" style="background: #9b519b">timblechmann</th><td class="text" style="color: #9b519b">nasty: have to mount the images as loopback devices in a docker container as subvolumes only work on mounted partitions ...</td><td class="time"><a href="#t2019-11-06T09:58:36" class="time">09:58</a></td></tr>
<tr id="t2019-11-06T09:58:59"><th class="nick" style="background: #539e9e">qschulz</th><td class="text" style="color: #539e9e">timblechmann: <a href="https://wiki.yoctoproject.org/wiki/images/1/18/Yocto_Summit_Lyon_Day2_2019.pdf" rel="nofollow">https://wiki.yoctoproject.org/wiki/images/1/18/Yocto_Summit_Lyon_Day2_2019.pdf</a> slides 69 and 70 if bitbake-diffsigs works for your usecase</td><td class="time"><a href="#t2019-11-06T09:58:59" class="time">09:58</a></td></tr>
<tr id="t2019-11-06T09:59:18"><th class="nick" style="background: #9b519b">timblechmann</th><td class="text" style="color: #9b519b">qschulz: will give it a try!</td><td class="time"><a href="#t2019-11-06T09:59:18" class="time">09:59</a></td></tr>
<tr id="t2019-11-06T10:00:52"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">hi, I've backported cve check fixes from master/zeus to sumo in 47 or so patches. should I submit them to the mailing list? I guess from yocto project point of view sumo is dead but users like me could still care.</td><td class="time"><a href="#t2019-11-06T10:00:52" class="time">10:00</a></td></tr>
<tr id="t2019-11-06T10:02:02"><th class="nick" style="background: #8c4a4a">letothe2nd</th><td class="text" style="color: #8c4a4a">mcfrisk: guess its mostly about the oe core part? in that case, sure, make a series and put it onto the oe-core list</td><td class="time"><a href="#t2019-11-06T10:02:02" class="time">10:02</a></td></tr>
<tr id="t2019-11-06T10:02:34"><th class="nick" style="background: #8c4a4a">letothe2nd</th><td class="text" style="color: #8c4a4a">mcfrisk: nothing is dead as long as somebody cares for it.</td><td class="time"><a href="#t2019-11-06T10:02:34" class="time">10:02</a></td></tr>
<tr id="t2019-11-06T10:08:03"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">letothe2nd: exactly. I'll post the patches then.</td><td class="time"><a href="#t2019-11-06T10:08:03" class="time">10:08</a></td></tr>
<tr id="t2019-11-06T10:08:53"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">if no-one maintains sumo branch anymore due to builder etc issues, would be nice if someone could still just pick the patches to sumo-next even without any testing.</td><td class="time"><a href="#t2019-11-06T10:08:53" class="time">10:08</a></td></tr>
<tr id="t2019-11-06T10:13:42"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">oh, my gcc 7.4 update patches are also not on sumo which still uses 7.3 then.</td><td class="time"><a href="#t2019-11-06T10:13:42" class="time">10:13</a></td></tr>
<tr id="t2019-11-06T10:17:45"><th class="nick" style="background: #8c4a4a">letothe2nd</th><td class="text" style="color: #8c4a4a">mcfrisk: just put it on the list to get started, we'll try and find somebody to take it up</td><td class="time"><a href="#t2019-11-06T10:17:45" class="time">10:17</a></td></tr>
<tr id="t2019-11-06T10:19:09"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">letothe2nd: do_rootfs doesn't always rerun</td><td class="time"><a href="#t2019-11-06T10:19:09" class="time">10:19</a></td></tr>
<tr id="t2019-11-06T10:19:17"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">should only run when something changed</td><td class="time"><a href="#t2019-11-06T10:19:17" class="time">10:19</a></td></tr>
<tr id="t2019-11-06T10:19:27"><th class="nick" style="background: #8c4a4a">letothe2nd</th><td class="text" style="color: #8c4a4a">RP: then i didn't RC, as so often! :)</td><td class="time"><a href="#t2019-11-06T10:19:27" class="time">10:19</a></td></tr>
<tr id="t2019-11-06T10:22:50"><th class="nick" style="background: #8c4a4a">letothe2nd</th><td class="text" style="color: #8c4a4a">too bad my brain doesn't have ECC</td><td class="time"><a href="#t2019-11-06T10:22:50" class="time">10:22</a></td></tr>
<tr id="t2019-11-06T10:23:09"><th class="nick" style="background: #488888">kroon</th><td class="text" style="color: #488888">do_rootfs likes to re-run when using rm_work</td><td class="time"><a href="#t2019-11-06T10:23:09" class="time">10:23</a></td></tr>
<tr id="t2019-11-06T10:24:08"><th class="nick" style="background: #488888">kroon</th><td class="text" style="color: #488888"><a href="https://bugzilla.yoctoproject.org/show_bug.cgi?id=13212" rel="nofollow">https://bugzilla.yoctoproject.org/show_bug.cgi?id=13212</a></td><td class="time"><a href="#t2019-11-06T10:24:08" class="time">10:24</a></td></tr>
<tr id="t2019-11-06T10:24:10"><th class="nick" style="background: #5959a9">yocti</th><td class="text" style="color: #5959a9">Bug 13212: normal, Medium+, 3.1, akuster, NEW , image_qa task is always triggered with rm_work class enabled</td><td class="time"><a href="#t2019-11-06T10:24:10" class="time">10:24</a></td></tr>
<tr id="t2019-11-06T10:24:15"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">letothe2nd: already there <a href="http://lists.openembedded.org/pipermail/openembedded-core/2019-January/278049.html" rel="nofollow">http://lists.openembedded.org/pipermail/openembedded-core/2019-January/278049.html</a> but due to problems with thud not applied in sumo either</td><td class="time"><a href="#t2019-11-06T10:24:15" class="time">10:24</a></td></tr>
<tr id="t2019-11-06T10:26:06"><th class="nick" style="background: #8c4a4a">letothe2nd</th><td class="text" style="color: #8c4a4a">mcfrisk: need to poke some USians later :)</td><td class="time"><a href="#t2019-11-06T10:26:06" class="time">10:26</a></td></tr>
<tr id="t2019-11-06T11:31:12"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">is it known that DISTRO_FEATURES += breaks build of glibc-locale in sumo, possibly other branches, and users should use DISTRO_FEATURES_append instead?</td><td class="time"><a href="#t2019-11-06T11:31:12" class="time">11:31</a></td></tr>
<tr id="t2019-11-06T11:48:30"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">how long do "bitbake world" builds take? less than a day on fast 40 core machine with 128 gigs of ram and ssd? how likely are they to fail?</td><td class="time"><a href="#t2019-11-06T11:48:30" class="time">11:48</a></td></tr>
<tr id="t2019-11-06T11:49:55"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">seebs: if/when you're around I have some hopefully simple questions as pseudo is confusing me</td><td class="time"><a href="#t2019-11-06T11:49:55" class="time">11:49</a></td></tr>
<tr id="t2019-11-06T11:50:39"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">kroon: if you use rm_work that is hardly surprising</td><td class="time"><a href="#t2019-11-06T11:50:39" class="time">11:50</a></td></tr>
<tr id="t2019-11-06T11:52:40"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">kroon: hmm, I guess its not clearcut</td><td class="time"><a href="#t2019-11-06T11:52:40" class="time">11:52</a></td></tr>
<tr id="t2019-11-06T12:06:53"><th class="nick" style="background: #488888">kroon</th><td class="text" style="color: #488888">RP, the person who reported the bug suggested a change that did seem to work for me, but I can't review the patch with confidence</td><td class="time"><a href="#t2019-11-06T12:06:53" class="time">12:06</a></td></tr>
<tr id="t2019-11-06T12:07:42"><th class="nick" style="background: #488888">kroon</th><td class="text" style="color: #488888">if there is an rm_work expert reading the ml I can create a patch and post it</td><td class="time"><a href="#t2019-11-06T12:07:42" class="time">12:07</a></td></tr>
<tr id="t2019-11-06T12:08:48"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">kroon: please do post it as it would be easier than untangling the patch from the bug report</td><td class="time"><a href="#t2019-11-06T12:08:48" class="time">12:08</a></td></tr>
<tr id="t2019-11-06T12:09:02"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">kroon: the expert is probably me, much as I dislike rm_work</td><td class="time"><a href="#t2019-11-06T12:09:02" class="time">12:09</a></td></tr>
<tr id="t2019-11-06T12:10:53"><th class="nick" style="background: #488888">kroon</th><td class="text" style="color: #488888">RP, :-) I like its functionality since it means I can build my images in tmpfs</td><td class="time"><a href="#t2019-11-06T12:10:53" class="time">12:10</a></td></tr>
<tr id="t2019-11-06T12:11:02"><th class="nick" style="background: #488888">kroon</th><td class="text" style="color: #488888">RP, i'll post a patch then</td><td class="time"><a href="#t2019-11-06T12:11:02" class="time">12:11</a></td></tr>
<tr id="t2019-11-06T12:13:17"><td class="action" colspan="2">* RP should rewrite that stamps function so its readable :/</td><td><a href="#t2019-11-06T12:13:17" class="time">12:13</a></td></tr>
<tr id="t2019-11-06T12:19:59"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">rm_work keeps me from killing disks and ssds and needing 4TB for each build machine..</td><td class="time"><a href="#t2019-11-06T12:19:59" class="time">12:19</a></td></tr>
<tr id="t2019-11-06T12:20:16"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">so thanks for it!</td><td class="time"><a href="#t2019-11-06T12:20:16" class="time">12:20</a></td></tr>
<tr id="t2019-11-06T12:27:29"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">fwiw, I don't build in tmpfs but I do pin all writes to memory with kernel vm tunings which spills over to disk writes only if memory runs low. The size of build tmp is way too big for tmpfs in our builds.</td><td class="time"><a href="#t2019-11-06T12:27:29" class="time">12:27</a></td></tr>
<tr id="t2019-11-06T12:36:13"><th class="nick" style="background: #488888">kroon</th><td class="text" style="color: #488888">mcfrisk, that sounds interesting</td><td class="time"><a href="#t2019-11-06T12:36:13" class="time">12:36</a></td></tr>
<tr id="t2019-11-06T12:43:39"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">mcfrisk: what are you building where tmpfs is too small even with rm_work?</td><td class="time"><a href="#t2019-11-06T12:43:39" class="time">12:43</a></td></tr>
<tr id="t2019-11-06T12:45:11"><th class="nick" style="background: #488888">kroon</th><td class="text" style="color: #488888">I know icedtea7-native sure eats a lot of disk..</td><td class="time"><a href="#t2019-11-06T12:45:11" class="time">12:45</a></td></tr>
<tr id="t2019-11-06T12:47:08"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">i 'only' have a 12g or so tmpfs and its just webkit that causes issues, especially if it ends up building in parallel to clang</td><td class="time"><a href="#t2019-11-06T12:47:08" class="time">12:47</a></td></tr>
<tr id="t2019-11-06T12:53:59"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">rburton: yes, tmpfs is too small even with rm_work. I'm building too much, too much C++ stuff. Also estimating the tmpfs size feels impossible with sstate cache and mirror.</td><td class="time"><a href="#t2019-11-06T12:53:59" class="time">12:53</a></td></tr>
<tr id="t2019-11-06T12:59:24"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">I basically just trust kernel page cache, tuned with: /proc/sys/vm/dirty_background_bytes: 0 /proc/sys/vm/dirty_background_ratio: 90 /proc/sys/vm/dirty_bytes: 0 /proc/sys/vm/dirty_expire_centisecs: 4320000 /proc/sys/vm/dirty_ratio: 60 /proc/sys/vm/dirtytime_expire_seconds: 432000 /proc/sys/vm/dirty_writeback_centisecs: 0</td><td class="time"><a href="#t2019-11-06T12:59:24" class="time">12:59</a></td></tr>
<tr id="t2019-11-06T13:00:28"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">I've added eatmydata, LD_PRELOAD=libeatmydata.so and LD_LIBRARY_PATH=/usr/lib/libeatmydata to avoid sync() and fsync() calls from various tools.</td><td class="time"><a href="#t2019-11-06T13:00:28" class="time">13:00</a></td></tr>
<tr id="t2019-11-06T13:00:48"><th class="nick" style="background: #b15db1">BloodSurfer</th><td class="text" style="color: #b15db1">Heyho guys. I've got a problem and hope to find some hints here. I want to setup a HAB chain of trust based on a i.MX6Q. So far I already migrated from zImage to fitImage including a valid and verified hash (sha256). The next step would be to sign the fitImage and convice barebox to verify the signature. In the menuconfig of barebox I found the</td><td class="time"><a href="#t2019-11-06T13:00:48" class="time">13:00</a></td></tr>
<tr id="t2019-11-06T13:00:49"><th class="nick" style="background: #b15db1">BloodSurfer</th><td class="text" style="color: #b15db1">option for barebox to verify the signature of the fitImage. Unfortunately I can't wrap my head around where to tell the barebox recipe it should look for the trusted pubkey. The only location a key location can be configured is inside the HAB portion of the barebox configuration. Is this the correct location? The root of trust I didn't touch yet</td><td class="time"><a href="#t2019-11-06T13:00:49" class="time">13:00</a></td></tr>
<tr id="t2019-11-06T13:00:49"><th class="nick" style="background: #b15db1">BloodSurfer</th><td class="text" style="color: #b15db1">since I'd need to deal with NXP's CST toolchain and I wanted to postpone this step to later.</td><td class="time"><a href="#t2019-11-06T13:00:49" class="time">13:00</a></td></tr>
<tr id="t2019-11-06T13:01:28"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">then eventually rm_work comes and cleans temp files away. after a build the images and new sstate cache are available in page cache. a new CI build on same machines cleans the old ones away without flushing to disk, unless memory runs out.</td><td class="time"><a href="#t2019-11-06T13:01:28" class="time">13:01</a></td></tr>
<tr id="t2019-11-06T13:01:29"><th class="nick" style="background: #b15db1">BloodSurfer</th><td class="text" style="color: #b15db1">The BSP is use comes from Phytec as the eval board I am using</td><td class="time"><a href="#t2019-11-06T13:01:29" class="time">13:01</a></td></tr>
<tr id="t2019-11-06T13:01:37"><th class="nick" style="background: #b15db1">BloodSurfer</th><td class="text" style="color: #b15db1">I use*</td><td class="time"><a href="#t2019-11-06T13:01:37" class="time">13:01</a></td></tr>
<tr id="t2019-11-06T13:21:07"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">mcfrisk: that approach makes sense to me FWIW</td><td class="time"><a href="#t2019-11-06T13:21:07" class="time">13:21</a></td></tr>
<tr id="t2019-11-06T13:22:45"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">seebs: <a href="http://git.yoctoproject.org/cgit.cgi/poky-contrib/commit/?h=rpurdie/t222&amp;id=644638899538baf74f8ffbc47aff76dcb513bea0" rel="nofollow">http://git.yoctoproject.org/cgit.cgi/poky-contrib/commit/?h=rpurdie/t222&amp;id=644638899538baf74f8ffbc47aff76dcb513bea0</a> is probably horrific but appears to work</td><td class="time"><a href="#t2019-11-06T13:22:45" class="time">13:22</a></td></tr>
<tr id="t2019-11-06T13:26:32"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">seebs: updated to fix the rdev major/minor writeback</td><td class="time"><a href="#t2019-11-06T13:26:32" class="time">13:26</a></td></tr>
<tr id="t2019-11-06T13:33:21"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">zeddii, thanks I have the defconfig working.&nbsp;&nbsp;Turns out the problem is the bbappend file I'm using to add a configuration fragment on top of the defconfig.&nbsp;&nbsp;I must be picking up something from kernel-yocto I don't want or, like you said, not setting something right</td><td class="time"><a href="#t2019-11-06T13:33:21" class="time">13:33</a></td></tr>
<tr id="t2019-11-06T13:36:21"><td class="nickchange" colspan="2">*** georgem_ is now known as georgem</td><td><a href="#t2019-11-06T13:36:21" class="time">13:36</a></td></tr>
<tr id="t2019-11-06T13:37:23"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">d_thomas. unless you are using one of the reference BSPs or kernel types, you won't get anything automatically added by kernel-yocto, it has no heuristics in that area, it can only do what you ask.</td><td class="time"><a href="#t2019-11-06T13:37:23" class="time">13:37</a></td></tr>
<tr id="t2019-11-06T13:38:10"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">the only thing that it does assume, is that if a file called "defconfig" is present, that it is a full config, so it starts the merge_config process with an "allnoconfig". so if your defconfig is expecting other defaults to save the day, that won't happen.</td><td class="time"><a href="#t2019-11-06T13:38:10" class="time">13:38</a></td></tr>
<tr id="t2019-11-06T13:38:32"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">hence why people say "my defconfig was ignored" .. it wasn't, but it was applied on top of a different base than you might have thought.</td><td class="time"><a href="#t2019-11-06T13:38:32" class="time">13:38</a></td></tr>
<tr id="t2019-11-06T13:40:30"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">I'm using a kernel from meta-atmel&nbsp;&nbsp;(<a href="https://pastebin.com/RLD266m6" rel="nofollow">https://pastebin.com/RLD266m6</a>) with a full config.&nbsp;&nbsp;That stand alone is working correctly.&nbsp;&nbsp;But then I created this bbappend file (<a href="https://pastebin.com/HHFWxkt8" rel="nofollow">https://pastebin.com/HHFWxkt8</a>) so I could also use configuration fragments</td><td class="time"><a href="#t2019-11-06T13:40:30" class="time">13:40</a></td></tr>
<tr id="t2019-11-06T13:41:39"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">allnoconfig is what I expect, I see what you are saying there</td><td class="time"><a href="#t2019-11-06T13:41:39" class="time">13:41</a></td></tr>
<tr id="t2019-11-06T13:42:49"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">is everything public ? I'd be interested to run a configure myself, since it should be easy to add what you want. I can poke at the layer to see if something is being clobbered.</td><td class="time"><a href="#t2019-11-06T13:42:49" class="time">13:42</a></td></tr>
<tr id="t2019-11-06T13:43:20"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">It's not, but I can break the kernel out and make it public.</td><td class="time"><a href="#t2019-11-06T13:43:20" class="time">13:43</a></td></tr>
<tr id="t2019-11-06T13:44:12"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">I don't see any extra includes in that recipe you pasted, so it should be the default kernel.bbclass configure that fires.</td><td class="time"><a href="#t2019-11-06T13:44:12" class="time">13:44</a></td></tr>
<tr id="t2019-11-06T13:44:18"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">which means I should be able to figure it out from here.</td><td class="time"><a href="#t2019-11-06T13:44:18" class="time">13:44</a></td></tr>
<tr id="t2019-11-06T13:44:33"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">can you repeat the symptom you are seeing ? I think I missed that part :D</td><td class="time"><a href="#t2019-11-06T13:44:33" class="time">13:44</a></td></tr>
<tr id="t2019-11-06T13:44:44"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">your fragment's settings aren't showing up in the final .config ?</td><td class="time"><a href="#t2019-11-06T13:44:44" class="time">13:44</a></td></tr>
<tr id="t2019-11-06T13:47:34"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">If I delete the bbappend file and build, the defconfig is used.&nbsp;&nbsp;If I restore the bbappend file, it appears the settings from the fragment are the only ones that are used in the final config.</td><td class="time"><a href="#t2019-11-06T13:47:34" class="time">13:47</a></td></tr>
<tr id="t2019-11-06T13:48:43"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">what release of yocto are you using ?</td><td class="time"><a href="#t2019-11-06T13:48:43" class="time">13:48</a></td></tr>
<tr id="t2019-11-06T13:48:46"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">My test is comparing to a standalone kernel build.&nbsp;&nbsp;No bbappend file, the Yocto result matches the stand alone build since they use the same defconfig.&nbsp;&nbsp;Add the bbappend and the Yocto result is wildly different.</td><td class="time"><a href="#t2019-11-06T13:48:46" class="time">13:48</a></td></tr>
<tr id="t2019-11-06T13:48:47"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">Sumo</td><td class="time"><a href="#t2019-11-06T13:48:47" class="time">13:48</a></td></tr>
<tr id="t2019-11-06T13:49:04"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">Old I know, but that's what the meta-atmel instructions started me on</td><td class="time"><a href="#t2019-11-06T13:49:04" class="time">13:49</a></td></tr>
<tr id="t2019-11-06T13:49:21"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">let me check that a bit, that behaviour really shouldn't be possible. I need to see if there's an issue in the bbclass of that release.</td><td class="time"><a href="#t2019-11-06T13:49:21" class="time">13:49</a></td></tr>
<tr id="t2019-11-06T13:49:38"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">Thank you!</td><td class="time"><a href="#t2019-11-06T13:49:38" class="time">13:49</a></td></tr>
<tr id="t2019-11-06T13:49:48"><td class="nickchange" colspan="2">*** camus is now known as kaspter</td><td><a href="#t2019-11-06T13:49:48" class="time">13:49</a></td></tr>
<tr id="t2019-11-06T13:58:55"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">zeddii, full source is here <a href="https://github.com/dthomas-sensonix/meta-experimental" rel="nofollow">https://github.com/dthomas-sensonix/meta-experimental</a></td><td class="time"><a href="#t2019-11-06T13:58:55" class="time">13:58</a></td></tr>
<tr id="t2019-11-06T14:00:06"><td class="nickchange" colspan="2">*** camus is now known as kaspter</td><td><a href="#t2019-11-06T14:00:06" class="time">14:00</a></td></tr>
<tr id="t2019-11-06T14:02:36"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">d_thomas, cool. I'll clone that and fire up a build if my code inspection fails to find the cause.</td><td class="time"><a href="#t2019-11-06T14:02:36" class="time">14:02</a></td></tr>
<tr id="t2019-11-06T14:03:24"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">zeddii, thank you!</td><td class="time"><a href="#t2019-11-06T14:03:24" class="time">14:03</a></td></tr>
<tr id="t2019-11-06T14:03:45"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">Adding the configuration fragments to this recipe is new, so it's very possible I'm doing something wrong.</td><td class="time"><a href="#t2019-11-06T14:03:45" class="time">14:03</a></td></tr>
<tr id="t2019-11-06T14:08:42"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">d_thomas: when you dump the environment (i.e. bitbake -e), you can see that the defconfig is before the fragment on the SRC_URI, correct ?</td><td class="time"><a href="#t2019-11-06T14:08:42" class="time">14:08</a></td></tr>
<tr id="t2019-11-06T14:10:30"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">I see SRC_URI=""</td><td class="time"><a href="#t2019-11-06T14:10:30" class="time">14:10</a></td></tr>
<tr id="t2019-11-06T14:10:54"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">kroon: that patch looks right, I think I just want to rewrite that function to be a bit more understandable :/</td><td class="time"><a href="#t2019-11-06T14:10:54" class="time">14:10</a></td></tr>
<tr id="t2019-11-06T14:11:16"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">kroon: the " Ensure we don't 'stack' setscene extensions to thi" is what I really don't like</td><td class="time"><a href="#t2019-11-06T14:11:16" class="time">14:11</a></td></tr>
<tr id="t2019-11-06T14:12:01"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">d_thomas: and 2nd, can you dig out the merge_config_build.log ? its in your kernel's ${S}/.kernel-meta/cfg/merge_config*.log</td><td class="time"><a href="#t2019-11-06T14:12:01" class="time">14:12</a></td></tr>
<tr id="t2019-11-06T14:12:34"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">d_thomas: it may have started as SRC_URI="", but there should be other updates to it, so you'll see the finalized value with the repo/tarball + defconfig + your fragment.</td><td class="time"><a href="#t2019-11-06T14:12:34" class="time">14:12</a></td></tr>
<tr id="t2019-11-06T14:13:40"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">I'll look... what is ${S} likely to be?&nbsp;&nbsp;In the /tmp/work directory?</td><td class="time"><a href="#t2019-11-06T14:13:40" class="time">14:13</a></td></tr>
<tr id="t2019-11-06T14:14:48"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">tmp/work-shared/&lt;your machine&gt;/kernel-source/.kernel-meta/</td><td class="time"><a href="#t2019-11-06T14:14:48" class="time">14:14</a></td></tr>
<tr id="t2019-11-06T14:16:13"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">weird, SRC_URI isn't in that file</td><td class="time"><a href="#t2019-11-06T14:16:13" class="time">14:16</a></td></tr>
<tr id="t2019-11-06T14:16:28"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">ah. that was for the merge_config output,</td><td class="time"><a href="#t2019-11-06T14:16:28" class="time">14:16</a></td></tr>
<tr id="t2019-11-06T14:16:45"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">to get the full SRC_URI, you'd just "bitbake -e virtual/kernel" &gt; foo.txt</td><td class="time"><a href="#t2019-11-06T14:16:45" class="time">14:16</a></td></tr>
<tr id="t2019-11-06T14:16:49"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">and look in foo.txt</td><td class="time"><a href="#t2019-11-06T14:16:49" class="time">14:16</a></td></tr>
<tr id="t2019-11-06T14:17:58"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">SRC_URI="git://github.com/linux4sam/linux-at91.git;protocol=git;branch=linux-4.19-at91 file://defconfig file://custom.cfg"</td><td class="time"><a href="#t2019-11-06T14:17:58" class="time">14:17</a></td></tr>
<tr id="t2019-11-06T14:18:37"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">yup. that looks sane. the merge_config log file will indicate if both were processed when creating the .config or not. or if there was some other error.</td><td class="time"><a href="#t2019-11-06T14:18:37" class="time">14:18</a></td></tr>
<tr id="t2019-11-06T14:21:02"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">Yeah, that log shows defconfig as the base and the custom.cfg merging in</td><td class="time"><a href="#t2019-11-06T14:21:02" class="time">14:21</a></td></tr>
<tr id="t2019-11-06T14:21:47"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">ok. so it is all being used properly. So unless something else is coming along and clobbering the .config, there's nothing obviously wrong from the logs.</td><td class="time"><a href="#t2019-11-06T14:21:47" class="time">14:21</a></td></tr>
<tr id="t2019-11-06T14:22:10"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">and did you try explictly setting the KCONFIG_MODE in your bbappend ?</td><td class="time"><a href="#t2019-11-06T14:22:10" class="time">14:22</a></td></tr>
<tr id="t2019-11-06T14:22:21"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">i.e. KCONFIG_MODE = "alldefconfig" ?</td><td class="time"><a href="#t2019-11-06T14:22:21" class="time">14:22</a></td></tr>
<tr id="t2019-11-06T14:22:44"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">Oops, not yet.&nbsp;&nbsp;I'll try that now</td><td class="time"><a href="#t2019-11-06T14:22:44" class="time">14:22</a></td></tr>
<tr id="t2019-11-06T14:28:26"><th class="nick" style="background: #488888">kroon</th><td class="text" style="color: #488888">RP, you mean cleaning up by using case fallthrough or something ?</td><td class="time"><a href="#t2019-11-06T14:28:26" class="time">14:28</a></td></tr>
<tr id="t2019-11-06T14:29:01"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">That was it!&nbsp;&nbsp;I"m sorry, when I read about that change this morning I thought you meant to add that to the bb file.&nbsp;&nbsp;Before doing it, I tried another experiment and got distracted.</td><td class="time"><a href="#t2019-11-06T14:29:01" class="time">14:29</a></td></tr>
<tr id="t2019-11-06T14:29:18"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">So what does "alldefconfig" do in the context of the bbappend file?</td><td class="time"><a href="#t2019-11-06T14:29:18" class="time">14:29</a></td></tr>
<tr id="t2019-11-06T14:30:50"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">nothing</td><td class="time"><a href="#t2019-11-06T14:30:50" class="time">14:30</a></td></tr>
<tr id="t2019-11-06T14:31:17"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">well, it sets a variable that is used by the kernel-yocto bbclass to feed into merge_config</td><td class="time"><a href="#t2019-11-06T14:31:17" class="time">14:31</a></td></tr>
<tr id="t2019-11-06T14:31:44"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">since it is a recipe space variable, and you have a bappend, that's where you set it (there are local.conf tricks you can play, but that's a bad idea).</td><td class="time"><a href="#t2019-11-06T14:31:44" class="time">14:31</a></td></tr>
<tr id="t2019-11-06T14:31:54"><th class="nick" style="background: #488888">kroon</th><td class="text" style="color: #488888">RP, all explicitly listed cases set i=dummy, I suppose that can be factored out</td><td class="time"><a href="#t2019-11-06T14:31:54" class="time">14:31</a></td></tr>
<tr id="t2019-11-06T14:32:42"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">Okay.... and the kernel.bbclass uses oldnoconfig when processing defconfig, right?</td><td class="time"><a href="#t2019-11-06T14:32:42" class="time">14:32</a></td></tr>
<tr id="t2019-11-06T14:33:33"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">it uses it for any config, yes, but since it only really doesn't defconfigs, yes :D</td><td class="time"><a href="#t2019-11-06T14:33:33" class="time">14:33</a></td></tr>
<tr id="t2019-11-06T14:34:08"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">and oldnoconfig, is just the old name for the what you are getting with merge_config.</td><td class="time"><a href="#t2019-11-06T14:34:08" class="time">14:34</a></td></tr>
<tr id="t2019-11-06T14:34:27"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">it has changed in the newer kernel.bbclass (IIRC), but the behaviour is the same.</td><td class="time"><a href="#t2019-11-06T14:34:27" class="time">14:34</a></td></tr>
<tr id="t2019-11-06T14:35:03"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">Okay.... so I think the ultimate answer is that my addition of configuration fragments to this particular kernel was missing an additional setting to make it work</td><td class="time"><a href="#t2019-11-06T14:35:03" class="time">14:35</a></td></tr>
<tr id="t2019-11-06T14:36:30"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">Thanks for your help zeddii</td><td class="time"><a href="#t2019-11-06T14:36:30" class="time">14:36</a></td></tr>
<tr id="t2019-11-06T14:36:34"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">correct. and I've gone back and forth on the default value for the processing. since switching it to defconfig would break other workflows that want a minimial config.</td><td class="time"><a href="#t2019-11-06T14:36:34" class="time">14:36</a></td></tr>
<tr id="t2019-11-06T14:37:11"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">and putting out a warning is hard as well .. but I bet there was one I could have cherry picked from the logs. I'll ponder that and see if I can get a hint out to the console when what you were seeing happens.</td><td class="time"><a href="#t2019-11-06T14:37:11" class="time">14:37</a></td></tr>
<tr id="t2019-11-06T14:37:46"><th class="nick" style="background: #5fb4b4">d_thomas</th><td class="text" style="color: #5fb4b4">that would be great</td><td class="time"><a href="#t2019-11-06T14:37:46" class="time">14:37</a></td></tr>
<tr id="t2019-11-06T14:38:37"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">yah. I'll raise myself a bugzilla to look into it. (before I forget).</td><td class="time"><a href="#t2019-11-06T14:38:37" class="time">14:38</a></td></tr>
<tr id="t2019-11-06T14:38:48"><th class="nick" style="background: #5959a9">yocti</th><td class="text" style="color: #5959a9">New news from stackoverflow: Jetson Nano And Yocto/poky Zeus &lt;<a href="https://stackoverflow.com/questions/58732068/jetson-nano-and-yocto-poky-zeus&gt;" rel="nofollow">https://stackoverflow.com/questions/58732068/jetson-nano-and-yocto-poky-zeus&gt;</a></td><td class="time"><a href="#t2019-11-06T14:38:48" class="time">14:38</a></td></tr>
<tr id="t2019-11-06T14:39:06"><th class="nick" style="background: #b86161">cengiz_io</th><td class="text" style="color: #b86161">hello there!</td><td class="time"><a href="#t2019-11-06T14:39:06" class="time">14:39</a></td></tr>
<tr id="t2019-11-06T14:41:03"><th class="nick" style="background: #b86161">cengiz_io</th><td class="text" style="color: #b86161">I have some binary-only .a archives and headers that I need to package for another recipe. I originally did create a recipe like myapp-deps and overridden do_install inside it to populate sysroot. however this obviously does not propagate to populate_sdk. what's the correct way of creating your own library recipes?</td><td class="time"><a href="#t2019-11-06T14:41:03" class="time">14:41</a></td></tr>
<tr id="t2019-11-06T14:42:10"><th class="nick" style="background: #b86161">cengiz_io</th><td class="text" style="color: #b86161">read some recipes like jpeg2000 and others from openembbedded layer index but they don't seem to have do_populate_sdk in them.</td><td class="time"><a href="#t2019-11-06T14:42:10" class="time">14:42</a></td></tr>
<tr id="t2019-11-06T14:43:02"><th class="nick" style="background: #b86161">cengiz_io</th><td class="text" style="color: #b86161">what should I use to install my .a archives and .h headers to sdk, use them during building other recipes BUT NOT include them in target image?</td><td class="time"><a href="#t2019-11-06T14:43:02" class="time">14:43</a></td></tr>
<tr id="t2019-11-06T14:49:41"><th class="nick" style="background: #62bb62">dl9pf</th><td class="text" style="color: #62bb62">mcfrisk: do you just call eatmydata bitbake or how do you invoce it</td><td class="time"><a href="#t2019-11-06T14:49:41" class="time">14:49</a></td></tr>
<tr id="t2019-11-06T14:58:29"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">kroon: the whole thing is just hard to read/understand :/</td><td class="time"><a href="#t2019-11-06T14:58:29" class="time">14:58</a></td></tr>
<tr id="t2019-11-06T14:59:31"><td class="action" colspan="2">* kroon nods</td><td><a href="#t2019-11-06T14:59:31" class="time">14:59</a></td></tr>
<tr id="t2019-11-06T15:25:06"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">dl9pf: I have BB_HASHBASE_WHITELIST_append = " LD_PRELOAD" and BB_HASHCONFIG_WHITELIST_append = " LD_PRELOAD" in local.conf, then LD_LIBRARY_PATH=/usr/lib/libeatmydata and LD_PRELOAD=libeatmydata.so set in script when calling bitbake. The result is that bitbake shell tasks at least have LD_LIBRARY_PATH=/usr/lib/libeatmydata:... and LD_PRELOAD='libeatmydata.so libpseudo.so' set. Some of the bitbake python</td><td class="time"><a href="#t2019-11-06T15:25:06" class="time">15:25</a></td></tr>
<tr id="t2019-11-06T15:25:12"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">tasks don't have it set, so some sync()/fsync() calls still happen during build, but IO is reduced. Effect can be seen with pcp.io tooling for example.</td><td class="time"><a href="#t2019-11-06T15:25:12" class="time">15:25</a></td></tr>
<tr id="t2019-11-06T15:30:24"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">mcfrisk: I thought pseudo was intercepting those?</td><td class="time"><a href="#t2019-11-06T15:30:24" class="time">15:30</a></td></tr>
<tr id="t2019-11-06T15:41:19"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">mcfrisk: "CFH" means?</td><td class="time"><a href="#t2019-11-06T15:41:19" class="time">15:41</a></td></tr>
<tr id="t2019-11-06T15:41:57"><td class="action" colspan="2">* RP ponders how we'd manage to build sumo now :/</td><td><a href="#t2019-11-06T15:41:57" class="time">15:41</a></td></tr>
<tr id="t2019-11-06T15:48:11"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">RP: call for help</td><td class="time"><a href="#t2019-11-06T15:48:11" class="time">15:48</a></td></tr>
<tr id="t2019-11-06T15:55:42"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">mcfrisk: as in you'd like to get those merged to sumo?</td><td class="time"><a href="#t2019-11-06T15:55:42" class="time">15:55</a></td></tr>
<tr id="t2019-11-06T15:57:01"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">RP: yep</td><td class="time"><a href="#t2019-11-06T15:57:01" class="time">15:57</a></td></tr>
<tr id="t2019-11-06T15:57:20"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">or to sumo-next or sumo-contrib if you prefer</td><td class="time"><a href="#t2019-11-06T15:57:20" class="time">15:57</a></td></tr>
<tr id="t2019-11-06T15:57:23"><th class="nick" style="background: #8c4a4a">letothe2nd</th><td class="text" style="color: #8c4a4a">mcfrisk: i actually intended to poke armpit about it once he's around</td><td class="time"><a href="#t2019-11-06T15:57:23" class="time">15:57</a></td></tr>
<tr id="t2019-11-06T15:57:47"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">mcfrisk: the hard part is testing, not merging :/</td><td class="time"><a href="#t2019-11-06T15:57:47" class="time">15:57</a></td></tr>
<tr id="t2019-11-06T15:57:52"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">I know</td><td class="time"><a href="#t2019-11-06T15:57:52" class="time">15:57</a></td></tr>
<tr id="t2019-11-06T15:58:09"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">FWIW I just hacked the autobuilder, see if I can persuade it to build sumo on a reduced set of workers</td><td class="time"><a href="#t2019-11-06T15:58:09" class="time">15:58</a></td></tr>
<tr id="t2019-11-06T15:59:05"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">I build on Debian stale, Debian GNU/Linux 9 (stretch), containers</td><td class="time"><a href="#t2019-11-06T15:59:05" class="time">15:59</a></td></tr>
<tr id="t2019-11-06T15:59:30"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">(better than Ubuntu which has copyright issues distributing container images)</td><td class="time"><a href="#t2019-11-06T15:59:30" class="time">15:59</a></td></tr>
<tr id="t2019-11-06T16:00:16"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">mcfrisk: sure, but that doesn't help me with the autobuilder...</td><td class="time"><a href="#t2019-11-06T16:00:16" class="time">16:00</a></td></tr>
<tr id="t2019-11-06T16:00:34"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">letothe2nd: armpit is onvacation</td><td class="time"><a href="#t2019-11-06T16:00:34" class="time">16:00</a></td></tr>
<tr id="t2019-11-06T16:02:25"><th class="nick" style="background: #8c4a4a">letothe2nd</th><td class="text" style="color: #8c4a4a">RP: ah!</td><td class="time"><a href="#t2019-11-06T16:02:25" class="time">16:02</a></td></tr>
<tr id="t2019-11-06T16:03:48"><td class="action" colspan="2">* letothe2nd decides that this is not IRC approved.</td><td><a href="#t2019-11-06T16:03:48" class="time">16:03</a></td></tr>
<tr id="t2019-11-06T16:06:17"><th class="nick" style="background: #6464bf">milloni</th><td class="text" style="color: #6464bf">is there something like `bitbake -e` bit without expanding variables in tasks?</td><td class="time"><a href="#t2019-11-06T16:06:17" class="time">16:06</a></td></tr>
<tr id="t2019-11-06T16:07:08"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">milloni: shell or python?</td><td class="time"><a href="#t2019-11-06T16:07:08" class="time">16:07</a></td></tr>
<tr id="t2019-11-06T16:08:43"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">milloni: adding unexpand is a two line patch to <a href="https://github.com/rossburton/bb/blob/master/libexec/bb-var" rel="nofollow">https://github.com/rossburton/bb/blob/master/libexec/bb-var</a></td><td class="time"><a href="#t2019-11-06T16:08:43" class="time">16:08</a></td></tr>
<tr id="t2019-11-06T16:09:15"><th class="nick" style="background: #6464bf">milloni</th><td class="text" style="color: #6464bf">RP: both</td><td class="time"><a href="#t2019-11-06T16:09:15" class="time">16:09</a></td></tr>
<tr id="t2019-11-06T16:10:16"><th class="nick" style="background: #6464bf">milloni</th><td class="text" style="color: #6464bf">rburton: i'll take a look, thanks</td><td class="time"><a href="#t2019-11-06T16:10:16" class="time">16:10</a></td></tr>
<tr id="t2019-11-06T16:11:23"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">milloni: d.getVar(name, expand=False) if python</td><td class="time"><a href="#t2019-11-06T16:11:23" class="time">16:11</a></td></tr>
<tr id="t2019-11-06T16:11:50"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">milloni: just pushed --unexpand to that tool</td><td class="time"><a href="#t2019-11-06T16:11:50" class="time">16:11</a></td></tr>
<tr id="t2019-11-06T16:12:00"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">$ bb var WORKDIR m4 -u</td><td class="time"><a href="#t2019-11-06T16:12:00" class="time">16:12</a></td></tr>
<tr id="t2019-11-06T16:12:00"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">${BASE_WORKDIR}/${MULTIMACH_TARGET_SYS}/${PN}/${EXTENDPE}${PV}-${PR}</td><td class="time"><a href="#t2019-11-06T16:12:00" class="time">16:12</a></td></tr>
<tr id="t2019-11-06T16:12:26"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">the syntax is now ugly as sin, but i can fix that another time</td><td class="time"><a href="#t2019-11-06T16:12:26" class="time">16:12</a></td></tr>
<tr id="t2019-11-06T16:22:19"><th class="nick" style="background: #b86161">cengiz_io</th><td class="text" style="color: #b86161">while creating a recipe, what should I use to install my .a archives and .h headers to sdk, use them during building other recipes BUT NOT include them in target image?</td><td class="time"><a href="#t2019-11-06T16:22:19" class="time">16:22</a></td></tr>
<tr id="t2019-11-06T16:23:05"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">cengiz_io: install to -dev binary package. see examples in poky tree.</td><td class="time"><a href="#t2019-11-06T16:23:05" class="time">16:23</a></td></tr>
<tr id="t2019-11-06T16:23:27"><th class="nick" style="background: #b86161">cengiz_io</th><td class="text" style="color: #b86161">mcfrisk: will do. thanks.</td><td class="time"><a href="#t2019-11-06T16:23:27" class="time">16:23</a></td></tr>
<tr id="t2019-11-06T16:24:30"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">cengiz_io: for many build systems bitbake and build bbclasses do this automatically if headers and static libs are installed from do_install()</td><td class="time"><a href="#t2019-11-06T16:24:30" class="time">16:24</a></td></tr>
<tr id="t2019-11-06T16:25:24"><th class="nick" style="background: #b86161">cengiz_io</th><td class="text" style="color: #b86161">mcfrisk well my problem is: I have a cmake app which is pulled from git but it has some binary only huge .a files and headers</td><td class="time"><a href="#t2019-11-06T16:25:24" class="time">16:25</a></td></tr>
<tr id="t2019-11-06T16:25:57"><th class="nick" style="background: #b86161">cengiz_io</th><td class="text" style="color: #b86161">which are also architecture dependent. (we need to compile for x86_64 and armv7)</td><td class="time"><a href="#t2019-11-06T16:25:57" class="time">16:25</a></td></tr>
<tr id="t2019-11-06T16:26:41"><th class="nick" style="background: #b86161">cengiz_io</th><td class="text" style="color: #b86161">it's a huge mess. so I have created another recipe called myapp-deps and it overrides do_install and copies everything to sysroot.</td><td class="time"><a href="#t2019-11-06T16:26:41" class="time">16:26</a></td></tr>
<tr id="t2019-11-06T16:26:43"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">cengiz_io: just package them like the system defaults to.&nbsp;&nbsp;.a files go into -staticdev packages, which are not in images or sdks by default</td><td class="time"><a href="#t2019-11-06T16:26:43" class="time">16:26</a></td></tr>
<tr id="t2019-11-06T16:27:50"><th class="nick" style="background: #b86161">cengiz_io</th><td class="text" style="color: #b86161">rburton are those -staticdev packages derived from regular recipes? couldn't find anything about them in reference manual..</td><td class="time"><a href="#t2019-11-06T16:27:50" class="time">16:27</a></td></tr>
<tr id="t2019-11-06T16:28:25"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">cengiz_io: <a href="https://www.yoctoproject.org/docs/current/mega-manual/mega-manual.html#including-static-library-files" rel="nofollow">https://www.yoctoproject.org/docs/current/mega-manual/mega-manual.html#including-static-library-files</a></td><td class="time"><a href="#t2019-11-06T16:28:25" class="time">16:28</a></td></tr>
<tr id="t2019-11-06T16:29:44"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">that keeps them out of images. to get that specific recipe in the sdk add it to TOOLCHAIN_TARGET_TASK</td><td class="time"><a href="#t2019-11-06T16:29:44" class="time">16:29</a></td></tr>
<tr id="t2019-11-06T16:30:04"><th class="nick" style="background: #b86161">cengiz_io</th><td class="text" style="color: #b86161">excuse my ignorance but that example doesn't have any SRC_URI or something. does it?</td><td class="time"><a href="#t2019-11-06T16:30:04" class="time">16:30</a></td></tr>
<tr id="t2019-11-06T16:31:00"><th class="nick" style="background: #b86161">cengiz_io</th><td class="text" style="color: #b86161">rburton because I don't build those libraries. they are simply binary files shared with me.. can't reproduce them.</td><td class="time"><a href="#t2019-11-06T16:31:00" class="time">16:31</a></td></tr>
<tr id="t2019-11-06T16:31:25"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">cengiz_io: thats not an example, its a fragment of bitbake.conf</td><td class="time"><a href="#t2019-11-06T16:31:25" class="time">16:31</a></td></tr>
<tr id="t2019-11-06T16:31:35"><th class="nick" style="background: #b86161">cengiz_io</th><td class="text" style="color: #b86161">oh ok. I guessed so</td><td class="time"><a href="#t2019-11-06T16:31:35" class="time">16:31</a></td></tr>
<tr id="t2019-11-06T16:31:43"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">write a recipe to grab the files and install them to $D correctly</td><td class="time"><a href="#t2019-11-06T16:31:43" class="time">16:31</a></td></tr>
<tr id="t2019-11-06T16:31:49"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">them the default packaging rules will do the right thing</td><td class="time"><a href="#t2019-11-06T16:31:49" class="time">16:31</a></td></tr>
<tr id="t2019-11-06T16:32:01"><th class="nick" style="background: #b86161">cengiz_io</th><td class="text" style="color: #b86161">so if I copy to a specific directory, bitbake will move them to PN-staticdev etc</td><td class="time"><a href="#t2019-11-06T16:32:01" class="time">16:32</a></td></tr>
<tr id="t2019-11-06T16:32:39"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">no</td><td class="time"><a href="#t2019-11-06T16:32:39" class="time">16:32</a></td></tr>
<tr id="t2019-11-06T16:32:46"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">$libdir/*.a goes to static lib</td><td class="time"><a href="#t2019-11-06T16:32:46" class="time">16:32</a></td></tr>
<tr id="t2019-11-06T16:33:06"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">$libdir/lib*.so -&gt; -dev</td><td class="time"><a href="#t2019-11-06T16:33:06" class="time">16:33</a></td></tr>
<tr id="t2019-11-06T16:33:18"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">$libdir/lib*.so.* -&gt; PN</td><td class="time"><a href="#t2019-11-06T16:33:18" class="time">16:33</a></td></tr>
<tr id="t2019-11-06T16:33:28"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">because that's how libraries are laid out on linux</td><td class="time"><a href="#t2019-11-06T16:33:28" class="time">16:33</a></td></tr>
<tr id="t2019-11-06T16:34:50"><th class="nick" style="background: #b86161">cengiz_io</th><td class="text" style="color: #b86161">I got it now. what about headers? I think I can read that conf fragment to find out</td><td class="time"><a href="#t2019-11-06T16:34:50" class="time">16:34</a></td></tr>
<tr id="t2019-11-06T16:35:24"><td class="nickchange" colspan="2">*** camus is now known as kaspter</td><td><a href="#t2019-11-06T16:35:24" class="time">16:35</a></td></tr>
<tr id="t2019-11-06T16:38:28"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">cengiz_io: install them to $includedir</td><td class="time"><a href="#t2019-11-06T16:38:28" class="time">16:38</a></td></tr>
<tr id="t2019-11-06T16:39:07"><th class="nick" style="background: #b86161">cengiz_io</th><td class="text" style="color: #b86161">rburton yes but there are hundreds of them and they are in levels of subdirs.. does it make a difference?</td><td class="time"><a href="#t2019-11-06T16:39:07" class="time">16:39</a></td></tr>
<tr id="t2019-11-06T16:39:16"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">no</td><td class="time"><a href="#t2019-11-06T16:39:16" class="time">16:39</a></td></tr>
<tr id="t2019-11-06T16:39:26"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">the default rule is "all of $includedir"</td><td class="time"><a href="#t2019-11-06T16:39:26" class="time">16:39</a></td></tr>
<tr id="t2019-11-06T16:39:42"><th class="nick" style="background: #b86161">cengiz_io</th><td class="text" style="color: #b86161">then include myapp-dev in TARGET_HOST_TASK_append right?</td><td class="time"><a href="#t2019-11-06T16:39:42" class="time">16:39</a></td></tr>
<tr id="t2019-11-06T16:39:48"><th class="nick" style="background: #b86161">cengiz_io</th><td class="text" style="color: #b86161">for sdk</td><td class="time"><a href="#t2019-11-06T16:39:48" class="time">16:39</a></td></tr>
<tr id="t2019-11-06T16:40:00"><th class="nick" style="background: #b86161">cengiz_io</th><td class="text" style="color: #b86161">sorry</td><td class="time"><a href="#t2019-11-06T16:40:00" class="time">16:40</a></td></tr>
<tr id="t2019-11-06T16:40:04"><th class="nick" style="background: #b86161">cengiz_io</th><td class="text" style="color: #b86161">TOOLCHAIN_TARGET_TASK</td><td class="time"><a href="#t2019-11-06T16:40:04" class="time">16:40</a></td></tr>
<tr id="t2019-11-06T16:40:07"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">if myapp is already in the image then -dev will be added automatically</td><td class="time"><a href="#t2019-11-06T16:40:07" class="time">16:40</a></td></tr>
<tr id="t2019-11-06T16:40:14"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">otherwise, yes</td><td class="time"><a href="#t2019-11-06T16:40:14" class="time">16:40</a></td></tr>
<tr id="t2019-11-06T16:40:34"><th class="nick" style="background: #b86161">cengiz_io</th><td class="text" style="color: #b86161">it doesn't make sense to ship headers in final rootfs image so</td><td class="time"><a href="#t2019-11-06T16:40:34" class="time">16:40</a></td></tr>
<tr id="t2019-11-06T16:41:04"><th class="nick" style="background: #818144">zeddii</th><td class="text" style="color: #818144">4 kernel config and module questions in the last 24 hours, something in the water ?</td><td class="time"><a href="#t2019-11-06T16:41:04" class="time">16:41</a></td></tr>
<tr id="t2019-11-06T17:14:51"><td class="nickchange" colspan="2">*** camus is now known as kaspter</td><td><a href="#t2019-11-06T17:14:51" class="time">17:14</a></td></tr>
<tr id="t2019-11-06T17:19:29"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">mcfrisk: good news is that after much banging of heads against the wall I've figured out the magic to restrict a build to a subset of workers...</td><td class="time"><a href="#t2019-11-06T17:19:29" class="time">17:19</a></td></tr>
<tr id="t2019-11-06T17:20:17"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">Not sure it can build a full build without more tweaking due to selftest though...</td><td class="time"><a href="#t2019-11-06T17:20:17" class="time">17:20</a></td></tr>
<tr id="t2019-11-06T17:27:58"><th class="nick" style="background: #c3c366">ruru4143</th><td class="text" style="color: #c3c366">where are image_features defined and can i add costum image features?</td><td class="time"><a href="#t2019-11-06T17:27:58" class="time">17:27</a></td></tr>
<tr id="t2019-11-06T17:49:53"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">RP: :)</td><td class="time"><a href="#t2019-11-06T17:49:53" class="time">17:49</a></td></tr>
<tr id="t2019-11-06T17:51:17"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">ruru4143: check output of "bitbake -e myimage", find location of ^IMAGE_FEATURES and check which recipes, classes, distro configuration etc contribute</td><td class="time"><a href="#t2019-11-06T17:51:17" class="time">17:51</a></td></tr>
<tr id="t2019-11-06T17:53:57"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">mcfrisk: I've replied on the list. I worry where this path leads :(</td><td class="time"><a href="#t2019-11-06T17:53:57" class="time">17:53</a></td></tr>
<tr id="t2019-11-06T18:14:05"><td class="nickchange" colspan="2">*** camus is now known as kaspter</td><td><a href="#t2019-11-06T18:14:05" class="time">18:14</a></td></tr>
<tr id="t2019-11-06T18:23:59"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">RP: I understand the concerns. if I were to setup a project, without funding, to maintain sumo in a public git tree, could I still use some of the Yocto Project infrastructure? wiki, mailing list, git server?</td><td class="time"><a href="#t2019-11-06T18:23:59" class="time">18:23</a></td></tr>
<tr id="t2019-11-06T18:27:02"><td class="action" colspan="2">* mcfrisk will maintain sumo anyway. question is just about if I will publish the work, and where to publish the work.</td><td><a href="#t2019-11-06T18:27:02" class="time">18:27</a></td></tr>
<tr id="t2019-11-06T18:34:16"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">mcfrisk: I think the TSC needs to discuss this</td><td class="time"><a href="#t2019-11-06T18:34:16" class="time">18:34</a></td></tr>
<tr id="t2019-11-06T18:36:32"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">hmm, sumo threw uninative errors :(</td><td class="time"><a href="#t2019-11-06T18:36:32" class="time">18:36</a></td></tr>
<tr id="t2019-11-06T18:36:48"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">ouch</td><td class="time"><a href="#t2019-11-06T18:36:48" class="time">18:36</a></td></tr>
<tr id="t2019-11-06T18:37:35"><th class="nick" style="background: #a25555">mcfrisk</th><td class="text" style="color: #a25555">will reply to the list too. TSC discussion and possible decisions are needed, sure.</td><td class="time"><a href="#t2019-11-06T18:37:35" class="time">18:37</a></td></tr>
<tr id="t2019-11-06T18:54:26"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">ruru4143: the documentation has a list</td><td class="time"><a href="#t2019-11-06T18:54:26" class="time">18:54</a></td></tr>
<tr id="t2019-11-06T19:21:17"><td class="nickchange" colspan="2">*** florian_kc is now known as florian</td><td><a href="#t2019-11-06T19:21:17" class="time">19:21</a></td></tr>
<tr id="t2019-11-06T19:33:37"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">Hmm, sumo shows a lot of warnings :(</td><td class="time"><a href="#t2019-11-06T19:33:37" class="time">19:33</a></td></tr>
<tr id="t2019-11-06T19:35:42"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">seebs: is there any mechanism in pseudo to detect if a function is present and only enable the code if so?</td><td class="time"><a href="#t2019-11-06T19:35:42" class="time">19:35</a></td></tr>
<tr id="t2019-11-06T19:38:32"><th class="nick" style="background: #c668c6">seebs</th><td class="text" style="color: #c668c6">ports/subports</td><td class="time"><a href="#t2019-11-06T19:38:32" class="time">19:38</a></td></tr>
<tr id="t2019-11-06T19:39:01"><th class="nick" style="background: #c668c6">seebs</th><td class="text" style="color: #c668c6">have a look at the linux/clone code, which existed because of the multi-year-gap between "management has promised we can stop supporting RHEL4" and "we can actually stop supporting RHEL4"</td><td class="time"><a href="#t2019-11-06T19:39:01" class="time">19:39</a></td></tr>
<tr id="t2019-11-06T19:49:11"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">seebs: thanks, that is the pointer I needed :)</td><td class="time"><a href="#t2019-11-06T19:49:11" class="time">19:49</a></td></tr>
<tr id="t2019-11-06T20:16:46"><td class="nickchange" colspan="2">*** aidanh_ is now known as aidanh</td><td><a href="#t2019-11-06T20:16:46" class="time">20:16</a></td></tr>
<tr id="t2019-11-06T20:34:59"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">seebs: <a href="http://git.yoctoproject.org/cgit.cgi/poky/commit/?h=master-next&amp;id=ac02f30e3759b64ba402a2129f015fe70f2ad566" rel="nofollow">http://git.yoctoproject.org/cgit.cgi/poky/commit/?h=master-next&amp;id=ac02f30e3759b64ba402a2129f015fe70f2ad566</a> is slowly improving</td><td class="time"><a href="#t2019-11-06T20:34:59" class="time">20:34</a></td></tr>
<tr id="t2019-11-06T20:44:44"><th class="nick" style="background: #6acaca">fray</th><td class="text" style="color: #6acaca">that looks a lot less bad then I was expecting basedon the previous discussion</td><td class="time"><a href="#t2019-11-06T20:44:44" class="time">20:44</a></td></tr>
<tr id="t2019-11-06T20:48:25"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">fray: that doesn't mean I have this right :)</td><td class="time"><a href="#t2019-11-06T20:48:25" class="time">20:48</a></td></tr>
<tr id="t2019-11-06T21:05:35"><th class="nick" style="background: #c668c6">seebs</th><td class="text" style="color: #c668c6">that looks reasonable to me, i think?</td><td class="time"><a href="#t2019-11-06T21:05:35" class="time">21:05</a></td></tr>
<tr id="t2019-11-06T21:07:19"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">seebs: it seems to work...</td><td class="time"><a href="#t2019-11-06T21:07:19" class="time">21:07</a></td></tr>
<tr id="t2019-11-06T21:07:27"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">seebs: running tests now...</td><td class="time"><a href="#t2019-11-06T21:07:27" class="time">21:07</a></td></tr>
<tr id="t2019-11-06T21:07:29"><th class="nick" style="background: #ce6c6c">mischief</th><td class="text" style="color: #ce6c6c">why does systemd in yocto use /lib rather than /usr/lib?</td><td class="time"><a href="#t2019-11-06T21:07:29" class="time">21:07</a></td></tr>
<tr id="t2019-11-06T21:07:44"><th class="nick" style="background: #6acaca">fray</th><td class="text" style="color: #6acaca">because everyone else is wrong?</td><td class="time"><a href="#t2019-11-06T21:07:44" class="time">21:07</a></td></tr>
<tr id="t2019-11-06T21:08:09"><th class="nick" style="background: #6acaca">fray</th><td class="text" style="color: #6acaca"> /lib is available on boot.. /usr/lib isn't available until filesystems are mounted..</td><td class="time"><a href="#t2019-11-06T21:08:09" class="time">21:08</a></td></tr>
<tr id="t2019-11-06T21:08:32"><th class="nick" style="background: #6acaca">fray</th><td class="text" style="color: #6acaca">if you enable the usrmerge.. then it's all the same, and /usr/lib is used.. but you can no longer do / and /usr separation (much less used today then it used to be)</td><td class="time"><a href="#t2019-11-06T21:08:32" class="time">21:08</a></td></tr>
<tr id="t2019-11-06T21:09:01"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">fray: not the mounting thing again? :)</td><td class="time"><a href="#t2019-11-06T21:09:01" class="time">21:09</a></td></tr>
<tr id="t2019-11-06T21:09:16"><th class="nick" style="background: #6acaca">fray</th><td class="text" style="color: #6acaca">just explaining why /lib vs /usr/lib</td><td class="time"><a href="#t2019-11-06T21:09:16" class="time">21:09</a></td></tr>
<tr id="t2019-11-06T21:09:31"><th class="nick" style="background: #ce6c6c">mischief</th><td class="text" style="color: #ce6c6c">is usrmerge documented somewhere?</td><td class="time"><a href="#t2019-11-06T21:09:31" class="time">21:09</a></td></tr>
<tr id="t2019-11-06T21:09:36"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">fray: I'll mention NFS ;-)</td><td class="time"><a href="#t2019-11-06T21:09:36" class="time">21:09</a></td></tr>
<tr id="t2019-11-06T21:11:08"><th class="nick" style="background: #ce6c6c">mischief</th><td class="text" style="color: #ce6c6c">fray: i am just confused because i am trying to make a recipe for a program with a systemd unit.</td><td class="time"><a href="#t2019-11-06T21:11:08" class="time">21:11</a></td></tr>
<tr id="t2019-11-06T21:11:39"><th class="nick" style="background: #ce6c6c">mischief</th><td class="text" style="color: #ce6c6c">the binary is installed to /usr/bin but it looks like yocto's systemd.bbclass expects the systemd unit in /lib/systemd/system ..</td><td class="time"><a href="#t2019-11-06T21:11:39" class="time">21:11</a></td></tr>
<tr id="t2019-11-06T21:11:44"><th class="nick" style="background: #6acaca">fray</th><td class="text" style="color: #6acaca">Look at other recipes with systemd components and use teh same ${....}</td><td class="time"><a href="#t2019-11-06T21:11:44" class="time">21:11</a></td></tr>
<tr id="t2019-11-06T21:12:51"><th class="nick" style="background: #6acaca">fray</th><td class="text" style="color: #6acaca">usrmerge is a distro feature that changes the 'root_prefix' from 'base_prefix' (/) to exec_prefix (/usr)</td><td class="time"><a href="#t2019-11-06T21:12:51" class="time">21:12</a></td></tr>
<tr id="t2019-11-06T21:13:11"><th class="nick" style="background: #ce6c6c">mischief</th><td class="text" style="color: #ce6c6c">fray: "/lib is available on boot.. /usr/lib isn't available until filesystems are mounted.." - so in my situation a unit in /lib would be available at boot time but not the corresponding binary in /usr/bin? that doesn't make any sense</td><td class="time"><a href="#t2019-11-06T21:13:11" class="time">21:13</a></td></tr>
<tr id="t2019-11-06T21:13:32"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">hmm, dynamically re-configuring the autobuilder code from under it only works to a point...</td><td class="time"><a href="#t2019-11-06T21:13:32" class="time">21:13</a></td></tr>
<tr id="t2019-11-06T21:13:34"><th class="nick" style="background: #6acaca">fray</th><td class="text" style="color: #6acaca">in that case, you would need to set a dependency on mount</td><td class="time"><a href="#t2019-11-06T21:13:34" class="time">21:13</a></td></tr>
<tr id="t2019-11-06T21:13:58"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">mischief: there is a variable to use for installing unit files</td><td class="time"><a href="#t2019-11-06T21:13:58" class="time">21:13</a></td></tr>
<tr id="t2019-11-06T21:14:35"><th class="nick" style="background: #ce6c6c">mischief</th><td class="text" style="color: #ce6c6c">i know, i'm just trying to understand conceptually why it is the way it is</td><td class="time"><a href="#t2019-11-06T21:14:35" class="time">21:14</a></td></tr>
<tr id="t2019-11-06T21:14:51"><th class="nick" style="background: #6acaca">fray</th><td class="text" style="color: #6acaca">${systemd_unitdir}</td><td class="time"><a href="#t2019-11-06T21:14:51" class="time">21:14</a></td></tr>
<tr id="t2019-11-06T21:15:25"><td class="action" colspan="2">* RP suspects nobody does this with filesystems anymore</td><td><a href="#t2019-11-06T21:15:25" class="time">21:15</a></td></tr>
<tr id="t2019-11-06T21:15:26"><th class="nick" style="background: #6acaca">fray</th><td class="text" style="color: #6acaca">basically there are systems that have small root filesystems, and then will put most of the code into /usr..&nbsp;&nbsp;like I said, they are significantly more rare now then it used to be</td><td class="time"><a href="#t2019-11-06T21:15:26" class="time">21:15</a></td></tr>
<tr id="t2019-11-06T21:15:40"><th class="nick" style="background: #6acaca">fray</th><td class="text" style="color: #6acaca">RP I saw someone do this last year still</td><td class="time"><a href="#t2019-11-06T21:15:40" class="time">21:15</a></td></tr>
<tr id="t2019-11-06T21:15:42"><th class="nick" style="background: #ce6c6c">mischief</th><td class="text" style="color: #ce6c6c">fray: having to set RequiresMountsFor=/usr on every unit makes little sense as well</td><td class="time"><a href="#t2019-11-06T21:15:42" class="time">21:15</a></td></tr>
<tr id="t2019-11-06T21:15:58"><th class="nick" style="background: #6acaca">fray</th><td class="text" style="color: #6acaca">they had to adjust things to ensure that filesystems were mounted early.. but otherwise it worked for their config</td><td class="time"><a href="#t2019-11-06T21:15:58" class="time">21:15</a></td></tr>
<tr id="t2019-11-06T21:16:45"><th class="nick" style="background: #ce6c6c">mischief</th><td class="text" style="color: #ce6c6c">anyway, it matters little i guess since we have no separate /usr fs</td><td class="time"><a href="#t2019-11-06T21:16:45" class="time">21:16</a></td></tr>
<tr id="t2019-11-06T21:16:52"><th class="nick" style="background: #ce6c6c">mischief</th><td class="text" style="color: #ce6c6c">ill adjust where i install the unit to /lib..</td><td class="time"><a href="#t2019-11-06T21:16:52" class="time">21:16</a></td></tr>
<tr id="t2019-11-06T21:17:04"><th class="nick" style="background: #6acaca">fray</th><td class="text" style="color: #6acaca">don't use /lib directly.. use the variable ${systemd_unitdir}</td><td class="time"><a href="#t2019-11-06T21:17:04" class="time">21:17</a></td></tr>
<tr id="t2019-11-06T21:17:27"><th class="nick" style="background: #ce6c6c">mischief</th><td class="text" style="color: #ce6c6c">i know, but i need to adjust my build system to take an argument of where to install</td><td class="time"><a href="#t2019-11-06T21:17:27" class="time">21:17</a></td></tr>
<tr id="t2019-11-06T21:18:58"><th class="nick" style="background: #6acaca">fray</th><td class="text" style="color: #6acaca">of if using oe.. do_install { .. if [ $D/usr/lib != ${systemd_unitdir} ; then mv $D/usr/lib/.... ${systemd_unitdir}/...; fi }</td><td class="time"><a href="#t2019-11-06T21:18:58" class="time">21:18</a></td></tr>
<tr id="t2019-11-06T21:19:19"><th class="nick" style="background: #ce6c6c">mischief</th><td class="text" style="color: #ce6c6c">i am using meson for my program :)</td><td class="time"><a href="#t2019-11-06T21:19:19" class="time">21:19</a></td></tr>
<tr id="t2019-11-06T21:19:58"><th class="nick" style="background: #6acaca">fray</th><td class="text" style="color: #6acaca">Yes, but are you controlling it from OE or is it external.. if it's external you are on your own.. if you are using OE.. then you can do whatever in do_install</td><td class="time"><a href="#t2019-11-06T21:19:58" class="time">21:19</a></td></tr>
<tr id="t2019-11-06T21:26:43"><th class="nick" style="background: #ce6c6c">mischief</th><td class="text" style="color: #ce6c6c">cool, systemd pkgconfig has the unit dir in it :)</td><td class="time"><a href="#t2019-11-06T21:26:43" class="time">21:26</a></td></tr>
<tr id="t2019-11-06T21:31:32"><td class="action" colspan="2">* RP does a double take on his hashequiv accelerated build completing when he didn't expect it to do so for an hour or two</td><td><a href="#t2019-11-06T21:31:32" class="time">21:31</a></td></tr>
<tr id="t2019-11-06T21:32:30"><td class="action" colspan="2">* Crofton|work wonders what is wrong with that build</td><td><a href="#t2019-11-06T21:32:30" class="time">21:32</a></td></tr>
<tr id="t2019-11-06T21:32:50"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">Crofton|work: I was wondering that too</td><td class="time"><a href="#t2019-11-06T21:32:50" class="time">21:32</a></td></tr>
<tr id="t2019-11-06T21:42:19"><th class="nick" style="background: #6acaca">fray</th><td class="text" style="color: #6acaca">RP does the packagefeed_stability (or some other class) help feed the hash equivalency yet?</td><td class="time"><a href="#t2019-11-06T21:42:19" class="time">21:42</a></td></tr>
<tr id="t2019-11-06T21:43:38"><th class="nick" style="background: #57a657">RP</th><td class="text" style="color: #57a657">fray: probably obsoletes it</td><td class="time"><a href="#t2019-11-06T21:43:38" class="time">21:43</a></td></tr>
<tr id="t2019-11-06T22:30:45"><th class="nick" style="background: #adad5b">rburton</th><td class="text" style="color: #adad5b">mischief: at the end of the day, systemd doesn't really support mounting /lib before /usr</td><td class="time"><a href="#t2019-11-06T22:30:45" class="time">22:30</a></td></tr>
</table>
<div class="navigation"> <a href="%23yocto.2019-11-05.log.html">&#171; Tuesday, 2019-11-05</a> <a href="index.html">Index</a> <a href="%23yocto.2019-11-07.log.html">Thursday, 2019-11-07 &#187;</a> </div>

<div class="generatedby">
<p>Generated by irclog2html.py 2.11.0 by <a href="mailto:marius@pov.lt">Marius Gedminas</a>
 - find it at <a href="http://mg.pov.lt/irclog2html/">mg.pov.lt</a>!</p>
</div>
</body>
</html>
