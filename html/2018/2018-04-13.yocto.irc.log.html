<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Friday, 2018-04-13</title>
  <link rel="stylesheet" href="irclog.css" />
  <meta name="generator" content="irclog2html.py 2.11.0 by Marius Gedminas" />
  <meta name="version" content="2.11.0 - 2012-07-30" />
</head>
<body>
<h1>Friday, 2018-04-13</h1>
<div class="navigation"> <a href="%23yocto.2018-04-12.log.html">&#171; Thursday, 2018-04-12</a> <a href="index.html">Index</a> <a href="%23yocto.2018-04-14.log.html">Saturday, 2018-04-14 &#187;</a> </div>
<table class="irclog">
<tr id="t2018-04-13T00:03:28"><td class="other" colspan="2">-YoctoAutoBuilder- build #1021 of nightly is complete: Success [build successful]  Build details are at <a href="https://autobuilder.yocto.io/builders/nightly/builds/1021" rel="nofollow">https://autobuilder.yocto.io/builders/nightly/builds/1021</a></td><td><a href="#t2018-04-13T00:03:28" class="time">00:03</a></td></tr>
<tr id="t2018-04-13T06:19:20"><th class="nick" style="background: #407a40">stdint</th><td class="text" style="color: #407a40">I want to install gobject-introspection-native into the sdk, but add it into TOOLCHAIN_HOST_TASK doesn't take effect(the other thing I added it works)</td><td class="time"><a href="#t2018-04-13T06:19:20" class="time">06:19</a></td></tr>
<tr id="t2018-04-13T06:20:24"><th class="nick" style="background: #407a40">stdint</th><td class="text" style="color: #407a40">And I check the gobject-introspection-native build directory, I didn't see any packages split directory nor ipk files</td><td class="time"><a href="#t2018-04-13T06:20:24" class="time">06:20</a></td></tr>
<tr id="t2018-04-13T06:32:23"><th class="nick" style="background: #42427e">osten</th><td class="text" style="color: #42427e">I have enabled the buildhistory in my local.conf file, but can't find the build history folder. When compiling the project it even says.&nbsp;&nbsp;"Writing build history". Does anyone have any idea why it isn't there ?</td><td class="time"><a href="#t2018-04-13T06:32:23" class="time">06:32</a></td></tr>
<tr id="t2018-04-13T08:05:25"><th class="nick" style="background: #818144">anujm</th><td class="text" style="color: #818144">osten: it should be &lt;build_dir&gt;/buildhistory directory unless you have overridden the BUILDHISTORY_DIR variable.</td><td class="time"><a href="#t2018-04-13T08:05:25" class="time">08:05</a></td></tr>
<tr id="t2018-04-13T08:39:39"><th class="nick" style="background: #42427e">osten</th><td class="text" style="color: #42427e">anujm: Thanks, hmm somehow after a couple of builds it came to exist. Maby it's my ssh mount which is just a bit slow to sync the files.</td><td class="time"><a href="#t2018-04-13T08:39:39" class="time">08:39</a></td></tr>
<tr id="t2018-04-13T08:41:32"><th class="nick" style="background: #42427e">osten</th><td class="text" style="color: #42427e">Another question, not sure this is the right place to put it tough. I'm trying to add rauc as an update system to my image, i followed their guide, but when i'm trying to generate a rauc bundle, then it fails where there is no .live image of my image. Do any one have any idea why i get this error ? and where to find information to solve the problem ?</td><td class="time"><a href="#t2018-04-13T08:41:32" class="time">08:41</a></td></tr>
<tr id="t2018-04-13T09:14:53"><th class="nick" style="background: #854685">osse</th><td class="text" style="color: #854685">When/After running a build how can I see how much was found in the sstate ?</td><td class="time"><a href="#t2018-04-13T09:14:53" class="time">09:14</a></td></tr>
<tr id="t2018-04-13T09:23:42"><th class="nick" style="background: #488888">JaMa</th><td class="text" style="color: #488888">osse: inheritting buildstats-summary gives you nice summary at the end of the build</td><td class="time"><a href="#t2018-04-13T09:23:42" class="time">09:23</a></td></tr>
<tr id="t2018-04-13T09:27:00"><th class="nick" style="background: #854685">osse</th><td class="text" style="color: #854685">JaMa: Thanks, I'll try that</td><td class="time"><a href="#t2018-04-13T09:27:00" class="time">09:27</a></td></tr>
<tr id="t2018-04-13T10:29:13"><th class="nick" style="background: #8c4a4a">yocti</th><td class="text" style="color: #8c4a4a">New news from stackoverflow: U-Boot How to run a standalone binary program? &lt;<a href="https://stackoverflow.com/questions/49814470/u-boot-how-to-run-a-standalone-binary-program&gt;" rel="nofollow">https://stackoverflow.com/questions/49814470/u-boot-how-to-run-a-standalone-binary-program&gt;</a> || PCIE not detecting on IMX7 with kintex fpga &lt;<a href="https://stackoverflow.com/questions/49814350/pcie-not-detecting-on-imx7-with-kintex-fpga&gt;" rel="nofollow">https://stackoverflow.com/questions/49814350/pcie-not-detecting-on-imx7-with-kintex-fpga&gt;</a></td><td class="time"><a href="#t2018-04-13T10:29:13" class="time">10:29</a></td></tr>
<tr id="t2018-04-13T11:44:13"><th class="nick" style="background: #4b904b">T_UNIX</th><td class="text" style="color: #4b904b">I have a simple Makefile based project that adheres to CC/DESTDIR/PREFIX conventions and supports `make install`. It seems that if I inherit `autotools` it tries to build using the (empty, since no `configure`) `build/`-subdirectory</td><td class="time"><a href="#t2018-04-13T11:44:13" class="time">11:44</a></td></tr>
<tr id="t2018-04-13T11:44:22"><th class="nick" style="background: #4b904b">T_UNIX</th><td class="text" style="color: #4b904b">which obviously fails</td><td class="time"><a href="#t2018-04-13T11:44:22" class="time">11:44</a></td></tr>
<tr id="t2018-04-13T11:44:43"><th class="nick" style="background: #4b904b">T_UNIX</th><td class="text" style="color: #4b904b">if I implicitly inherit `base`, it does not run `make install`</td><td class="time"><a href="#t2018-04-13T11:44:43" class="time">11:44</a></td></tr>
<tr id="t2018-04-13T11:44:58"><th class="nick" style="background: #4b904b">T_UNIX</th><td class="text" style="color: #4b904b">so what's the intended way to solve this</td><td class="time"><a href="#t2018-04-13T11:44:58" class="time">11:44</a></td></tr>
<tr id="t2018-04-13T11:46:38"><th class="nick" style="background: #4b904b">T_UNIX</th><td class="text" style="color: #4b904b">setting `B=${S}` might mess with rebuilds, right?</td><td class="time"><a href="#t2018-04-13T11:46:38" class="time">11:46</a></td></tr>
<tr id="t2018-04-13T11:53:53"><th class="nick" style="background: #4d4d93">neverpanic</th><td class="text" style="color: #4d4d93">That's what autotools-brokensep does</td><td class="time"><a href="#t2018-04-13T11:53:53" class="time">11:53</a></td></tr>
<tr id="t2018-04-13T11:54:12"><th class="nick" style="background: #4d4d93">neverpanic</th><td class="text" style="color: #4d4d93">But why don't you just override do_install and call oe_runmake install yourself?</td><td class="time"><a href="#t2018-04-13T11:54:12" class="time">11:54</a></td></tr>
<tr id="t2018-04-13T11:59:13"><th class="nick" style="background: #4b904b">T_UNIX</th><td class="text" style="color: #4b904b">@neverpanic I assumed that it would be a common case and that I'm just Doing-It-Wrong(TM) ;-)</td><td class="time"><a href="#t2018-04-13T11:59:13" class="time">11:59</a></td></tr>
<tr id="t2018-04-13T12:00:39"><th class="nick" style="background: #4b904b">T_UNIX</th><td class="text" style="color: #4b904b">neverpanic: also: doesn't just equalizing build and source dir interfere with e.g. source fetching vs. reconfiguration?</td><td class="time"><a href="#t2018-04-13T12:00:39" class="time">12:00</a></td></tr>
<tr id="t2018-04-13T12:01:50"><th class="nick" style="background: #4b904b">T_UNIX</th><td class="text" style="color: #4b904b">I added something like `do_compile_prepend() { cp -aR ${S} . }`</td><td class="time"><a href="#t2018-04-13T12:01:50" class="time">12:01</a></td></tr>
<tr id="t2018-04-13T12:05:16"><th class="nick" style="background: #4d4d93">neverpanic</th><td class="text" style="color: #4d4d93">No, since autotools-brokensep already does that</td><td class="time"><a href="#t2018-04-13T12:05:16" class="time">12:05</a></td></tr>
<tr id="t2018-04-13T12:06:02"><td class="nickchange" colspan="2">*** tasslehoff is now known as anders</td><td><a href="#t2018-04-13T12:06:02" class="time">12:06</a></td></tr>
<tr id="t2018-04-13T12:06:11"><td class="nickchange" colspan="2">*** anders is now known as tasslehoff</td><td><a href="#t2018-04-13T12:06:11" class="time">12:06</a></td></tr>
<tr id="t2018-04-13T12:07:02"><td class="part" colspan="2">*** tasslehoff &lt;tasslehoff!~aronning@80.77.101.233&gt; has left #yocto</td><td><a href="#t2018-04-13T12:07:02" class="time">12:07</a></td></tr>
<tr id="t2018-04-13T12:07:31"><th class="nick" style="background: #4b904b">T_UNIX</th><td class="text" style="color: #4b904b">neverpanic: but the `configure` routine conditionally deletes `${B}`. I mean I thought `B` was there for a reason (e.g. not having to rerun do-unpack).</td><td class="time"><a href="#t2018-04-13T12:07:31" class="time">12:07</a></td></tr>
<tr id="t2018-04-13T12:10:18"><th class="nick" style="background: #4d4d93">neverpanic</th><td class="text" style="color: #4d4d93">what configure routine?</td><td class="time"><a href="#t2018-04-13T12:10:18" class="time">12:10</a></td></tr>
<tr id="t2018-04-13T12:10:54"><th class="nick" style="background: #4d4d93">neverpanic</th><td class="text" style="color: #4d4d93">I don't see anybody deleting ${B} in base.bbclass</td><td class="time"><a href="#t2018-04-13T12:10:54" class="time">12:10</a></td></tr>
<tr id="t2018-04-13T12:11:21"><th class="nick" style="background: #4d4d93">neverpanic</th><td class="text" style="color: #4d4d93">Of course if you're using autotools.bbclass with a non-autotools project, you probably shouldn't.</td><td class="time"><a href="#t2018-04-13T12:11:21" class="time">12:11</a></td></tr>
<tr id="t2018-04-13T12:57:20"><td class="other" colspan="2">-YoctoAutoBuilder- build #953 of nightly-musl is complete: Success [build successful]  Build details are at <a href="https://autobuilder.yocto.io/builders/nightly-musl/builds/953" rel="nofollow">https://autobuilder.yocto.io/builders/nightly-musl/builds/953</a></td><td><a href="#t2018-04-13T12:57:20" class="time">12:57</a></td></tr>
<tr id="t2018-04-13T12:58:23"><td class="other" colspan="2">-YoctoAutoBuilder- build #409 of nightly-musl-x86-64 is complete: Success [build successful]  Build details are at <a href="https://autobuilder.yocto.io/builders/nightly-musl-x86-64/builds/409" rel="nofollow">https://autobuilder.yocto.io/builders/nightly-musl-x86-64/builds/409</a></td><td><a href="#t2018-04-13T12:58:23" class="time">12:58</a></td></tr>
<tr id="t2018-04-13T13:32:47"><td class="other" colspan="2">-YoctoAutoBuilder- build #438 of eclipse-plugin-oxygen is complete: Failure [failed Building Eclipse Plugin]  Build details are at <a href="https://autobuilder.yocto.io/builders/eclipse-plugin-oxygen/builds/438" rel="nofollow">https://autobuilder.yocto.io/builders/eclipse-plugin-oxygen/builds/438</a></td><td><a href="#t2018-04-13T13:32:47" class="time">13:32</a></td></tr>
<tr id="t2018-04-13T14:01:19"><td class="other" colspan="2">-YoctoAutoBuilder- build #918 of poky-tiny is complete: Failure [failed]  Build details are at <a href="https://autobuilder.yocto.io/builders/poky-tiny/builds/918" rel="nofollow">https://autobuilder.yocto.io/builders/poky-tiny/builds/918</a></td><td><a href="#t2018-04-13T14:01:19" class="time">14:01</a></td></tr>
<tr id="t2018-04-13T14:01:38"><td class="other" colspan="2">-YoctoAutoBuilder- build #986 of nightly-oe-selftest is complete: Failure [failed]  Build details are at <a href="https://autobuilder.yocto.io/builders/nightly-oe-selftest/builds/986" rel="nofollow">https://autobuilder.yocto.io/builders/nightly-oe-selftest/builds/986</a></td><td><a href="#t2018-04-13T14:01:38" class="time">14:01</a></td></tr>
<tr id="t2018-04-13T14:01:54"><td class="other" colspan="2">-YoctoAutoBuilder- build #925 of build-appliance is complete: Failure [failed]  Build details are at <a href="https://autobuilder.yocto.io/builders/build-appliance/builds/925" rel="nofollow">https://autobuilder.yocto.io/builders/build-appliance/builds/925</a></td><td><a href="#t2018-04-13T14:01:54" class="time">14:01</a></td></tr>
<tr id="t2018-04-13T14:08:39"><th class="nick" style="background: #97974f">fberg</th><td class="text" style="color: #97974f">hello guys, does anybody know how to add a console login message on yocto ?</td><td class="time"><a href="#t2018-04-13T14:08:39" class="time">14:08</a></td></tr>
<tr id="t2018-04-13T14:14:22"><th class="nick" style="background: #9b519b">fray</th><td class="text" style="color: #9b519b"> /etc/issue is sent before login... /etc/motd after</td><td class="time"><a href="#t2018-04-13T14:14:22" class="time">14:14</a></td></tr>
<tr id="t2018-04-13T14:16:56"><th class="nick" style="background: #97974f">fberg</th><td class="text" style="color: #97974f">fray: thanks !</td><td class="time"><a href="#t2018-04-13T14:16:56" class="time">14:16</a></td></tr>
<tr id="t2018-04-13T14:23:04"><td class="other" colspan="2">-YoctoAutoBuilder- build #919 of poky-tiny is complete: Success [build successful]  Build details are at <a href="https://autobuilder.yocto.io/builders/poky-tiny/builds/919" rel="nofollow">https://autobuilder.yocto.io/builders/poky-tiny/builds/919</a></td><td><a href="#t2018-04-13T14:23:04" class="time">14:23</a></td></tr>
<tr id="t2018-04-13T14:25:51"><td class="other" colspan="2">-YoctoAutoBuilder- build #439 of eclipse-plugin-oxygen is complete: Success [build successful]  Build details are at <a href="https://autobuilder.yocto.io/builders/eclipse-plugin-oxygen/builds/439" rel="nofollow">https://autobuilder.yocto.io/builders/eclipse-plugin-oxygen/builds/439</a></td><td><a href="#t2018-04-13T14:25:51" class="time">14:25</a></td></tr>
<tr id="t2018-04-13T14:26:31"><td class="other" colspan="2">-YoctoAutoBuilder- build #922 of eclipse-plugin-neon is complete: Success [build successful]  Build details are at <a href="https://autobuilder.yocto.io/builders/eclipse-plugin-neon/builds/922" rel="nofollow">https://autobuilder.yocto.io/builders/eclipse-plugin-neon/builds/922</a></td><td><a href="#t2018-04-13T14:26:31" class="time">14:26</a></td></tr>
<tr id="t2018-04-13T14:34:01"><td class="part" colspan="2">*** maxin &lt;maxin!~maxin@134.134.139.73&gt; has left #yocto</td><td><a href="#t2018-04-13T14:34:01" class="time">14:34</a></td></tr>
<tr id="t2018-04-13T15:02:39"><td class="part" colspan="2">*** prabhakarlad &lt;prabhakarlad!~prabhakar@194.75.40.178&gt; has left #yocto</td><td><a href="#t2018-04-13T15:02:39" class="time">15:02</a></td></tr>
<tr id="t2018-04-13T15:31:44"><td class="other" colspan="2">-YoctoAutoBuilder- build #926 of build-appliance is complete: Success [build successful]  Build details are at <a href="https://autobuilder.yocto.io/builders/build-appliance/builds/926" rel="nofollow">https://autobuilder.yocto.io/builders/build-appliance/builds/926</a></td><td><a href="#t2018-04-13T15:31:44" class="time">15:31</a></td></tr>
<tr id="t2018-04-13T15:48:44"><th class="nick" style="background: #539e9e">binarym</th><td class="text" style="color: #539e9e">hi all. I need a native tool to build a custom image type. This tool needs some config file, so, in my recipe i installed config file using install -m 644 ${D}/${sysconfdir} (BBCLASSEXTEND="native", etc...). My problem is how to access this config file in a image_type_custom.bbclass ?</td><td class="time"><a href="#t2018-04-13T15:48:44" class="time">15:48</a></td></tr>
<tr id="t2018-04-13T15:50:52"><th class="nick" style="background: #539e9e">binarym</th><td class="text" style="color: #539e9e">using directly ../../${sysconfdir}/&lt;my config file&gt; is a bit ugly, isn't it ?</td><td class="time"><a href="#t2018-04-13T15:50:52" class="time">15:50</a></td></tr>
<tr id="t2018-04-13T17:06:29"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">halstead: A sumo-next when the AB is free would be cool :)</td><td class="time"><a href="#t2018-04-13T17:06:29" class="time">17:06</a></td></tr>
<tr id="t2018-04-13T17:07:23"><th class="nick" style="background: #57a657">halstead</th><td class="text" style="color: #57a657">RP, Will do. I'm taking my father in law to the doctor so I'll be a little slow to respond for the next little bit.</td><td class="time"><a href="#t2018-04-13T17:07:23" class="time">17:07</a></td></tr>
<tr id="t2018-04-13T17:09:02"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">halstead: no problem, I'm finished for the day</td><td class="time"><a href="#t2018-04-13T17:09:02" class="time">17:09</a></td></tr>
<tr id="t2018-04-13T17:10:00"><th class="nick" style="background: #57a657">halstead</th><td class="text" style="color: #57a657">RP, Thanks! I'll complete updates and get sumo-next queued up in the next couple hours.</td><td class="time"><a href="#t2018-04-13T17:10:00" class="time">17:10</a></td></tr>
<tr id="t2018-04-13T17:41:21"><th class="nick" style="background: #5959a9">martinkelly</th><td class="text" style="color: #5959a9">i'm curious, does anyone know why deleted files in DEPLOY_DIR cannot be automatically detected and rebuilt?</td><td class="time"><a href="#t2018-04-13T17:41:21" class="time">17:41</a></td></tr>
<tr id="t2018-04-13T17:41:21"><th class="nick" style="background: #5959a9">martinkelly</th><td class="text" style="color: #5959a9"><a href="https://www.yoctoproject.org/docs/latest/mega-manual/mega-manual.html#structure-build-tmp-deploy-images" rel="nofollow">https://www.yoctoproject.org/docs/latest/mega-manual/mega-manual.html#structure-build-tmp-deploy-images</a></td><td class="time"><a href="#t2018-04-13T17:41:21" class="time">17:41</a></td></tr>
<tr id="t2018-04-13T17:41:21"><th class="nick" style="background: #5959a9">martinkelly</th><td class="text" style="color: #5959a9">"If you do accidentally delete files here, you will need to force them to be re-created. In order to do that, you will need to know the target that produced them."</td><td class="time"><a href="#t2018-04-13T17:41:21" class="time">17:41</a></td></tr>
<tr id="t2018-04-13T17:41:21"><th class="nick" style="background: #5959a9">martinkelly</th><td class="text" style="color: #5959a9">I'm not a bitbake expert but am wondering why packages deploying to DEPLOY_DIR don't effectively take a dependency on the files they create (or be allowed to voluntarily declare those dependencies) so that when files are deleted, they get rebuilt when you rebuild the image.</td><td class="time"><a href="#t2018-04-13T17:41:21" class="time">17:41</a></td></tr>
<tr id="t2018-04-13T17:56:12"><th class="nick" style="background: #adad5b">aehs29</th><td class="text" style="color: #adad5b">quit</td><td class="time"><a href="#t2018-04-13T17:56:12" class="time">17:56</a></td></tr>
<tr id="t2018-04-13T17:56:15"><th class="nick" style="background: #adad5b">aehs29</th><td class="text" style="color: #adad5b">oops</td><td class="time"><a href="#t2018-04-13T17:56:15" class="time">17:56</a></td></tr>
<tr id="t2018-04-13T17:56:23"><th class="nick" style="background: #57a657">halstead</th><td class="text" style="color: #57a657">:)</td><td class="time"><a href="#t2018-04-13T17:56:23" class="time">17:56</a></td></tr>
<tr id="t2018-04-13T18:00:44"><th class="nick" style="background: #8c4a4a">yocti</th><td class="text" style="color: #8c4a4a">New news from stackoverflow: How is /dev/block/bootdevic/by-name created? &lt;<a href="https://stackoverflow.com/questions/49822694/how-is-dev-block-bootdevic-by-name-created&gt;" rel="nofollow">https://stackoverflow.com/questions/49822694/how-is-dev-block-bootdevic-by-name-created&gt;</a></td><td class="time"><a href="#t2018-04-13T18:00:44" class="time">18:00</a></td></tr>
<tr id="t2018-04-13T18:26:14"><th class="nick" style="background: #b15db1">kergoth</th><td class="text" style="color: #b15db1">martinkelly: bitbake doesn't track every file by design. tasks are run based on stamps, those stamps happen to include metadata and file checksums in very specific cases only</td><td class="time"><a href="#t2018-04-13T18:26:14" class="time">18:26</a></td></tr>
<tr id="t2018-04-13T18:26:52"><th class="nick" style="background: #5959a9">martinkelly</th><td class="text" style="color: #5959a9">is that for performance reasons?</td><td class="time"><a href="#t2018-04-13T18:26:52" class="time">18:26</a></td></tr>
<tr id="t2018-04-13T18:39:56"><td class="action" colspan="2">* armpit network to work is down.. time for beer</td><td><a href="#t2018-04-13T18:39:56" class="time">18:39</a></td></tr>
<tr id="t2018-04-13T18:50:06"><th class="nick" style="background: #5fb4b4">laplante</th><td class="text" style="color: #5fb4b4">Is there any way to use a MultiStageProgressReporter with a task's 'progress' varflag?</td><td class="time"><a href="#t2018-04-13T18:50:06" class="time">18:50</a></td></tr>
<tr id="t2018-04-13T18:54:44"><th class="nick" style="background: #5fb4b4">laplante</th><td class="text" style="color: #5fb4b4">suppose I need to modify exec_func_shell in bitbake/lib/bb/build.py</td><td class="time"><a href="#t2018-04-13T18:54:44" class="time">18:54</a></td></tr>
<tr id="t2018-04-13T19:20:21"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">... Okay this is one of those things I probably should have checked. At one point, on most filesystems I'd checked, symlinks persistently had their own distinct inode numbers.</td><td class="time"><a href="#t2018-04-13T19:20:21" class="time">19:20</a></td></tr>
<tr id="t2018-04-13T19:20:37"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">Do we ever run on filesystems where that's not the case? I don't think it's actually strictly required by POSIX.</td><td class="time"><a href="#t2018-04-13T19:20:37" class="time">19:20</a></td></tr>
<tr id="t2018-04-13T19:45:30"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">fwiw, I have some free time and I'm looking at 12434 again. I'm gonna clean up some of the spammy log messages and see if I can track down the actual problem, because I'm pretty sure there is an actual problem in the logs I'm seeing.</td><td class="time"><a href="#t2018-04-13T19:45:30" class="time">19:45</a></td></tr>
<tr id="t2018-04-13T19:55:52"><th class="nick" style="background: #62bb62">rburton</th><td class="text" style="color: #62bb62">seebs: awesome</td><td class="time"><a href="#t2018-04-13T19:55:52" class="time">19:55</a></td></tr>
<tr id="t2018-04-13T19:56:37"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">it has been far too long since i used this stuff</td><td class="time"><a href="#t2018-04-13T19:56:37" class="time">19:56</a></td></tr>
<tr id="t2018-04-13T19:57:05"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">imagine that i want a specific package to be built, and I want the environment variable PSEUDO_DEBUG set while it builds.</td><td class="time"><a href="#t2018-04-13T19:57:05" class="time">19:57</a></td></tr>
<tr id="t2018-04-13T19:57:21"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">It appears that just adding PSEUDO_DEBUG to BB_ENV_EXTRAWHITE and setting it as an environment variable is not enough.</td><td class="time"><a href="#t2018-04-13T19:57:21" class="time">19:57</a></td></tr>
<tr id="t2018-04-13T19:57:51"><th class="nick" style="background: #62bb62">rburton</th><td class="text" style="color: #62bb62">throw export PSEUDO_DEBUG='1' into the recipe and use bitbake -C unpack recipename?</td><td class="time"><a href="#t2018-04-13T19:57:51" class="time">19:57</a></td></tr>
<tr id="t2018-04-13T19:57:59"><th class="nick" style="background: #62bb62">rburton</th><td class="text" style="color: #62bb62">much easier than messing with the env whitelist</td><td class="time"><a href="#t2018-04-13T19:57:59" class="time">19:57</a></td></tr>
<tr id="t2018-04-13T19:58:34"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">oh, that'd work.</td><td class="time"><a href="#t2018-04-13T19:58:34" class="time">19:58</a></td></tr>
<tr id="t2018-04-13T19:58:48"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">The interesting thing, to me, is that pseudo appears to be getting in some way screwed up before the recipe is even really involved.</td><td class="time"><a href="#t2018-04-13T19:58:48" class="time">19:58</a></td></tr>
<tr id="t2018-04-13T19:59:04"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">Like, I'm getting weird complaints about the suspicious similarity of log.do_install.pid and log.do_install.</td><td class="time"><a href="#t2018-04-13T19:59:04" class="time">19:59</a></td></tr>
<tr id="t2018-04-13T19:59:30"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">So I may actually need to be able to set pseudo_debug outside the stuff that's nominally "in" the recipe to catch that.</td><td class="time"><a href="#t2018-04-13T19:59:30" class="time">19:59</a></td></tr>
<tr id="t2018-04-13T20:00:45"><th class="nick" style="background: #62bb62">rburton</th><td class="text" style="color: #62bb62">in that case the whitelist thing should work :/</td><td class="time"><a href="#t2018-04-13T20:00:45" class="time">20:00</a></td></tr>
<tr id="t2018-04-13T20:01:15"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">I'd think, yes.</td><td class="time"><a href="#t2018-04-13T20:01:15" class="time">20:01</a></td></tr>
<tr id="t2018-04-13T20:01:49"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">huh. i may have been looking in wrong log file, though. heh.</td><td class="time"><a href="#t2018-04-13T20:01:49" class="time">20:01</a></td></tr>
<tr id="t2018-04-13T20:05:48"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">... Nope. There's an initial setup of the server happening, which is outside the stuff done within the recipe, so it doesn't get PSEUDO_DEBUG.</td><td class="time"><a href="#t2018-04-13T20:05:48" class="time">20:05</a></td></tr>
<tr id="t2018-04-13T20:15:59"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">heh. i can fix that by adding it to bitbake.conf, but that means everything has to be rebuilt very slowly with debugging on. whoops.</td><td class="time"><a href="#t2018-04-13T20:15:59" class="time">20:15</a></td></tr>
<tr id="t2018-04-13T20:17:52"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">... i am apparently missing something, because I'm still not seeing expected logging output on the server side.</td><td class="time"><a href="#t2018-04-13T20:17:52" class="time">20:17</a></td></tr>
<tr id="t2018-04-13T20:18:33"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">*and* i found a path-resolution bug. man, this is just not my day.</td><td class="time"><a href="#t2018-04-13T20:18:33" class="time">20:18</a></td></tr>
<tr id="t2018-04-13T20:23:07"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">seebs: what rburton said, hack the specific recipe in question</td><td class="time"><a href="#t2018-04-13T20:23:07" class="time">20:23</a></td></tr>
<tr id="t2018-04-13T20:23:20"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">sorry, scrollback stalled :)</td><td class="time"><a href="#t2018-04-13T20:23:20" class="time">20:23</a></td></tr>
<tr id="t2018-04-13T20:24:31"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">so the problem i'm currently looking at, which is actually one of a couple probably-related ones, is:</td><td class="time"><a href="#t2018-04-13T20:24:31" class="time">20:24</a></td></tr>
<tr id="t2018-04-13T20:24:38"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">inode mismatch: '/home/seebs/src/poky/build/tmp/work/all-poky-linux/pseudo-test/1.0-r0/temp/log.do_install' ino 41689229 in db, 41690343 in request.</td><td class="time"><a href="#t2018-04-13T20:24:38" class="time">20:24</a></td></tr>
<tr id="t2018-04-13T20:24:43"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">seebs: you can force something out of the variable hashing with XXX[vardepvalue] XXX[vardepexclude] and friends</td><td class="time"><a href="#t2018-04-13T20:24:43" class="time">20:24</a></td></tr>
<tr id="t2018-04-13T20:24:47"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">the problem is, this isn't *inside* the recipe.</td><td class="time"><a href="#t2018-04-13T20:24:47" class="time">20:24</a></td></tr>
<tr id="t2018-04-13T20:25:12"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">this is happening during the setup around the recipe when the recipe's not actually in play yet, so far as i can tell. so i'm not actually getting a PSEUDO_DEBUG setting in to the pseudo server at that point.</td><td class="time"><a href="#t2018-04-13T20:25:12" class="time">20:25</a></td></tr>
<tr id="t2018-04-13T20:25:43"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">seebs: pseudo is started disabled and then only enabled per recipe</td><td class="time"><a href="#t2018-04-13T20:25:43" class="time">20:25</a></td></tr>
<tr id="t2018-04-13T20:25:46"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">My goal would be to turn on debug info enough that, when I get that message, I can figure out what client program was even running.</td><td class="time"><a href="#t2018-04-13T20:25:46" class="time">20:25</a></td></tr>
<tr id="t2018-04-13T20:26:21"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">seebs: so it sounds like you want it when pseudo starts which is bitbake.conf</td><td class="time"><a href="#t2018-04-13T20:26:21" class="time">20:26</a></td></tr>
<tr id="t2018-04-13T20:26:23"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">So I'm looking for the point at which a specific server is started.</td><td class="time"><a href="#t2018-04-13T20:26:23" class="time">20:26</a></td></tr>
<tr id="t2018-04-13T20:26:32"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">Because each recipe is getting its own distinct server.</td><td class="time"><a href="#t2018-04-13T20:26:32" class="time">20:26</a></td></tr>
<tr id="t2018-04-13T20:26:51"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">seebs: that should be the point the logging applies. The code itself is from bitbake-worker</td><td class="time"><a href="#t2018-04-13T20:26:51" class="time">20:26</a></td></tr>
<tr id="t2018-04-13T20:26:54"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">Huh. I wonder whether I should add a thing to check the pseudo directory for a .rc file.</td><td class="time"><a href="#t2018-04-13T20:26:54" class="time">20:26</a></td></tr>
<tr id="t2018-04-13T20:27:35"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">So, *something* is being done that causes a pseudo server, with PSEUDO_PREFIX pointed to this specific recipe's recipe/version/pseudo directory, to emit a diagnostic about log.do_install.</td><td class="time"><a href="#t2018-04-13T20:27:35" class="time">20:27</a></td></tr>
<tr id="t2018-04-13T20:29:08"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">But that server isn't running with any debug flags, even though I just went ahead and set PSEUDO_DEBUG globally in bitbake.conf, and it's working for the clients.</td><td class="time"><a href="#t2018-04-13T20:29:08" class="time">20:29</a></td></tr>
<tr id="t2018-04-13T20:29:10"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">That is really weird.</td><td class="time"><a href="#t2018-04-13T20:29:10" class="time">20:29</a></td></tr>
<tr id="t2018-04-13T20:29:12"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">seebs: the code runs two versions of bitbake/bin/bitbake-worker, one under pseudo, one not. When a task is marked as fakeroot, its passed to the bb-worker script running under pseudo and that enables pseudo in that context for that recipe</td><td class="time"><a href="#t2018-04-13T20:29:12" class="time">20:29</a></td></tr>
<tr id="t2018-04-13T20:29:46"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">seebs: you can see the code that applies the flags in bitbake-worker. It sounds odd hat something wouldn't get PSEUDO_DEBUG</td><td class="time"><a href="#t2018-04-13T20:29:46" class="time">20:29</a></td></tr>
<tr id="t2018-04-13T20:29:58"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">Does it ever actually directly start the server, or is that being done only by the client?</td><td class="time"><a href="#t2018-04-13T20:29:58" class="time">20:29</a></td></tr>
<tr id="t2018-04-13T20:30:12"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">seebs: only server start is from the clients</td><td class="time"><a href="#t2018-04-13T20:30:12" class="time">20:30</a></td></tr>
<tr id="t2018-04-13T20:30:15"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">afaik</td><td class="time"><a href="#t2018-04-13T20:30:15" class="time">20:30</a></td></tr>
<tr id="t2018-04-13T20:30:35"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">huh. So if the client has PSEUDO_DEBUG set (which it does, since it's producing the diagnostics)...</td><td class="time"><a href="#t2018-04-13T20:30:35" class="time">20:30</a></td></tr>
<tr id="t2018-04-13T20:30:50"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">That's really odd.</td><td class="time"><a href="#t2018-04-13T20:30:50" class="time">20:30</a></td></tr>
<tr id="t2018-04-13T20:30:58"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">summary, yes</td><td class="time"><a href="#t2018-04-13T20:30:58" class="time">20:30</a></td></tr>
<tr id="t2018-04-13T20:31:52"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">seebs: how late is this in the recipe execution and is this glibc-locale?</td><td class="time"><a href="#t2018-04-13T20:31:52" class="time">20:31</a></td></tr>
<tr id="t2018-04-13T20:32:09"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">sounds like its any do_install from your logs?</td><td class="time"><a href="#t2018-04-13T20:32:09" class="time">20:32</a></td></tr>
<tr id="t2018-04-13T20:32:28"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">if so no matter, my theory is irrelevant</td><td class="time"><a href="#t2018-04-13T20:32:28" class="time">20:32</a></td></tr>
<tr id="t2018-04-13T20:32:55"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">it's not glibc-locale, it's the dummy pseudo-test package.</td><td class="time"><a href="#t2018-04-13T20:32:55" class="time">20:32</a></td></tr>
<tr id="t2018-04-13T20:33:12"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">seebs: note that /home/seebs/src/poky/build/tmp/work/all-poky-linux/pseudo-test/1.0-r0/temp/log.do_install is a symlink which gets updated at the end of a task's execution out of pseudo context</td><td class="time"><a href="#t2018-04-13T20:33:12" class="time">20:33</a></td></tr>
<tr id="t2018-04-13T20:33:16"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">And *something* seems to be sending the wrong path or inode data to the server, causing errors.</td><td class="time"><a href="#t2018-04-13T20:33:16" class="time">20:33</a></td></tr>
<tr id="t2018-04-13T20:33:32"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">So the problem is, it's being seen inside pseudo.</td><td class="time"><a href="#t2018-04-13T20:33:32" class="time">20:33</a></td></tr>
<tr id="t2018-04-13T20:33:39"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">And that's causing at the very least weird diagnostics.</td><td class="time"><a href="#t2018-04-13T20:33:39" class="time">20:33</a></td></tr>
<tr id="t2018-04-13T20:33:50"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">inode mismatch: '/home/seebs/src/poky/build/tmp/work/all-poky-linux/pseudo-test/1.0-r0/temp/log.do_install' ino 41689233 in db, 41690345 in request.</td><td class="time"><a href="#t2018-04-13T20:33:50" class="time">20:33</a></td></tr>
<tr id="t2018-04-13T20:33:51"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">symlink mismatch: '/home/seebs/src/poky/build/tmp/work/all-poky-linux/pseudo-test/1.0-r0/temp/log.do_install' [41689233] db mode 0120777, header mode 0100644 (unlinking db)</td><td class="time"><a href="#t2018-04-13T20:33:51" class="time">20:33</a></td></tr>
<tr id="t2018-04-13T20:34:25"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">which means that *some* client code, actually talking to pseudo, interacted with that name, but had the file header data from the thing it links to, rather than from the symlink.</td><td class="time"><a href="#t2018-04-13T20:34:25" class="time">20:34</a></td></tr>
<tr id="t2018-04-13T20:34:56"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">So that's clearly a bug, and it may not be related to the other problems, but I feel like it should get figured out and fixed. But to do that, I have to be able to figure out what's *doing* it.</td><td class="time"><a href="#t2018-04-13T20:34:56" class="time">20:34</a></td></tr>
<tr id="t2018-04-13T20:35:11"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">seebs: I can tell you the code that changes that file</td><td class="time"><a href="#t2018-04-13T20:35:11" class="time">20:35</a></td></tr>
<tr id="t2018-04-13T20:35:22"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">And to do that, I have to make the server log more information -- but it won't, because it's not getting any debug flags, which is itself really weird.</td><td class="time"><a href="#t2018-04-13T20:35:22" class="time">20:35</a></td></tr>
<tr id="t2018-04-13T20:35:30"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">lib/bb/build.py:_exec_task()</td><td class="time"><a href="#t2018-04-13T20:35:30" class="time">20:35</a></td></tr>
<tr id="t2018-04-13T20:35:56"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">seebs: # Setup the courtesy link to the logfn</td><td class="time"><a href="#t2018-04-13T20:35:56" class="time">20:35</a></td></tr>
<tr id="t2018-04-13T20:36:45"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">seebs: _exec_task is called from exec_task() which is only called from bitbake-worker</td><td class="time"><a href="#t2018-04-13T20:36:45" class="time">20:36</a></td></tr>
<tr id="t2018-04-13T20:37:12"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">seebs: which should only ever be in the right pseudo context...</td><td class="time"><a href="#t2018-04-13T20:37:12" class="time">20:37</a></td></tr>
<tr id="t2018-04-13T20:37:34"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">side note: if i wanted to use a local git repo, how would I spell that in SRC_URI? git:///home/seebs/...?</td><td class="time"><a href="#t2018-04-13T20:37:34" class="time">20:37</a></td></tr>
<tr id="t2018-04-13T20:38:08"><th class="nick" style="background: #a25555">RP</th><td class="text" style="color: #a25555">seebs: git:///home/seebs/...;protocol=file</td><td class="time"><a href="#t2018-04-13T20:38:08" class="time">20:38</a></td></tr>
<tr id="t2018-04-13T20:38:20"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">thx.</td><td class="time"><a href="#t2018-04-13T20:38:20" class="time">20:38</a></td></tr>
<tr id="t2018-04-13T20:38:30"><td class="action" colspan="2">* RP needs to be elsewhere but I'll check in later</td><td><a href="#t2018-04-13T20:38:30" class="time">20:38</a></td></tr>
<tr id="t2018-04-13T20:38:31"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">I want to do some crazy things and not upload them.</td><td class="time"><a href="#t2018-04-13T20:38:31" class="time">20:38</a></td></tr>
<tr id="t2018-04-13T20:38:33"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">Thanks!</td><td class="time"><a href="#t2018-04-13T20:38:33" class="time">20:38</a></td></tr>
<tr id="t2018-04-13T20:43:31"><td class="part" colspan="2">*** seebs &lt;seebs!~seebs@24.196.59.174&gt; has left #yocto</td><td><a href="#t2018-04-13T20:43:31" class="time">20:43</a></td></tr>
<tr id="t2018-04-13T20:43:38"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">hah.</td><td class="time"><a href="#t2018-04-13T20:43:38" class="time">20:43</a></td></tr>
<tr id="t2018-04-13T20:43:41"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">message from client 4 [15791:grep - ] fd 11</td><td class="time"><a href="#t2018-04-13T20:43:41" class="time">20:43</a></td></tr>
<tr id="t2018-04-13T20:43:41"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">inode mismatch: '/home/seebs/src/poky/build/tmp/work/all-poky-linux/pseudo-test/1.0-r0/temp/log.do_install' ino 41688885 in db, 41688996 in request.</td><td class="time"><a href="#t2018-04-13T20:43:41" class="time">20:43</a></td></tr>
<tr id="t2018-04-13T20:44:03"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">that's... interesting. so that's probably from package_qa or something, calling grep on log.do_install.</td><td class="time"><a href="#t2018-04-13T20:44:03" class="time">20:44</a></td></tr>
<tr id="t2018-04-13T20:45:00"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">So the failure there is that there is a real symlink, inode *5, and grep is being invoked on that path, but getting the data for *6, but the message sent to the server uses the wrong path.</td><td class="time"><a href="#t2018-04-13T20:45:00" class="time">20:45</a></td></tr>
<tr id="t2018-04-13T20:47:44"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">yay. i have a trivial reproducer for that, now i just need to figure out why it happens.</td><td class="time"><a href="#t2018-04-13T20:47:44" class="time">20:47</a></td></tr>
<tr id="t2018-04-13T20:50:13"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">.... d'oh.</td><td class="time"><a href="#t2018-04-13T20:50:13" class="time">20:50</a></td></tr>
<tr id="t2018-04-13T20:51:26"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">wow that's been broken forever.</td><td class="time"><a href="#t2018-04-13T20:51:26" class="time">20:51</a></td></tr>
<tr id="t2018-04-13T20:51:42"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">Like, over three years.</td><td class="time"><a href="#t2018-04-13T20:51:42" class="time">20:51</a></td></tr>
<tr id="t2018-04-13T20:52:13"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">So, there's a pseudo_root_path() which tries to resolve a path. Its last argument is called leave_last, and is supposed to be nonzero if and only if we should not be following symlinks.</td><td class="time"><a href="#t2018-04-13T20:52:13" class="time">20:52</a></td></tr>
<tr id="t2018-04-13T20:52:24"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">openat() calls that, just passing in flags.</td><td class="time"><a href="#t2018-04-13T20:52:24" class="time">20:52</a></td></tr>
<tr id="t2018-04-13T20:52:55"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">Which means anything like O_CLOEXEC, etcetera, causes it not to try to follow symlinks. This is completely wrong, and I can't find any relevant changes since 2015.</td><td class="time"><a href="#t2018-04-13T20:52:55" class="time">20:52</a></td></tr>
<tr id="t2018-04-13T20:54:23"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">I'm not even sure how to fix it, since the right answer varies between functions.</td><td class="time"><a href="#t2018-04-13T20:54:23" class="time">20:54</a></td></tr>
<tr id="t2018-04-13T20:57:10"><td class="nickchange" colspan="2">*** stephano_ is now known as stephano</td><td><a href="#t2018-04-13T20:57:10" class="time">20:57</a></td></tr>
<tr id="t2018-04-13T20:59:24"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">what a beautifully weird bug, and I'm stunned we never apparently got hit by it. That's just really *weird*.</td><td class="time"><a href="#t2018-04-13T20:59:24" class="time">20:59</a></td></tr>
<tr id="t2018-04-13T21:02:49"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">no relation to 12434, I don't think, and I still haven't been able to get that to actually trigger, but still.</td><td class="time"><a href="#t2018-04-13T21:02:49" class="time">21:02</a></td></tr>
<tr id="t2018-04-13T21:14:36"><td class="nickchange" colspan="2">*** AbleBacon_ is now known as AbleBacon</td><td><a href="#t2018-04-13T21:14:36" class="time">21:14</a></td></tr>
<tr id="t2018-04-13T21:27:04"><th class="nick" style="background: #b15db1">kergoth</th><td class="text" style="color: #b15db1">Hmm, anyone try doing bitbake builds under WSL?</td><td class="time"><a href="#t2018-04-13T21:27:04" class="time">21:27</a></td></tr>
<tr id="t2018-04-13T21:30:14"><th class="nick" style="background: #488888">JaMa</th><td class="text" style="color: #488888">seebs: thanks a lot for looking into it again, if you need more testers let me know I'll trigger a lot of builds with any weird pseudo revision you gave me :)</td><td class="time"><a href="#t2018-04-13T21:30:14" class="time">21:30</a></td></tr>
<tr id="t2018-04-13T21:30:39"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">So right now, my problem is basically that I can't get the pseudo-test recipe from 12434 to fail.</td><td class="time"><a href="#t2018-04-13T21:30:39" class="time">21:30</a></td></tr>
<tr id="t2018-04-13T21:30:51"><th class="nick" style="background: #488888">JaMa</th><td class="text" style="color: #488888">kergoth: few people try, nobody was able to finish I believe, next version is supposed to make the filesystem better (I don't belive it at all)</td><td class="time"><a href="#t2018-04-13T21:30:51" class="time">21:30</a></td></tr>
<tr id="t2018-04-13T21:31:12"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">I fixed an unrelated (I think) bug that was creating spurious reports, and I also fixed it so you no longer get all the "path mismatch [N links]" for N &gt; 1 by default.</td><td class="time"><a href="#t2018-04-13T21:31:12" class="time">21:31</a></td></tr>
<tr id="t2018-04-13T21:31:22"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">Because that's incredibly spammy with heavily-hardlinked trees, and useless.</td><td class="time"><a href="#t2018-04-13T21:31:22" class="time">21:31</a></td></tr>
<tr id="t2018-04-13T21:31:51"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">So current master... *I* can't get it to fail, anyway. Both trying with that pseudo-test recipe under poky, and just running that makefile under pseudo directly.</td><td class="time"><a href="#t2018-04-13T21:31:51" class="time">21:31</a></td></tr>
<tr id="t2018-04-13T21:32:28"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">And I don't know whether this is the same issue as the glibc-locale one or a different one. My intuition says "probably different", because I have a vague recollection of glibc-locale doing a thing where it tries to access files stashed from another recipe's work directory or something.</td><td class="time"><a href="#t2018-04-13T21:32:28" class="time">21:32</a></td></tr>
<tr id="t2018-04-13T21:34:26"><th class="nick" style="background: #488888">JaMa</th><td class="text" style="color: #488888">kergoth: one of last threads I remember about WSL <a href="http://forum.webosose.org/t/failed-at-55-glibc-locale-building-in-wsl-win10/208" rel="nofollow">http://forum.webosose.org/t/failed-at-55-glibc-locale-building-in-wsl-win10/208</a></td><td class="time"><a href="#t2018-04-13T21:34:26" class="time">21:34</a></td></tr>
<tr id="t2018-04-13T21:35:04"><th class="nick" style="background: #488888">JaMa</th><td class="text" style="color: #488888">kergoth: there was tread on oe-core or yocto ML as well long time ago, IIRC with similar conclussion</td><td class="time"><a href="#t2018-04-13T21:35:04" class="time">21:35</a></td></tr>
<tr id="t2018-04-13T21:35:16"><th class="nick" style="background: #b15db1">kergoth</th><td class="text" style="color: #b15db1">ah, thanks</td><td class="time"><a href="#t2018-04-13T21:35:16" class="time">21:35</a></td></tr>
<tr id="t2018-04-13T21:35:43"><th class="nick" style="background: #488888">JaMa</th><td class="text" style="color: #488888">kergoth: this is with 2.2 Morty, but I don't think it matters to WSL</td><td class="time"><a href="#t2018-04-13T21:35:43" class="time">21:35</a></td></tr>
<tr id="t2018-04-13T21:36:29"><th class="nick" style="background: #488888">JaMa</th><td class="text" style="color: #488888">seebs: ok, I'll give latest master a try in case it's not reproducible at all anymore</td><td class="time"><a href="#t2018-04-13T21:36:29" class="time">21:36</a></td></tr>
<tr id="t2018-04-13T21:38:07"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">I suspect it might just require more cores than my laptop has? But it's also really hard to be sure. I'm particularly interested in pseudo-test failures, because the glibc-locale thing *could* be a completely different problem.</td><td class="time"><a href="#t2018-04-13T21:38:07" class="time">21:38</a></td></tr>
<tr id="t2018-04-13T21:38:19"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">And honestly I bet the symlink fix will catch all sorts of weird stuff.</td><td class="time"><a href="#t2018-04-13T21:38:19" class="time">21:38</a></td></tr>
<tr id="t2018-04-13T21:38:29"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">Because there were absolutely ways that could result in dropping database entries.</td><td class="time"><a href="#t2018-04-13T21:38:29" class="time">21:38</a></td></tr>
<tr id="t2018-04-13T21:38:42"><th class="nick" style="background: #488888">JaMa</th><td class="text" style="color: #488888">glibc-locale seems to be most common from "public" reproducers</td><td class="time"><a href="#t2018-04-13T21:38:42" class="time">21:38</a></td></tr>
<tr id="t2018-04-13T21:39:04"><th class="nick" style="background: #488888">JaMa</th><td class="text" style="color: #488888">but I get these issues from quite a few other components as well</td><td class="time"><a href="#t2018-04-13T21:39:04" class="time">21:39</a></td></tr>
<tr id="t2018-04-13T21:39:32"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">yeah. glibc-locale in particular is a really weird package, and i seem to recall having concerns about it back in the day, because it had some non-obvious implication about its interactions with glibc builds or something.</td><td class="time"><a href="#t2018-04-13T21:39:32" class="time">21:39</a></td></tr>
<tr id="t2018-04-13T21:39:35"><th class="nick" style="background: #488888">JaMa</th><td class="text" style="color: #488888">e.g. various .qml files generated with meta-qt5, sometimes CONTROL file inside .ipk packaging</td><td class="time"><a href="#t2018-04-13T21:39:35" class="time">21:39</a></td></tr>
<tr id="t2018-04-13T21:39:38"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">it's been too long and i've forgotten.</td><td class="time"><a href="#t2018-04-13T21:39:38" class="time">21:39</a></td></tr>
<tr id="t2018-04-13T21:40:53"><th class="nick" style="background: #488888">JaMa</th><td class="text" style="color: #488888">with less spammy log I might be able to spot what makes some components to be more error-prone for this then others</td><td class="time"><a href="#t2018-04-13T21:40:53" class="time">21:40</a></td></tr>
<tr id="t2018-04-13T21:41:46"><th class="nick" style="background: #488888">JaMa</th><td class="text" style="color: #488888">shame that my pseudo-test didn't work reliably in the end</td><td class="time"><a href="#t2018-04-13T21:41:46" class="time">21:41</a></td></tr>
<tr id="t2018-04-13T21:42:34"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">i dunno, maybe it does, and i actually fixed that specific error. :)</td><td class="time"><a href="#t2018-04-13T21:42:34" class="time">21:42</a></td></tr>
<tr id="t2018-04-13T21:42:59"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">anyway, the "path mismatch" stuff should now be gone except in the case where a file only has one link, which should dramatically reduce spam about things that have dozens of links.</td><td class="time"><a href="#t2018-04-13T21:42:59" class="time">21:42</a></td></tr>
<tr id="t2018-04-13T21:43:07"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">and the symlink mismatches caused by the weird openat bug should be gone now.</td><td class="time"><a href="#t2018-04-13T21:43:07" class="time">21:43</a></td></tr>
<tr id="t2018-04-13T21:43:33"><th class="nick" style="background: #b15db1">kergoth</th><td class="text" style="color: #b15db1">yeah, thanks for the pointers. will likely just use docker or a vm for the time being, good to know there's progress though.. the filesystem issues do seem troublesome</td><td class="time"><a href="#t2018-04-13T21:43:33" class="time">21:43</a></td></tr>
<tr id="t2018-04-13T21:43:40"><th class="nick" style="background: #b15db1">kergoth</th><td class="text" style="color: #b15db1">"I think this stems from the NTFS limitation that prevents renaming directories which have a handle open to anything below" interesting</td><td class="time"><a href="#t2018-04-13T21:43:40" class="time">21:43</a></td></tr>
<tr id="t2018-04-13T21:50:28"><th class="nick" style="background: #6464bf">mtahmed</th><td class="text" style="color: #6464bf">Is there a way to tell a bitbake build to output a debian package only and nothing else? E.g. I would like to build curl as a debian package and output that debian package in the DEPLOY_DIR but not build anything else.</td><td class="time"><a href="#t2018-04-13T21:50:28" class="time">21:50</a></td></tr>
<tr id="t2018-04-13T21:50:54"><th class="nick" style="background: #b15db1">kergoth</th><td class="text" style="color: #b15db1">switch PACKAGE_CLASSES to package_deb, run bitbake curl</td><td class="time"><a href="#t2018-04-13T21:50:54" class="time">21:50</a></td></tr>
<tr id="t2018-04-13T21:55:29"><th class="nick" style="background: #c3c366">scottrif</th><td class="text" style="color: #c3c366">EXTERNAL_TOOLCHAIN variable worth documenting?&nbsp;&nbsp;Any opinions?</td><td class="time"><a href="#t2018-04-13T21:55:29" class="time">21:55</a></td></tr>
<tr id="t2018-04-13T21:55:58"><th class="nick" style="background: #b15db1">kergoth</th><td class="text" style="color: #b15db1">that depends on whether we want to cover meta-external-toolchain or not. the variable has no meaning without a layer that obeys it, oe-core does not</td><td class="time"><a href="#t2018-04-13T21:55:58" class="time">21:55</a></td></tr>
<tr id="t2018-04-13T21:57:17"><th class="nick" style="background: #c3c366">scottrif</th><td class="text" style="color: #c3c366">OK - we do not document meta-external-toolchain</td><td class="time"><a href="#t2018-04-13T21:57:17" class="time">21:57</a></td></tr>
<tr id="t2018-04-13T21:58:26"><th class="nick" style="background: #c3c366">scottrif</th><td class="text" style="color: #c3c366">Although I do have the <a href="https://www.yoctoproject.org/docs/2.5/mega-manual/mega-manual.html#dev-optionally-using-an-external-toolchain" rel="nofollow">https://www.yoctoproject.org/docs/2.5/mega-manual/mega-manual.html#dev-optionally-using-an-external-toolchain</a> section that mentions a bit about external toolchains.&nbsp;&nbsp;The link to EXTERNAL_TOOLCHAIN is broke as I don't have a glossary definition for that variable.</td><td class="time"><a href="#t2018-04-13T21:58:26" class="time">21:58</a></td></tr>
<tr id="t2018-04-13T21:59:55"><th class="nick" style="background: #488888">JaMa</th><td class="text" style="color: #488888">seebs: glibc-locale does weird stuff, but it's interesting that whatever happens there is "preserved" in sstate archive and even different host which just reuses this tar archive ends with the same issue (in my testing every time). Whatever bad happens in particular build can be stored in tarball.</td><td class="time"><a href="#t2018-04-13T21:59:55" class="time">21:59</a></td></tr>
<tr id="t2018-04-13T22:00:59"><th class="nick" style="background: #488888">JaMa</th><td class="text" style="color: #488888">seebs: unfortunatelly I wasn't able to find out the significant difference between "good" and "bad" glibc-locale sstate archive</td><td class="time"><a href="#t2018-04-13T22:00:59" class="time">22:00</a></td></tr>
<tr id="t2018-04-13T22:08:31"><th class="nick" style="background: #6464bf">mtahmed</th><td class="text" style="color: #6464bf">kergoth: Oh sweet, that does end up putting&nbsp;&nbsp;the .debs in the deploy dir. Should have just tested instead of asking the question. Thanks!</td><td class="time"><a href="#t2018-04-13T22:08:31" class="time">22:08</a></td></tr>
<tr id="t2018-04-13T22:16:51"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">Huh, that's interesting.</td><td class="time"><a href="#t2018-04-13T22:16:51" class="time">22:16</a></td></tr>
<tr id="t2018-04-13T22:17:06"><th class="nick" style="background: #b86161">seebs</th><td class="text" style="color: #b86161">One thing I'm curious about, is the intent that locale files be 0644, or should they actually be 0444?</td><td class="time"><a href="#t2018-04-13T22:17:06" class="time">22:17</a></td></tr>
<tr id="t2018-04-13T22:50:33"><td class="other" colspan="2">-YoctoAutoBuilder- build #953 of nightly-wic is complete: Success [build successful]  Build details are at <a href="https://autobuilder.yocto.io/builders/nightly-wic/builds/953" rel="nofollow">https://autobuilder.yocto.io/builders/nightly-wic/builds/953</a></td><td><a href="#t2018-04-13T22:50:33" class="time">22:50</a></td></tr>
<tr id="t2018-04-13T22:50:53"><td class="other" colspan="2">-YoctoAutoBuilder- build #950 of nightly-x86-64-lsb is complete: Success [build successful]  Build details are at <a href="https://autobuilder.yocto.io/builders/nightly-x86-64-lsb/builds/950" rel="nofollow">https://autobuilder.yocto.io/builders/nightly-x86-64-lsb/builds/950</a></td><td><a href="#t2018-04-13T22:50:53" class="time">22:50</a></td></tr>
<tr id="t2018-04-13T22:57:59"><td class="other" colspan="2">-YoctoAutoBuilder- build #931 of nightly-mips64 is complete: Failure [failed BuildImages Running Sanity Tests]  Build details are at <a href="https://autobuilder.yocto.io/builders/nightly-mips64/builds/931" rel="nofollow">https://autobuilder.yocto.io/builders/nightly-mips64/builds/931</a></td><td><a href="#t2018-04-13T22:57:59" class="time">22:57</a></td></tr>
</table>
<div class="navigation"> <a href="%23yocto.2018-04-12.log.html">&#171; Thursday, 2018-04-12</a> <a href="index.html">Index</a> <a href="%23yocto.2018-04-14.log.html">Saturday, 2018-04-14 &#187;</a> </div>

<div class="generatedby">
<p>Generated by irclog2html.py 2.11.0 by <a href="mailto:marius@pov.lt">Marius Gedminas</a>
 - find it at <a href="http://mg.pov.lt/irclog2html/">mg.pov.lt</a>!</p>
</div>
</body>
</html>
