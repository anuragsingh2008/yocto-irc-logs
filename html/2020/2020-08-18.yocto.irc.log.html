<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Tuesday, 2020-08-18</title>
  <link rel="stylesheet" href="irclog.css" />
  <meta name="generator" content="irclog2html.py 2.17.2 by Marius Gedminas" />
  <meta name="version" content="2.17.2 - 2019-04-23" />
</head>
<body>
<h1>Tuesday, 2020-08-18</h1>
<div class="navigation"> <a href="%23yocto.2020-08-17.log.html">&#171; Monday, 2020-08-17</a> <a href="index.html">Index</a> <a href="%23yocto.2020-08-19.log.html">Wednesday, 2020-08-19 &#187;</a> </div>
<table class="irclog">
<tr id="t2020-08-18T02:01:18"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">JaMa: yes. that's the design. We were talking about this on the list the other day. And it's why I added the ability to make those dangling features a warning.</td><td class="time"><a href="#t2020-08-18T02:01:18" class="time">02:01</a></td></tr>
<tr id="t2020-08-18T02:02:12"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">(KERNEL_DANGLING_FEATURES_WARN_ONLY)</td><td class="time"><a href="#t2020-08-18T02:02:12" class="time">02:02</a></td></tr>
<tr id="t2020-08-18T02:24:09"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">that of course doesn't mean things can't be changed, but the error being thrown is known.</td><td class="time"><a href="#t2020-08-18T02:24:09" class="time">02:24</a></td></tr>
<tr id="t2020-08-18T02:24:18"><td class="action" colspan="2">* zeddii time for Zzzzz</td><td><a href="#t2020-08-18T02:24:18" class="time">02:24</a></td></tr>
<tr id="t2020-08-18T07:15:35"><td class="nickchange" colspan="2">*** camus1 is now known as kaspter</td><td><a href="#t2020-08-18T07:15:35" class="time">07:15</a></td></tr>
<tr id="t2020-08-18T07:22:27"><td class="nickchange" colspan="2">*** camus1 is now known as kaspter</td><td><a href="#t2020-08-18T07:22:27" class="time">07:22</a></td></tr>
<tr id="t2020-08-18T08:27:45"><th class="nick" style="background: #42427e">derRichard</th><td class="text" style="color: #42427e">i have custom image type to create a tar.gz file, works nice but opkg leaves some files in the rootfs. e.g. /var/lib/opkg/, how can i get rid of them?</td><td class="time"><a href="#t2020-08-18T08:27:45" class="time">08:27</a></td></tr>
<tr id="t2020-08-18T08:28:18"><th class="nick" style="background: #42427e">derRichard</th><td class="text" style="color: #42427e">ROOTFS_POSTPROCESS_COMMAND does not work since it seems to run before some other opkg action and if i remove /var/lib/opkg/, this opkg step will fail later :(</td><td class="time"><a href="#t2020-08-18T08:28:18" class="time">08:28</a></td></tr>
<tr id="t2020-08-18T08:39:41"><th class="nick" style="background: #42427e">derRichard</th><td class="text" style="color: #42427e">ok. IMAGE_PREPROCESS_COMMAND did the trick :)</td><td class="time"><a href="#t2020-08-18T08:39:41" class="time">08:39</a></td></tr>
<tr id="t2020-08-18T08:55:29"><th class="nick" style="background: #818144">marex</th><td class="text" style="color: #818144">derRichard: do you really need custom image type ?</td><td class="time"><a href="#t2020-08-18T08:55:29" class="time">08:55</a></td></tr>
<tr id="t2020-08-18T08:57:04"><th class="nick" style="background: #42427e">derRichard</th><td class="text" style="color: #42427e">marex: well, &quot;custom&quot;, all i needed was inherit core-image and a custom bb file :)</td><td class="time"><a href="#t2020-08-18T08:57:04" class="time">08:57</a></td></tr>
<tr id="t2020-08-18T08:57:35"><th class="nick" style="background: #818144">marex</th><td class="text" style="color: #818144">derRichard: then why do you need the preprocess command ? :)</td><td class="time"><a href="#t2020-08-18T08:57:35" class="time">08:57</a></td></tr>
<tr id="t2020-08-18T08:58:11"><th class="nick" style="background: #42427e">derRichard</th><td class="text" style="color: #42427e">to get rid of /var/lib/opkg/ and friends in my tar ball</td><td class="time"><a href="#t2020-08-18T08:58:11" class="time">08:58</a></td></tr>
<tr id="t2020-08-18T08:58:59"><th class="nick" style="background: #818144">marex</th><td class="text" style="color: #818144">derRichard: IMAGE_FSTYPES ... .tar doesn't remove that ?</td><td class="time"><a href="#t2020-08-18T08:58:59" class="time">08:58</a></td></tr>
<tr id="t2020-08-18T08:59:08"><th class="nick" style="background: #42427e">derRichard</th><td class="text" style="color: #42427e">nope</td><td class="time"><a href="#t2020-08-18T08:59:08" class="time">08:59</a></td></tr>
<tr id="t2020-08-18T08:59:12"><th class="nick" style="background: #42427e">derRichard</th><td class="text" style="color: #42427e">(sadly)</td><td class="time"><a href="#t2020-08-18T08:59:12" class="time">08:59</a></td></tr>
<tr id="t2020-08-18T09:00:03"><th class="nick" style="background: #818144">marex</th><td class="text" style="color: #818144">derRichard: should it ?</td><td class="time"><a href="#t2020-08-18T09:00:03" class="time">09:00</a></td></tr>
<tr id="t2020-08-18T09:00:20"><th class="nick" style="background: #42427e">derRichard</th><td class="text" style="color: #42427e">TBH, i don't care much</td><td class="time"><a href="#t2020-08-18T09:00:20" class="time">09:00</a></td></tr>
<tr id="t2020-08-18T09:00:52"><th class="nick" style="background: #42427e">derRichard</th><td class="text" style="color: #42427e">all i need is a image of type tar with some packages installed and *nothing* else. IMAGE_PREPROCESS_COMMAND did it for me</td><td class="time"><a href="#t2020-08-18T09:00:52" class="time">09:00</a></td></tr>
<tr id="t2020-08-18T09:01:12"><th class="nick" style="background: #818144">marex</th><td class="text" style="color: #818144">derRichard: I would expect that it should be either removed there or at least configurable</td><td class="time"><a href="#t2020-08-18T09:01:12" class="time">09:01</a></td></tr>
<tr id="t2020-08-18T09:01:35"><th class="nick" style="background: #818144">marex</th><td class="text" style="color: #818144">derRichard: the IMAGE_*PROCESS_COMMAND feels like hacking around other problems</td><td class="time"><a href="#t2020-08-18T09:01:35" class="time">09:01</a></td></tr>
<tr id="t2020-08-18T09:02:39"><th class="nick" style="background: #42427e">derRichard</th><td class="text" style="color: #42427e">if you know a &quot;cleanup after opkg&quot; config swtich, please tell</td><td class="time"><a href="#t2020-08-18T09:02:39" class="time">09:02</a></td></tr>
<tr id="t2020-08-18T09:03:05"><th class="nick" style="background: #818144">marex</th><td class="text" style="color: #818144">derRichard: no, I don't, but at least you're in the right channel</td><td class="time"><a href="#t2020-08-18T09:03:05" class="time">09:03</a></td></tr>
<tr id="t2020-08-18T09:03:13"><th class="nick" style="background: #818144">marex</th><td class="text" style="color: #818144">derRichard: someone else might</td><td class="time"><a href="#t2020-08-18T09:03:13" class="time">09:03</a></td></tr>
<tr id="t2020-08-18T09:03:32"><th class="nick" style="background: #42427e">derRichard</th><td class="text" style="color: #42427e">:-)</td><td class="time"><a href="#t2020-08-18T09:03:32" class="time">09:03</a></td></tr>
<tr id="t2020-08-18T09:16:02"><th class="nick" style="background: #818144">marex</th><td class="text" style="color: #818144">derRichard: btw isnt some of the package manager infra needed to configure packages on first boot ?</td><td class="time"><a href="#t2020-08-18T09:16:02" class="time">09:16</a></td></tr>
<tr id="t2020-08-18T09:16:22"><th class="nick" style="background: #42427e">derRichard</th><td class="text" style="color: #42427e">this image is not a rootfs</td><td class="time"><a href="#t2020-08-18T09:16:22" class="time">09:16</a></td></tr>
<tr id="t2020-08-18T09:16:31"><th class="nick" style="background: #42427e">derRichard</th><td class="text" style="color: #42427e">my system contains of many images</td><td class="time"><a href="#t2020-08-18T09:16:31" class="time">09:16</a></td></tr>
<tr id="t2020-08-18T09:16:36"><th class="nick" style="background: #42427e">derRichard</th><td class="text" style="color: #42427e">one of them is a tar ball</td><td class="time"><a href="#t2020-08-18T09:16:36" class="time">09:16</a></td></tr>
<tr id="t2020-08-18T09:20:42"><th class="nick" style="background: #854685">LetoThe2nd</th><td class="text" style="color: #854685">sounds very much like you are reinventing the container wheel</td><td class="time"><a href="#t2020-08-18T09:20:42" class="time">09:20</a></td></tr>
<tr id="t2020-08-18T09:22:29"><th class="nick" style="background: #42427e">derRichard</th><td class="text" style="color: #42427e">LetoThe2nd: so, how to solve it correctly? :-)</td><td class="time"><a href="#t2020-08-18T09:22:29" class="time">09:22</a></td></tr>
<tr id="t2020-08-18T09:23:17"><th class="nick" style="background: #854685">LetoThe2nd</th><td class="text" style="color: #854685">derRichard: by looking at what others do. onyx by togan labs, the balena stuff.. lots of places to find inpiration.</td><td class="time"><a href="#t2020-08-18T09:23:17" class="time">09:23</a></td></tr>
<tr id="t2020-08-18T09:23:58"><th class="nick" style="background: #42427e">derRichard</th><td class="text" style="color: #42427e">thx</td><td class="time"><a href="#t2020-08-18T09:23:58" class="time">09:23</a></td></tr>
<tr id="t2020-08-18T09:24:34"><th class="nick" style="background: #42427e">derRichard</th><td class="text" style="color: #42427e">btw. i don't mess with containers :-)</td><td class="time"><a href="#t2020-08-18T09:24:34" class="time">09:24</a></td></tr>
<tr id="t2020-08-18T09:24:48"><th class="nick" style="background: #42427e">derRichard</th><td class="text" style="color: #42427e">just a &quot;special&quot; kind of deployment</td><td class="time"><a href="#t2020-08-18T09:24:48" class="time">09:24</a></td></tr>
<tr id="t2020-08-18T09:34:56"><td class="nickchange" colspan="2">*** florian_kc is now known as florian</td><td><a href="#t2020-08-18T09:34:56" class="time">09:34</a></td></tr>
<tr id="t2020-08-18T09:59:24"><th class="nick" style="background: #488888">kanavin_home</th><td class="text" style="color: #488888">RP: is there an existing bug for this kind of kernel build failure?</td><td class="time"><a href="#t2020-08-18T09:59:24" class="time">09:59</a></td></tr>
<tr id="t2020-08-18T09:59:24-2"><th class="nick" style="background: #488888">kanavin_home</th><td class="text" style="color: #488888">| /usr/lib64/gcc/x86_64-suse-linux/10/../../../../x86_64-suse-linux/bin/ld: scripts/dtc/dtc-parser.tab.o:(.bss+0x10): multiple definition of `yylloc'; scripts/dtc/dtc-lexer.lex.o:(.bss+0x0): first defined here</td><td class="time"><a href="#t2020-08-18T09:59:24-2" class="time">09:59</a></td></tr>
<tr id="t2020-08-18T09:59:35"><th class="nick" style="background: #488888">kanavin_home</th><td class="text" style="color: #488888">I am fairly sure I have seen it before, but can't find the bug</td><td class="time"><a href="#t2020-08-18T09:59:35" class="time">09:59</a></td></tr>
<tr id="t2020-08-18T10:00:03"><th class="nick" style="background: #488888">kanavin_home</th><td class="text" style="color: #488888">it might also be caused by something in my patchset though</td><td class="time"><a href="#t2020-08-18T10:00:03" class="time">10:00</a></td></tr>
<tr id="t2020-08-18T10:08:03"><th class="nick" style="background: #8c4a4a">RP</th><td class="text" style="color: #8c4a4a">kanavin_home: that does look familiar</td><td class="time"><a href="#t2020-08-18T10:08:03" class="time">10:08</a></td></tr>
<tr id="t2020-08-18T10:10:30"><th class="nick" style="background: #8c4a4a">RP</th><td class="text" style="color: #8c4a4a">kanavin_home: I can't find one either, worth filing</td><td class="time"><a href="#t2020-08-18T10:10:30" class="time">10:10</a></td></tr>
<tr id="t2020-08-18T10:16:31"><th class="nick" style="background: #488888">kanavin_home</th><td class="text" style="color: #488888">RP: I'll first see if it reoccurs to confirm it is intermittent.</td><td class="time"><a href="#t2020-08-18T10:16:31" class="time">10:16</a></td></tr>
<tr id="t2020-08-18T10:48:26"><th class="nick" style="background: #4b904b">fbre</th><td class="text" style="color: #4b904b">Hi! I use &quot;zeus&quot; yocto of NXP. I added INITRAMFS_IMAGE = &quot;core-image-tiny-initramfs&quot; and INITRAMFS_IMAGE_BUNDLE = &quot;1&quot; to my local.conf. As I run&nbsp;&nbsp;&nbsp;&nbsp;bitbake core-image-minimal&nbsp;&nbsp;&nbsp;&nbsp;an error happens: Failed to spawn fakeroot worker to run ..../poky/meta/recipes-core/images/core-image-tiny-initramfs.bb: do_image_create_sdcard_symlink No such file or</td><td class="time"><a href="#t2020-08-18T10:48:26" class="time">10:48</a></td></tr>
<tr id="t2020-08-18T10:48:26-2"><th class="nick" style="background: #4b904b">fbre</th><td class="text" style="color: #4b904b">directory ..../yocto/build/tmp/sysroots_components/x86_64/pseudo-native/usr/bin/pseudo ....</td><td class="time"><a href="#t2020-08-18T10:48:26-2" class="time">10:48</a></td></tr>
<tr id="t2020-08-18T10:49:11"><th class="nick" style="background: #4b904b">fbre</th><td class="text" style="color: #4b904b">Any idea what this error could be?&nbsp;&nbsp;NXP uses wic in its version &quot;zeus&quot;.</td><td class="time"><a href="#t2020-08-18T10:49:11" class="time">10:49</a></td></tr>
<tr id="t2020-08-18T10:49:27"><th class="nick" style="background: #4b904b">fbre</th><td class="text" style="color: #4b904b">My platform is aarch64</td><td class="time"><a href="#t2020-08-18T10:49:27" class="time">10:49</a></td></tr>
<tr id="t2020-08-18T10:49:52"><th class="nick" style="background: #4b904b">fbre</th><td class="text" style="color: #4b904b">I mean the target platform</td><td class="time"><a href="#t2020-08-18T10:49:52" class="time">10:49</a></td></tr>
<tr id="t2020-08-18T10:53:50"><th class="nick" style="background: #4b904b">fbre</th><td class="text" style="color: #4b904b">That directory ..../yocto/build/tmp/sysroots_components/x86_64/&nbsp;&nbsp;contains a few subdirs but not that &quot;pseudo-native&quot;.&nbsp;&nbsp;I wonder what that actually is.</td><td class="time"><a href="#t2020-08-18T10:53:50" class="time">10:53</a></td></tr>
<tr id="t2020-08-18T11:00:01"><th class="nick" style="background: #854685">LetoThe2nd</th><td class="text" style="color: #854685">fbre: chances are that whatever your NXP BSP does in this function &quot;do_image_create_sdcard_symlink&quot; is buggy.</td><td class="time"><a href="#t2020-08-18T11:00:01" class="time">11:00</a></td></tr>
<tr id="t2020-08-18T11:00:39"><th class="nick" style="background: #854685">LetoThe2nd</th><td class="text" style="color: #854685">fbre: find that function, read, understand, fix it. or alternatively, complain to your sales/FAE rep. already explained everything to you yesterday....</td><td class="time"><a href="#t2020-08-18T11:00:39" class="time">11:00</a></td></tr>
<tr id="t2020-08-18T11:43:11"><th class="nick" style="background: #4d4d93">zandrey</th><td class="text" style="color: #4d4d93">fbre: This function is located in meta-imx/meta-bsp/classes/image_types_create_sdcard_symlink.bbclass and it creates a symlink to point a &quot;legacy&quot; NXP image names to newly created wic. You can remove it from meta-imx/meta-bsp/conf/layer.conf as you know that your scripts or envs are not going to refer to image via legacy name.</td><td class="time"><a href="#t2020-08-18T11:43:11" class="time">11:43</a></td></tr>
<tr id="t2020-08-18T11:45:08"><th class="nick" style="background: #4d4d93">zandrey</th><td class="text" style="color: #4d4d93">fbre: &quot;as you know&quot; should be read as &quot;if you know&quot; - you have to make sure that from this point on you refer to wic as image file, and not .sdcard</td><td class="time"><a href="#t2020-08-18T11:45:08" class="time">11:45</a></td></tr>
<tr id="t2020-08-18T11:51:51"><th class="nick" style="background: #4b904b">fbre</th><td class="text" style="color: #4b904b">zandrey: yes, with zeus, I don't want to use .sdcard files anymore, only the .wic files from now on</td><td class="time"><a href="#t2020-08-18T11:51:51" class="time">11:51</a></td></tr>
<tr id="t2020-08-18T11:54:35"><th class="nick" style="background: #4b904b">fbre</th><td class="text" style="color: #4b904b">zandrey: FYI, I had to hack that file core-image-tiny-initramfs.bb&nbsp;&nbsp;to add aarch64 to variable COMPATIBLE_HOST</td><td class="time"><a href="#t2020-08-18T11:54:35" class="time">11:54</a></td></tr>
<tr id="t2020-08-18T12:06:12"><th class="nick" style="background: #4d4d93">zandrey</th><td class="text" style="color: #4d4d93">fbre: normally, you should *not* do this for any production image. core-image-tiny-initramfs.bb can be used as an example recipe, and based on it - the custom image recipe should be created. core-image-tiny-initramfs.bb itself is Intel-specific and therefore should not be used for other arch.</td><td class="time"><a href="#t2020-08-18T12:06:12" class="time">12:06</a></td></tr>
<tr id="t2020-08-18T12:12:46"><th class="nick" style="background: #4b904b">fbre</th><td class="text" style="color: #4b904b">zandrey: uhm, I just find core-image-tiny-initramfs useful since it's the only one in poky/meta/recipes-core/images which mounts an overlayfs</td><td class="time"><a href="#t2020-08-18T12:12:46" class="time">12:12</a></td></tr>
<tr id="t2020-08-18T12:14:17"><th class="nick" style="background: #4b904b">fbre</th><td class="text" style="color: #4b904b">zandrey: And since I thought &quot;never touch a running system&quot; I tried to bundle that one via INITRAMFS_IMAGE_BUNDLE</td><td class="time"><a href="#t2020-08-18T12:14:17" class="time">12:14</a></td></tr>
<tr id="t2020-08-18T12:15:02"><th class="nick" style="background: #4d4d93">zandrey</th><td class="text" style="color: #4d4d93">fbre: that's OK, and it is a proper way to go! the only thing I wanted to stress out is that when you create an image - please use core-image-tiny-initramfs as a template and do not hack it directly.</td><td class="time"><a href="#t2020-08-18T12:15:02" class="time">12:15</a></td></tr>
<tr id="t2020-08-18T12:16:39"><th class="nick" style="background: #4b904b">fbre</th><td class="text" style="color: #4b904b">zandrey: (y)&nbsp;&nbsp;yeah, right. That direct hack is actually just as evaluation if I can reach my goal at all</td><td class="time"><a href="#t2020-08-18T12:16:39" class="time">12:16</a></td></tr>
<tr id="t2020-08-18T12:19:13"><th class="nick" style="background: #4b904b">fbre</th><td class="text" style="color: #4b904b">zandrey: By the way: Thanx! bitbake is running now well. :-)&nbsp;&nbsp;I hope it results in an image (consisting also of a kernel where that tiny initramfs is bundled) which I can dd to my SD card and can boot on my i.MX8 evalboard</td><td class="time"><a href="#t2020-08-18T12:19:13" class="time">12:19</a></td></tr>
<tr id="t2020-08-18T12:21:34"><th class="nick" style="background: #4d4d93">zandrey</th><td class="text" style="color: #4d4d93">fbre: Sure! ;)</td><td class="time"><a href="#t2020-08-18T12:21:34" class="time">12:21</a></td></tr>
<tr id="t2020-08-18T12:23:39"><th class="nick" style="background: #4b904b">fbre</th><td class="text" style="color: #4b904b">zandrey: I also wonder why that tiny one is Intel-specific... Is there stuff in it which only works there?</td><td class="time"><a href="#t2020-08-18T12:23:39" class="time">12:23</a></td></tr>
<tr id="t2020-08-18T12:26:35"><th class="nick" style="background: #4d4d93">zandrey</th><td class="text" style="color: #4d4d93">fbre: AFAIK this one uses initramfs-live-install, which uses syslinux, which runs only on IA32. At least this is how it used to be in the past, and I'm not sure if it has changed.</td><td class="time"><a href="#t2020-08-18T12:26:35" class="time">12:26</a></td></tr>
<tr id="t2020-08-18T12:26:58"><th class="nick" style="background: #4d4d93">zandrey</th><td class="text" style="color: #4d4d93">fbre: &quot;uses&quot; is actually &quot;used by&quot; :)</td><td class="time"><a href="#t2020-08-18T12:26:58" class="time">12:26</a></td></tr>
<tr id="t2020-08-18T12:32:21"><th class="nick" style="background: #4b904b">fbre</th><td class="text" style="color: #4b904b">zandrey: ahm, I have a bad feeling about my trial now, if it's useful at all. I don't understand what that syslinux thingy is all about, but it sounds bad if it only runs on IA32</td><td class="time"><a href="#t2020-08-18T12:32:21" class="time">12:32</a></td></tr>
<tr id="t2020-08-18T12:34:06"><th class="nick" style="background: #4b904b">fbre</th><td class="text" style="color: #4b904b">zandrey: The other ready-to-use image was core-image-minimal-initramfs.bb but I can't find calls of mount -t overlayfs</td><td class="time"><a href="#t2020-08-18T12:34:06" class="time">12:34</a></td></tr>
<tr id="t2020-08-18T12:34:19"><th class="nick" style="background: #4b904b">fbre</th><td class="text" style="color: #4b904b">... in its scripts</td><td class="time"><a href="#t2020-08-18T12:34:19" class="time">12:34</a></td></tr>
<tr id="t2020-08-18T12:58:05"><th class="nick" style="background: #4b904b">fbre</th><td class="text" style="color: #4b904b">Cool, now I have two things in my build/tmp/deploy/images/mymachine directory, core-image-minimal-mymachine....wic.bz2&nbsp;&nbsp;and core-image-tiny-initramfs-mymachine....cpio.gz.&nbsp;&nbsp; I think I should use the wic.bz2 file now, right? I suppose the tiny initramfs is already in there</td><td class="time"><a href="#t2020-08-18T12:58:05" class="time">12:58</a></td></tr>
<tr id="t2020-08-18T13:16:33"><th class="nick" style="background: #97974f">bantu</th><td class="text" style="color: #97974f">How does bitbake write to sstate-cache? Is it safe to periodically push the cache to a mirror using rsync or will I end up transferring a lot of temporary data?</td><td class="time"><a href="#t2020-08-18T13:16:33" class="time">13:16</a></td></tr>
<tr id="t2020-08-18T13:18:11"><th class="nick" style="background: #9b519b">neverpanic</th><td class="text" style="color: #9b519b">I've been told in the past multiple writers to the same storage are supported, so that should be fine.</td><td class="time"><a href="#t2020-08-18T13:18:11" class="time">13:18</a></td></tr>
<tr id="t2020-08-18T13:20:16"><th class="nick" style="background: #9b519b">neverpanic</th><td class="text" style="color: #9b519b">That being said, what we do is having the sstate mirror of the last build available as sstate mirror, and once the build is done make the generated sstate cache the new sstate mirror for the next build.</td><td class="time"><a href="#t2020-08-18T13:20:16" class="time">13:20</a></td></tr>
<tr id="t2020-08-18T13:20:54"><th class="nick" style="background: #9b519b">neverpanic</th><td class="text" style="color: #9b519b">this is efficient if you have this available as local filesystem (e.g. using NFS) because bitbake will then create symbolic links from the sstate cache into the sstate mirror, and you can post-process those to expand them.</td><td class="time"><a href="#t2020-08-18T13:20:54" class="time">13:20</a></td></tr>
<tr id="t2020-08-18T14:13:26"><th class="nick" style="background: #4d4d93">zandrey</th><td class="text" style="color: #4d4d93">fbre: You can check the kernel size, if it got substantially bigger - this means initramfs is bundled in. It then should be populated on the boot partition in WIC image</td><td class="time"><a href="#t2020-08-18T14:13:26" class="time">14:13</a></td></tr>
<tr id="t2020-08-18T14:33:27"><th class="nick" style="background: #97974f">bantu</th><td class="text" style="color: #97974f">neverpanic: Ah, yeah. Multiple writer support makes sense since the manual for example suggests using NFS.</td><td class="time"><a href="#t2020-08-18T14:33:27" class="time">14:33</a></td></tr>
<tr id="t2020-08-18T14:34:34"><th class="nick" style="background: #97974f">bantu</th><td class="text" style="color: #97974f">neverpanic: It seems that what your technique achieves is automatic cache purging (of no longer relevant packages).</td><td class="time"><a href="#t2020-08-18T14:34:34" class="time">14:34</a></td></tr>
<tr id="t2020-08-18T14:41:49"><th class="nick" style="background: #8c4a4a">RP</th><td class="text" style="color: #8c4a4a">zeddii: I've not looked at those gcc perf failures any further FWIW</td><td class="time"><a href="#t2020-08-18T14:41:49" class="time">14:41</a></td></tr>
<tr id="t2020-08-18T14:42:18"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">I'm digging around. so all is well.</td><td class="time"><a href="#t2020-08-18T14:42:18" class="time">14:42</a></td></tr>
<tr id="t2020-08-18T14:43:06"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">Also, I may send the 5.8 libc and kernels as a RFC tomorrow. They are all working here, and they won't have changes to make then a default, but they do need some wider builds. I hesitate, because I know the fno-common stuff is still lurking.</td><td class="time"><a href="#t2020-08-18T14:43:06" class="time">14:43</a></td></tr>
<tr id="t2020-08-18T14:43:29"><th class="nick" style="background: #539e9e">paulg</th><td class="text" style="color: #539e9e">damn commoners.</td><td class="time"><a href="#t2020-08-18T14:43:29" class="time">14:43</a></td></tr>
<tr id="t2020-08-18T14:43:46"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">no commoners!</td><td class="time"><a href="#t2020-08-18T14:43:46" class="time">14:43</a></td></tr>
<tr id="t2020-08-18T14:43:53"><th class="nick" style="background: #539e9e">paulg</th><td class="text" style="color: #539e9e">GET OFF MY LAWN!</td><td class="time"><a href="#t2020-08-18T14:43:53" class="time">14:43</a></td></tr>
<tr id="t2020-08-18T14:44:36"><td class="action" colspan="2">* zeddii fires up the bentley for a cruise</td><td><a href="#t2020-08-18T14:44:36" class="time">14:44</a></td></tr>
<tr id="t2020-08-18T14:44:53"><th class="nick" style="background: #a25555">armpit</th><td class="text" style="color: #a25555">you northerners!</td><td class="time"><a href="#t2020-08-18T14:44:53" class="time">14:44</a></td></tr>
<tr id="t2020-08-18T14:45:28"><th class="nick" style="background: #8c4a4a">RP</th><td class="text" style="color: #8c4a4a">zeddii: sounds reasonable to get more of the 5.8 bits out</td><td class="time"><a href="#t2020-08-18T14:45:28" class="time">14:45</a></td></tr>
<tr id="t2020-08-18T14:45:42"><th class="nick" style="background: #8c4a4a">RP</th><td class="text" style="color: #8c4a4a">zeddii: the no-common stuff is odd :/</td><td class="time"><a href="#t2020-08-18T14:45:42" class="time">14:45</a></td></tr>
<tr id="t2020-08-18T14:49:14"><th class="nick" style="background: #9b519b">neverpanic</th><td class="text" style="color: #9b519b">bantu: correct, that's why we're doing it.</td><td class="time"><a href="#t2020-08-18T14:49:14" class="time">14:49</a></td></tr>
<tr id="t2020-08-18T14:58:25"><th class="nick" style="background: #a25555">armpit</th><td class="text" style="color: #a25555">YPTM - armpit is on</td><td class="time"><a href="#t2020-08-18T14:58:25" class="time">14:58</a></td></tr>
<tr id="t2020-08-18T14:58:48"><th class="nick" style="background: #57a657">dl9pf</th><td class="text" style="color: #57a657">YPTM - Jan-Simon is on</td><td class="time"><a href="#t2020-08-18T14:58:48" class="time">14:58</a></td></tr>
<tr id="t2020-08-18T14:59:26"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">YPTM - Joshua Watt here</td><td class="time"><a href="#t2020-08-18T14:59:26" class="time">14:59</a></td></tr>
<tr id="t2020-08-18T15:01:36"><th class="nick" style="background: #854685">LetoThe2nd</th><td class="text" style="color: #854685">YPTM - Josef is on</td><td class="time"><a href="#t2020-08-18T15:01:36" class="time">15:01</a></td></tr>
<tr id="t2020-08-18T15:01:42"><th class="nick" style="background: #adad5b">smurray</th><td class="text" style="color: #adad5b">YPTM - Scott Murray is on</td><td class="time"><a href="#t2020-08-18T15:01:42" class="time">15:01</a></td></tr>
<tr id="t2020-08-18T15:03:58"><th class="nick" style="background: #b15db1">T_UNIX</th><td class="text" style="color: #b15db1">hi</td><td class="time"><a href="#t2020-08-18T15:03:58" class="time">15:03</a></td></tr>
<tr id="t2020-08-18T15:05:21"><th class="nick" style="background: #b15db1">T_UNIX</th><td class="text" style="color: #b15db1">am I the only one facing broken systemd units (e.g. `systemd-resolved`) on most recent Zeus&nbsp;&nbsp;due to `PrivateTMP=yes` and `/var/tmp/` being a symlink?</td><td class="time"><a href="#t2020-08-18T15:05:21" class="time">15:05</a></td></tr>
<tr id="t2020-08-18T15:05:51"><th class="nick" style="background: #b15db1">T_UNIX</th><td class="text" style="color: #b15db1">it *seems* to be <a href="https://www.yoctoproject.org/pipermail/poky/2019-January/011602.html" rel="nofollow">https://www.yoctoproject.org/pipermail/poky/2019-January/011602.html</a></td><td class="time"><a href="#t2020-08-18T15:05:51" class="time">15:05</a></td></tr>
<tr id="t2020-08-18T15:08:33"><th class="nick" style="background: #b15db1">T_UNIX</th><td class="text" style="color: #b15db1">according to the linked systemd issue+fix (<a href="https://github.com/systemd/systemd/commit/7aab22308e0a95a7ad6f73be5fca2ba5c797ab8d" rel="nofollow">https://github.com/systemd/systemd/commit/7aab22308e0a95a7ad6f73be5fca2ba5c797ab8d</a>) that should have been fixed since systemd v239, whereas Zeus uses v243.2</td><td class="time"><a href="#t2020-08-18T15:08:33" class="time">15:08</a></td></tr>
<tr id="t2020-08-18T15:09:34"><th class="nick" style="background: #b15db1">T_UNIX</th><td class="text" style="color: #b15db1">however, removing the symlink `/var/tmp` and providing a `tmpfs` mountpoint (via fstab) at `/var/tmp` instead, resolves the issue.</td><td class="time"><a href="#t2020-08-18T15:09:34" class="time">15:09</a></td></tr>
<tr id="t2020-08-18T15:11:56"><th class="nick" style="background: #5fb4b4">JaMa</th><td class="text" style="color: #5fb4b4">YPTM - Martin Jansa is on as well</td><td class="time"><a href="#t2020-08-18T15:11:56" class="time">15:11</a></td></tr>
<tr id="t2020-08-18T15:23:27"><th class="nick" style="background: #b86161">mattsm</th><td class="text" style="color: #b86161">what is the preferred way to make an INITRAMFS_IMAGE be the default case.... that is no ROOTFS. When I do a 'bitbake my-image' and INITRAMFS_IMAGE=&quot;my-image&quot; you get dependency loops. Is a dummy image the way to go here? Is there an example somewhere?</td><td class="time"><a href="#t2020-08-18T15:23:27" class="time">15:23</a></td></tr>
<tr id="t2020-08-18T15:35:53"><th class="nick" style="background: #a25555">armpit</th><td class="text" style="color: #a25555"><a href="https://bestpractices.coreinfrastructure.org/en/projects?q=yocto" rel="nofollow">https://bestpractices.coreinfrastructure.org/en/projects?q=yocto</a></td><td class="time"><a href="#t2020-08-18T15:35:53" class="time">15:35</a></td></tr>
<tr id="t2020-08-18T15:39:43"><th class="nick" style="background: #62bb62">kergoth</th><td class="text" style="color: #62bb62">huh, interesting</td><td class="time"><a href="#t2020-08-18T15:39:43" class="time">15:39</a></td></tr>
<tr id="t2020-08-18T15:51:11"><th class="nick" style="background: #a25555">armpit</th><td class="text" style="color: #a25555">YPTM - over</td><td class="time"><a href="#t2020-08-18T15:51:11" class="time">15:51</a></td></tr>
<tr id="t2020-08-18T15:52:03"><th class="nick" style="background: #a25555">armpit</th><td class="text" style="color: #a25555">kergoth, its for paulbarker ref. He asked about it</td><td class="time"><a href="#t2020-08-18T15:52:03" class="time">15:52</a></td></tr>
<tr id="t2020-08-18T15:52:45"><th class="nick" style="background: #6464bf">paulbarker</th><td class="text" style="color: #6464bf">armpit: Thanks, I had a look through what we need to do for the silver tier while the call was wrapping up there</td><td class="time"><a href="#t2020-08-18T15:52:45" class="time">15:52</a></td></tr>
<tr id="t2020-08-18T15:55:13"><th class="nick" style="background: #488888">kanavin_home</th><td class="text" style="color: #488888">rburton: RP: I filed a bug for meta-arm kernel failures <a href="https://bugzilla.yoctoproject.org/show_bug.cgi?id=14014" rel="nofollow">https://bugzilla.yoctoproject.org/show_bug.cgi?id=14014</a></td><td class="time"><a href="#t2020-08-18T15:55:13" class="time">15:55</a></td></tr>
<tr id="t2020-08-18T15:55:33"><th class="nick" style="background: #c3c366">moto-timo</th><td class="text" style="color: #c3c366">RP: I added Future Directions link to wiki</td><td class="time"><a href="#t2020-08-18T15:55:33" class="time">15:55</a></td></tr>
<tr id="t2020-08-18T15:55:47"><th class="nick" style="background: #8c4a4a">RP</th><td class="text" style="color: #8c4a4a">moto-timo: thanks!</td><td class="time"><a href="#t2020-08-18T15:55:47" class="time">15:55</a></td></tr>
<tr id="t2020-08-18T15:55:49"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">this perf issues is super strange. it only happens on first run. I can rm *.o in perf and they are rebuilt, but the error doesn't show the 2nd time.</td><td class="time"><a href="#t2020-08-18T15:55:49" class="time">15:55</a></td></tr>
<tr id="t2020-08-18T15:56:10"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">if I have to cleansstate between runs, I can't hack up the code to track it down</td><td class="time"><a href="#t2020-08-18T15:56:10" class="time">15:56</a></td></tr>
<tr id="t2020-08-18T15:56:13"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">what a PITA.</td><td class="time"><a href="#t2020-08-18T15:56:13" class="time">15:56</a></td></tr>
<tr id="t2020-08-18T15:56:30"><th class="nick" style="background: #8c4a4a">RP</th><td class="text" style="color: #8c4a4a">zeddii: that does sound really strange :/</td><td class="time"><a href="#t2020-08-18T15:56:30" class="time">15:56</a></td></tr>
<tr id="t2020-08-18T15:56:48"><th class="nick" style="background: #8c4a4a">RP</th><td class="text" style="color: #8c4a4a">zeddii: almost race like</td><td class="time"><a href="#t2020-08-18T15:56:48" class="time">15:56</a></td></tr>
<tr id="t2020-08-18T15:57:28"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">yep. I think I finally just triggered it. there are some generated files. so I removed them, and I think the error just came out again.</td><td class="time"><a href="#t2020-08-18T15:57:28" class="time">15:57</a></td></tr>
<tr id="t2020-08-18T15:57:41"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">but I've been around in so many circles, I haven't convinced myself yet :D</td><td class="time"><a href="#t2020-08-18T15:57:41" class="time">15:57</a></td></tr>
<tr id="t2020-08-18T15:59:06"><th class="nick" style="background: #a25555">armpit</th><td class="text" style="color: #a25555">zeddii, is there a -fno-PITA option ?</td><td class="time"><a href="#t2020-08-18T15:59:06" class="time">15:59</a></td></tr>
<tr id="t2020-08-18T15:59:21"><th class="nick" style="background: #c668c6">fray</th><td class="text" style="color: #c668c6">armpit I thought that options was '; rm -rf /'</td><td class="time"><a href="#t2020-08-18T15:59:21" class="time">15:59</a></td></tr>
<tr id="t2020-08-18T16:01:10"><th class="nick" style="background: #407a40">zeddii</th><td class="text" style="color: #407a40">its definitely the generated files.</td><td class="time"><a href="#t2020-08-18T16:01:10" class="time">16:01</a></td></tr>
<tr id="t2020-08-18T16:04:25"><th class="nick" style="background: #488888">kanavin_home</th><td class="text" style="color: #488888">jonmason: FYI <a href="https://bugzilla.yoctoproject.org/show_bug.cgi?id=14014" rel="nofollow">https://bugzilla.yoctoproject.org/show_bug.cgi?id=14014</a></td><td class="time"><a href="#t2020-08-18T16:04:25" class="time">16:04</a></td></tr>
<tr id="t2020-08-18T17:04:43"><th class="nick" style="background: #6acaca">ayaka</th><td class="text" style="color: #6acaca">is there a simple way to update the toolchain(sdk) ? for example through the package management ?</td><td class="time"><a href="#t2020-08-18T17:04:43" class="time">17:04</a></td></tr>
<tr id="t2020-08-18T17:08:24"><th class="nick" style="background: #9b519b">neverpanic</th><td class="text" style="color: #9b519b">I did that a while ago by containerizing the entire SDK and shipping a container launcher with it. It did work, but had its caveats.</td><td class="time"><a href="#t2020-08-18T17:08:24" class="time">17:08</a></td></tr>
<tr id="t2020-08-18T17:08:37"><th class="nick" style="background: #9b519b">neverpanic</th><td class="text" style="color: #9b519b">Easiest approach is probably packaging the entire SDK into a docker container.</td><td class="time"><a href="#t2020-08-18T17:08:37" class="time">17:08</a></td></tr>
<tr id="t2020-08-18T17:13:44"><td class="nickchange" colspan="2">*** gsalazar72 is now known as gsalazar</td><td><a href="#t2020-08-18T17:13:44" class="time">17:13</a></td></tr>
<tr id="t2020-08-18T17:57:02"><th class="nick" style="background: #ce6c6c">jonmason</th><td class="text" style="color: #ce6c6c">kanavin_home: the good news is that earlier this morning Juno dropped use of that kernel</td><td class="time"><a href="#t2020-08-18T17:57:02" class="time">17:57</a></td></tr>
<tr id="t2020-08-18T18:44:56"><th class="nick" style="background: #488888">kanavin_home</th><td class="text" style="color: #488888">jonmason: I think there are upstream fixes in stable kernels for this, so any vendor kernel just needs to rebase</td><td class="time"><a href="#t2020-08-18T18:44:56" class="time">18:44</a></td></tr>
<tr id="t2020-08-18T18:45:58"><th class="nick" style="background: #488888">kanavin_home</th><td class="text" style="color: #488888">jonmason: 35b34d264cb3 scripts/dtc: Remove redundant YYLOC global declaration</td><td class="time"><a href="#t2020-08-18T18:45:58" class="time">18:45</a></td></tr>
<tr id="t2020-08-18T18:45:58-2"><th class="nick" style="background: #488888">kanavin_home</th><td class="text" style="color: #488888"> is the one you want probably</td><td class="time"><a href="#t2020-08-18T18:45:58-2" class="time">18:45</a></td></tr>
<tr id="t2020-08-18T18:47:43"><th class="nick" style="background: #ce6c6c">jonmason</th><td class="text" style="color: #ce6c6c">the juno kernel is homegrown, which is why we've been pushing for it to get replaced (which is what that patch is doing).&nbsp;&nbsp;I'll check the other kernels we have, but honestly I think this is a great excuse to get rid of them :)</td><td class="time"><a href="#t2020-08-18T18:47:43" class="time">18:47</a></td></tr>
<tr id="t2020-08-18T18:52:43"><th class="nick" style="background: #488888">kanavin_home</th><td class="text" style="color: #488888">jonmason: meta-arm-bsp/conf/machine/n1sdp.conf is still an issue</td><td class="time"><a href="#t2020-08-18T18:52:43" class="time">18:52</a></td></tr>
<tr id="t2020-08-18T18:53:04"><th class="nick" style="background: #488888">kanavin_home</th><td class="text" style="color: #488888">so I had to reopen the bug unfortunately</td><td class="time"><a href="#t2020-08-18T18:53:04" class="time">18:53</a></td></tr>
<tr id="t2020-08-18T18:53:09"><th class="nick" style="background: #ce6c6c">jonmason</th><td class="text" style="color: #ce6c6c">figures....time to beatup some internal people :)</td><td class="time"><a href="#t2020-08-18T18:53:09" class="time">18:53</a></td></tr>
<tr id="t2020-08-18T18:53:19"><th class="nick" style="background: #488888">kanavin_home</th><td class="text" style="color: #488888">cheers</td><td class="time"><a href="#t2020-08-18T18:53:19" class="time">18:53</a></td></tr>
<tr id="t2020-08-18T18:53:21"><th class="nick" style="background: #ce6c6c">jonmason</th><td class="text" style="color: #ce6c6c">well, it is for a different platform</td><td class="time"><a href="#t2020-08-18T18:53:21" class="time">18:53</a></td></tr>
<tr id="t2020-08-18T18:53:34"><th class="nick" style="background: #ce6c6c">jonmason</th><td class="text" style="color: #ce6c6c">but no worries, I'll get it handled</td><td class="time"><a href="#t2020-08-18T18:53:34" class="time">18:53</a></td></tr>
<tr id="t2020-08-18T18:53:46"><th class="nick" style="background: #488888">kanavin_home</th><td class="text" style="color: #488888">thanks :)</td><td class="time"><a href="#t2020-08-18T18:53:46" class="time">18:53</a></td></tr>
<tr id="t2020-08-18T18:57:14"><th class="nick" style="background: #6ed16e">roussinm</th><td class="text" style="color: #6ed16e">I'm having a weird issue with the hashserve, when it's active I get sstate-cache siginfo which are older then the current sstate-cache that exist on our shared sstate-cache server. The diffsigs shows a diff on relocatable_native_pcfile patch from 5 months ago on Zeus.</td><td class="time"><a href="#t2020-08-18T18:57:14" class="time">18:57</a></td></tr>
<tr id="t2020-08-18T18:59:47"><th class="nick" style="background: #6ed16e">roussinm</th><td class="text" style="color: #6ed16e">So If I active the hashserve, it retriggers a build for more than 50% of the recipes.</td><td class="time"><a href="#t2020-08-18T18:59:47" class="time">18:59</a></td></tr>
<tr id="t2020-08-18T18:59:58"><th class="nick" style="background: #6ed16e">roussinm</th><td class="text" style="color: #6ed16e">even the basic low level ones.</td><td class="time"><a href="#t2020-08-18T18:59:58" class="time">18:59</a></td></tr>
<tr id="t2020-08-18T19:00:33"><th class="nick" style="background: #6ed16e">roussinm</th><td class="text" style="color: #6ed16e">When I deactivate the hashserve, I get ~99% sstate-cache match.</td><td class="time"><a href="#t2020-08-18T19:00:33" class="time">19:00</a></td></tr>
<tr id="t2020-08-18T19:32:31"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">roussinm: Hmm, I wonder if your hashes are marked equivalent to things not in sstate</td><td class="time"><a href="#t2020-08-18T19:32:31" class="time">19:32</a></td></tr>
<tr id="t2020-08-18T19:33:14"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">roussinm: If you let the build complete, does it get a complete match on the next build?</td><td class="time"><a href="#t2020-08-18T19:33:14" class="time">19:33</a></td></tr>
<tr id="t2020-08-18T19:33:26"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">s/complete/100%/</td><td class="time"><a href="#t2020-08-18T19:33:26" class="time">19:33</a></td></tr>
<tr id="t2020-08-18T19:35:31"><th class="nick" style="background: #6ed16e">roussinm</th><td class="text" style="color: #6ed16e">JPEW: with the hashserve active? I'm redoing a test build here, I'll be able to anwser you shortly without assumptions, but my gut feeling is that it should be a 100% complete match, no?</td><td class="time"><a href="#t2020-08-18T19:35:31" class="time">19:35</a></td></tr>
<tr id="t2020-08-18T19:36:40"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">roussinm: I would hope so</td><td class="time"><a href="#t2020-08-18T19:36:40" class="time">19:36</a></td></tr>
<tr id="t2020-08-18T19:54:25"><th class="nick" style="background: #6ed16e">roussinm</th><td class="text" style="color: #6ed16e">JPEW: Is there any relation between the sstate-cache server and the hashserve? We do clean our sstate-server from time to time, there is a good chance hashserver points to something we deleted in the server.</td><td class="time"><a href="#t2020-08-18T19:54:25" class="time">19:54</a></td></tr>
<tr id="t2020-08-18T19:55:20"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">roussinm: Yes, they are linked</td><td class="time"><a href="#t2020-08-18T19:55:20" class="time">19:55</a></td></tr>
<tr id="t2020-08-18T19:56:36"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">If a sstate object referenced by the hash equiv server is missing, I think the build should produce one to replace it</td><td class="time"><a href="#t2020-08-18T19:56:36" class="time">19:56</a></td></tr>
<tr id="t2020-08-18T19:56:58"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">Which is why you should have a 100% hit rate after your build</td><td class="time"><a href="#t2020-08-18T19:56:58" class="time">19:56</a></td></tr>
<tr id="t2020-08-18T19:58:16"><th class="nick" style="background: #6ed16e">roussinm</th><td class="text" style="color: #6ed16e">but if it the references an old sstate object? My case was the relocatable_native_pcfile, which doesn't change the binary output of the recipe, but changes the recipe. So It changes the hashes, but doesn't change the binary.</td><td class="time"><a href="#t2020-08-18T19:58:16" class="time">19:58</a></td></tr>
<tr id="t2020-08-18T19:59:24"><th class="nick" style="background: #6ed16e">roussinm</th><td class="text" style="color: #6ed16e">and the hashserve seems to prefer the old version sstate object from the hashserve then the new one on the sstate-server</td><td class="time"><a href="#t2020-08-18T19:59:24" class="time">19:59</a></td></tr>
<tr id="t2020-08-18T20:01:08"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">Right, so bitbake asks the server &quot;what unihash is equivalent to taskhash A&quot;, and the server will respond with the oldest unihash that has the same output hash as A</td><td class="time"><a href="#t2020-08-18T20:01:08" class="time">20:01</a></td></tr>
<tr id="t2020-08-18T20:02:30"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">So, if you have taskhash A, and then you change recloctable_native_pcfile and it produces taskhash B, but B generates the same output hash as A, the server will mark B as equivalent to A and return A if B is ever seen again</td><td class="time"><a href="#t2020-08-18T20:02:30" class="time">20:02</a></td></tr>
<tr id="t2020-08-18T20:03:15"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">Of course, if A doesn't exist in the sstate cache that means it has to be built, but the server doesn't really have a good way of knowing that</td><td class="time"><a href="#t2020-08-18T20:03:15" class="time">20:03</a></td></tr>
<tr id="t2020-08-18T20:04:02"><th class="nick" style="background: #6ed16e">roussinm</th><td class="text" style="color: #6ed16e">But if A doesn't exist it knows about the equivalent with B, can it not try to fetch B?</td><td class="time"><a href="#t2020-08-18T20:04:02" class="time">20:04</a></td></tr>
<tr id="t2020-08-18T20:07:10"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">Theoretically, yes. However, hash equiv and sstate aren't that integrated at the moment. Their linkage is pretty weak (and mostly just what I've described). Hash equiv doesn't know the contents of the sstate cache, and the sstate cache code doesn't really know much about hash equiv</td><td class="time"><a href="#t2020-08-18T20:07:10" class="time">20:07</a></td></tr>
<tr id="t2020-08-18T20:08:41"><th class="nick" style="background: #6ed16e">roussinm</th><td class="text" style="color: #6ed16e">Ok fair enough, soo deleting old sstate-object from our server is not helping our situation I guess.</td><td class="time"><a href="#t2020-08-18T20:08:41" class="time">20:08</a></td></tr>
<tr id="t2020-08-18T20:09:18"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">roussinm: Ya, probably not. Sorry</td><td class="time"><a href="#t2020-08-18T20:09:18" class="time">20:09</a></td></tr>
<tr id="t2020-08-18T20:09:52"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">Like I said, it should create the missing objects, but that doesn't save you from building them again</td><td class="time"><a href="#t2020-08-18T20:09:52" class="time">20:09</a></td></tr>
<tr id="t2020-08-18T20:10:49"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">roussinm: Hmm, you might also be able to write a script that deletes hash equiv entries from the database that no longer exist in sstate....</td><td class="time"><a href="#t2020-08-18T20:10:49" class="time">20:10</a></td></tr>
<tr id="t2020-08-18T20:11:08"><th class="nick" style="background: #6ed16e">roussinm</th><td class="text" style="color: #6ed16e">That's what we were thinking of doing at this point.</td><td class="time"><a href="#t2020-08-18T20:11:08" class="time">20:11</a></td></tr>
<tr id="t2020-08-18T20:11:32"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">I don't think it would be terribly hard. It's a fairly simple sqlite database</td><td class="time"><a href="#t2020-08-18T20:11:32" class="time">20:11</a></td></tr>
<tr id="t2020-08-18T20:12:08"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">The queries to pull things out are complex, but thats because I tried to keep each table row agnostic about the other rows</td><td class="time"><a href="#t2020-08-18T20:12:08" class="time">20:12</a></td></tr>
<tr id="t2020-08-18T20:12:53"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">So you should be able to simply delete rows that don't have a matching sstate object and the server will automatically fall back to the next oldest equivalent hash</td><td class="time"><a href="#t2020-08-18T20:12:53" class="time">20:12</a></td></tr>
<tr id="t2020-08-18T20:14:40"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">roussinm: If you do write a script please share it :)</td><td class="time"><a href="#t2020-08-18T20:14:40" class="time">20:14</a></td></tr>
<tr id="t2020-08-18T20:15:17"><th class="nick" style="background: #6ed16e">roussinm</th><td class="text" style="color: #6ed16e">JPEW: I'll try to do it! That script should live in bitbake repository right?</td><td class="time"><a href="#t2020-08-18T20:15:17" class="time">20:15</a></td></tr>
<tr id="t2020-08-18T20:15:26"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">Probably</td><td class="time"><a href="#t2020-08-18T20:15:26" class="time">20:15</a></td></tr>
<tr id="t2020-08-18T20:15:31"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">Well.... maybe</td><td class="time"><a href="#t2020-08-18T20:15:31" class="time">20:15</a></td></tr>
<tr id="t2020-08-18T20:15:36"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">I'm not sure</td><td class="time"><a href="#t2020-08-18T20:15:36" class="time">20:15</a></td></tr>
<tr id="t2020-08-18T20:15:47"><th class="nick" style="background: #6ed16e">roussinm</th><td class="text" style="color: #6ed16e">That's where the hashserver bin is, right?</td><td class="time"><a href="#t2020-08-18T20:15:47" class="time">20:15</a></td></tr>
<tr id="t2020-08-18T20:32:46"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">roussinm: Ya, but not the sstate management, so it's a little weird :)</td><td class="time"><a href="#t2020-08-18T20:32:46" class="time">20:32</a></td></tr>
<tr id="t2020-08-18T20:35:15"><th class="nick" style="background: #6ed16e">roussinm</th><td class="text" style="color: #6ed16e">right, poky/scripts</td><td class="time"><a href="#t2020-08-18T20:35:15" class="time">20:35</a></td></tr>
<tr id="t2020-08-18T20:58:37"><th class="nick" style="background: #97974f">bantu</th><td class="text" style="color: #97974f">neverpanic: My builds run on GitLab CI. Right now I rsync the cache of master branch builds to a central machine, where the cache is served via http. I am considering switching from executing rsync in parallel to the build as this should save some wallclock time.</td><td class="time"><a href="#t2020-08-18T20:58:37" class="time">20:58</a></td></tr>
<tr id="t2020-08-18T20:58:45"><th class="nick" style="background: #6ed16e">roussinm</th><td class="text" style="color: #6ed16e">JPEW: Do you think the sstate-cache system and the hashserve will merge together at some point? It feels redundant to have two sstate cache when I think we could combine both?</td><td class="time"><a href="#t2020-08-18T20:58:45" class="time">20:58</a></td></tr>
<tr id="t2020-08-18T20:59:38"><th class="nick" style="background: #5959a9">JPEW</th><td class="text" style="color: #5959a9">It's been discussed before; I think the harder part there is something that still works for every one and scales well</td><td class="time"><a href="#t2020-08-18T20:59:38" class="time">20:59</a></td></tr>
<tr id="t2020-08-18T21:01:04"><th class="nick" style="background: #6ed16e">roussinm</th><td class="text" style="color: #6ed16e">So the hashserve is more of patch on top of the existing system?</td><td class="time"><a href="#t2020-08-18T21:01:04" class="time">21:01</a></td></tr>
<tr id="t2020-08-18T21:03:25"><th class="nick" style="background: #97974f">bantu</th><td class="text" style="color: #97974f">neverpanic: *considering switching to executing rsync in parallel to the build</td><td class="time"><a href="#t2020-08-18T21:03:25" class="time">21:03</a></td></tr>
<tr id="t2020-08-18T21:26:57"><th class="nick" style="background: #7070d5">jadax</th><td class="text" style="color: #7070d5">Hi, I've got custom yocto distribution: Linux arria10 5.4.44. I'm trying to mount A2 raw / AOS filesystem, do you know if it's supported?</td><td class="time"><a href="#t2020-08-18T21:26:57" class="time">21:26</a></td></tr>
<tr id="t2020-08-18T21:53:15"><th class="nick" style="background: #d9d972">khem</th><td class="text" style="color: #d9d972">jadax: whats in a2 partition ? I assume bootloader and its raw so you will dd an image into it and then perhaps point kernel to boot init from it may be ?</td><td class="time"><a href="#t2020-08-18T21:53:15" class="time">21:53</a></td></tr>
<tr id="t2020-08-18T21:58:26"><th class="nick" style="background: #4d4d93">zandrey</th><td class="text" style="color: #4d4d93">jadax, khem: this is indeed a raw partition, which is a pure creation of Altera/Intel. This is where the preloader for bootrom is stored.</td><td class="time"><a href="#t2020-08-18T21:58:26" class="time">21:58</a></td></tr>
<tr id="t2020-08-18T21:59:23"><th class="nick" style="background: #4d4d93">zandrey</th><td class="text" style="color: #4d4d93">jadax: if you need to update a preloader - you can dd a binary onto it, there is no way you can use it as a mount point.</td><td class="time"><a href="#t2020-08-18T21:59:23" class="time">21:59</a></td></tr>
<tr id="t2020-08-18T23:17:10"><td class="part" colspan="2">*** beneth &lt;beneth!~beneth@irc.beneth.fr&gt; has left #yocto</td><td><a href="#t2020-08-18T23:17:10" class="time">23:17</a></td></tr>
</table>
<div class="navigation"> <a href="%23yocto.2020-08-17.log.html">&#171; Monday, 2020-08-17</a> <a href="index.html">Index</a> <a href="%23yocto.2020-08-19.log.html">Wednesday, 2020-08-19 &#187;</a> </div>

<div class="generatedby">
<p>Generated by irclog2html.py 2.17.2 by <a href="mailto:marius@pov.lt">Marius Gedminas</a>
 - find it at <a href="https://mg.pov.lt/irclog2html/">https://mg.pov.lt/irclog2html/</a>!</p>
</div>
</body>
</html>
