<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Thursday, 2020-08-20</title>
  <link rel="stylesheet" href="irclog.css" />
  <meta name="generator" content="irclog2html.py 2.17.2 by Marius Gedminas" />
  <meta name="version" content="2.17.2 - 2019-04-23" />
</head>
<body>
<h1>Thursday, 2020-08-20</h1>
<div class="navigation"> <a href="%23yocto.2020-08-19.log.html">&#171; Wednesday, 2020-08-19</a> <a href="index.html">Index</a> <a href="%23yocto.2020-08-21.log.html">Friday, 2020-08-21 &#187;</a> </div>
<table class="irclog">
<tr id="t2020-08-20T02:34:23"><td class="nickchange" colspan="2">*** maze-BUG1 is now known as maze-BUG</td><td><a href="#t2020-08-20T02:34:23" class="time">02:34</a></td></tr>
<tr id="t2020-08-20T03:04:15"><th class="nick" style="background: #407a40">robbawebba</th><td class="text" style="color: #407a40">khem: Thanks for your help! I'll give that a shot.</td><td class="time"><a href="#t2020-08-20T03:04:15" class="time">03:04</a></td></tr>
<tr id="t2020-08-20T05:33:07"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">Any suggestion about yocto with gcc 9.3 ;</td><td class="time"><a href="#t2020-08-20T05:33:07" class="time">05:33</a></td></tr>
<tr id="t2020-08-20T05:33:07-2"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">when I build something found that gcc didn't fetch sysroot/usr/include</td><td class="time"><a href="#t2020-08-20T05:33:07-2" class="time">05:33</a></td></tr>
<tr id="t2020-08-20T05:45:32"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">And I really found the define of sysroot in run.do_compile:</td><td class="time"><a href="#t2020-08-20T05:45:32" class="time">05:45</a></td></tr>
<tr id="t2020-08-20T05:46:25"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">export CC=&quot;aarch64-oe-linux-gcc -march=armv8-a -mcpu=cortex-a57 -mtune=cortex-a57 --sysroot=/local/mnt/workspace/poky/build/tmp-glibc/work/oe-linux/display-tests/git-r1/recipe-sysroot&quot;</td><td class="time"><a href="#t2020-08-20T05:46:25" class="time">05:46</a></td></tr>
<tr id="t2020-08-20T06:20:05"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">maze-BUG: what suggestion do you need</td><td class="time"><a href="#t2020-08-20T06:20:05" class="time">06:20</a></td></tr>
<tr id="t2020-08-20T06:20:36"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">khem: en, Any way could add&nbsp;&nbsp;--sysroot to gcc build</td><td class="time"><a href="#t2020-08-20T06:20:36" class="time">06:20</a></td></tr>
<tr id="t2020-08-20T06:26:56"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">I have try to add CFLAGS&nbsp;&nbsp;in my bbfile, but doesn't work when compiling.</td><td class="time"><a href="#t2020-08-20T06:26:56" class="time">06:26</a></td></tr>
<tr id="t2020-08-20T06:46:29"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">you do not need that if you use CC variable its already added to it</td><td class="time"><a href="#t2020-08-20T06:46:29" class="time">06:46</a></td></tr>
<tr id="t2020-08-20T06:50:09"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">khem: Yes, What you said is right.</td><td class="time"><a href="#t2020-08-20T06:50:09" class="time">06:50</a></td></tr>
<tr id="t2020-08-20T06:50:10"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">run.do_compile:</td><td class="time"><a href="#t2020-08-20T06:50:10" class="time">06:50</a></td></tr>
<tr id="t2020-08-20T06:50:10-2"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">export CC=&quot;aarch64-oe-linux-gcc -march=armv8-a -mcpu=cortex-a57 -mtune=cortex-a57 --sysroot=/local/mnt/workspace/poky/build/tmp-glibc/work/oe-linux/display-tests/git-r1/recipe-sysroot&quot;</td><td class="time"><a href="#t2020-08-20T06:50:10-2" class="time">06:50</a></td></tr>
<tr id="t2020-08-20T06:50:10-3"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">but log.do_compile:</td><td class="time"><a href="#t2020-08-20T06:50:10-3" class="time">06:50</a></td></tr>
<tr id="t2020-08-20T06:50:10-4"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e"> fatal error: sys/mman.h: No such fi&nbsp;&nbsp;&nbsp;&nbsp;le or directory</td><td class="time"><a href="#t2020-08-20T06:50:10-4" class="time">06:50</a></td></tr>
<tr id="t2020-08-20T06:50:10-5"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e"> 10&nbsp;&nbsp;&nbsp;&nbsp; 6 | #include &lt;sys/mman.h&gt;</td><td class="time"><a href="#t2020-08-20T06:50:10-5" class="time">06:50</a></td></tr>
<tr id="t2020-08-20T06:51:28"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">are you using SDK ?</td><td class="time"><a href="#t2020-08-20T06:51:28" class="time">06:51</a></td></tr>
<tr id="t2020-08-20T06:51:50"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">or are you building using yocto build system&nbsp;&nbsp;itself</td><td class="time"><a href="#t2020-08-20T06:51:50" class="time">06:51</a></td></tr>
<tr id="t2020-08-20T06:52:21"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">khem: This building on yocto build system with gcc9.3</td><td class="time"><a href="#t2020-08-20T06:52:21" class="time">06:52</a></td></tr>
<tr id="t2020-08-20T06:52:37"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">And with cmake</td><td class="time"><a href="#t2020-08-20T06:52:37" class="time">06:52</a></td></tr>
<tr id="t2020-08-20T06:52:59"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">yocto build system ---&gt;cmake ---&gt;gcc</td><td class="time"><a href="#t2020-08-20T06:52:59" class="time">06:52</a></td></tr>
<tr id="t2020-08-20T06:58:50"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">maze-BUG: ok can you show your recipe? are you doing 'inherit cmake' in recipe ?</td><td class="time"><a href="#t2020-08-20T06:58:50" class="time">06:58</a></td></tr>
<tr id="t2020-08-20T07:04:18"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">khem: vpaste can't use on my computer</td><td class="time"><a href="#t2020-08-20T07:04:18" class="time">07:04</a></td></tr>
<tr id="t2020-08-20T07:04:19"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">&quot;are you doing 'inherit cmake' in recipe ?&quot; YES</td><td class="time"><a href="#t2020-08-20T07:04:19" class="time">07:04</a></td></tr>
<tr id="t2020-08-20T07:05:02"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">Just copy some command</td><td class="time"><a href="#t2020-08-20T07:05:02" class="time">07:05</a></td></tr>
<tr id="t2020-08-20T07:05:02-2"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">SRC_DIR = &quot;${SRC_DIR_ROOT}/display/display-tests/&quot;</td><td class="time"><a href="#t2020-08-20T07:05:02-2" class="time">07:05</a></td></tr>
<tr id="t2020-08-20T07:05:02-3"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">S = &quot;${WORKDIR}/display/display-tests/&quot;</td><td class="time"><a href="#t2020-08-20T07:05:02-3" class="time">07:05</a></td></tr>
<tr id="t2020-08-20T07:05:02-4"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">SRC_URI = &quot;file://display/display-tests/&quot;</td><td class="time"><a href="#t2020-08-20T07:05:02-4" class="time">07:05</a></td></tr>
<tr id="t2020-08-20T07:05:52"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">OECMAKE_SOURCEPATH = &quot;${S}&quot;</td><td class="time"><a href="#t2020-08-20T07:05:52" class="time">07:05</a></td></tr>
<tr id="t2020-08-20T07:05:52-2"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">OECMAKE_BUILDPATH = &quot;${WORKDIR}/build&quot;</td><td class="time"><a href="#t2020-08-20T07:05:52-2" class="time">07:05</a></td></tr>
<tr id="t2020-08-20T07:05:52-3"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">EXTRA_OECONF += &quot; --with-sanitized-headers=${STAGING_KERNEL_BUILDDIR}/usr/include&quot;</td><td class="time"><a href="#t2020-08-20T07:05:52-3" class="time">07:05</a></td></tr>
<tr id="t2020-08-20T07:05:52-4"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">CPPFLAGS += &quot;-DTARGET_HEADLESS&quot;</td><td class="time"><a href="#t2020-08-20T07:05:52-4" class="time">07:05</a></td></tr>
<tr id="t2020-08-20T07:05:52-5"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">CPPFLAGS += &quot;-I${STAGING_INCDIR}/libdrm&quot;</td><td class="time"><a href="#t2020-08-20T07:05:52-5" class="time">07:05</a></td></tr>
<tr id="t2020-08-20T07:07:14"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">EXTRA_OECMAKE = &quot;\</td><td class="time"><a href="#t2020-08-20T07:07:14" class="time">07:07</a></td></tr>
<tr id="t2020-08-20T07:07:14-2"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-DSYSROOT_LIBDIR:STRING=${STAGING_LIBDIR} \</td><td class="time"><a href="#t2020-08-20T07:07:14-2" class="time">07:07</a></td></tr>
<tr id="t2020-08-20T07:07:14-3"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-DSYSROOT_INCLUDEDIR:STRING=${STAGING_INCDIR} \</td><td class="time"><a href="#t2020-08-20T07:07:14-3" class="time">07:07</a></td></tr>
<tr id="t2020-08-20T07:07:14-4"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-DCOMPONENTS_INCDIR:STRING=${COMPONENTS_DIR} \</td><td class="time"><a href="#t2020-08-20T07:07:14-4" class="time">07:07</a></td></tr>
<tr id="t2020-08-20T07:07:14-5"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-DKERNEL_BUILDDIR:STRING=${STAGING_KERNEL_BUILDDIR} \</td><td class="time"><a href="#t2020-08-20T07:07:14-5" class="time">07:07</a></td></tr>
<tr id="t2020-08-20T07:07:14-6"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-DWAYLANDBUFFERBACKEND_PATH=${STAGING_INCDIR} \</td><td class="time"><a href="#t2020-08-20T07:07:14-6" class="time">07:07</a></td></tr>
<tr id="t2020-08-20T07:07:14-7"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-DALIGNMENT=64 \</td><td class="time"><a href="#t2020-08-20T07:07:14-7" class="time">07:07</a></td></tr>
<tr id="t2020-08-20T07:07:15"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">&quot;</td><td class="time"><a href="#t2020-08-20T07:07:15" class="time">07:07</a></td></tr>
<tr id="t2020-08-20T07:07:19"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">just this</td><td class="time"><a href="#t2020-08-20T07:07:19" class="time">07:07</a></td></tr>
<tr id="t2020-08-20T07:08:57"><th class="nick" style="background: #854685">erbo</th><td class="text" style="color: #854685">maze-BUG: in log.do_compile or run.do_compile, can you see the actual gcc command that it run?</td><td class="time"><a href="#t2020-08-20T07:08:57" class="time">07:08</a></td></tr>
<tr id="t2020-08-20T07:10:33"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">get rid of -DSYSROOT_LIBDIR and -DSYSROOT_INCLUDEDIR from EXTRA_OECMAKE</td><td class="time"><a href="#t2020-08-20T07:10:33" class="time">07:10</a></td></tr>
<tr id="t2020-08-20T07:11:41"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">khem: OK. Let me try</td><td class="time"><a href="#t2020-08-20T07:11:41" class="time">07:11</a></td></tr>
<tr id="t2020-08-20T07:11:45"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">erbo: YES</td><td class="time"><a href="#t2020-08-20T07:11:45" class="time">07:11</a></td></tr>
<tr id="t2020-08-20T07:12:10"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">erbo: In log.do_compile , didn't have --sysroot</td><td class="time"><a href="#t2020-08-20T07:12:10" class="time">07:12</a></td></tr>
<tr id="t2020-08-20T07:12:54"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">erbo: In run.do_compile, cflag or cppflag have --sysroot</td><td class="time"><a href="#t2020-08-20T07:12:54" class="time">07:12</a></td></tr>
<tr id="t2020-08-20T07:17:41"><th class="nick" style="background: #42427e">maze-BUG</th><td class="text" style="color: #42427e">khem: remove -DSYSROOT_LIBDIR&nbsp;&nbsp;-DSYSROOT_INCLUDEDIR, still error with no such file.</td><td class="time"><a href="#t2020-08-20T07:17:41" class="time">07:17</a></td></tr>
<tr id="t2020-08-20T07:35:54"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">Hi! And every day the groundhog says hello with the question is anybody here who knows about bundling an initramfs to the kernel via INITRAMFS_IMAGE_BUNDLE? Even after my upgrade to &quot;zeus&quot; it does not work. My description is here: <a href="https://community.nxp.com/message/1355297" rel="nofollow">https://community.nxp.com/message/1355297</a> X)</td><td class="time"><a href="#t2020-08-20T07:35:54" class="time">07:35</a></td></tr>
<tr id="t2020-08-20T07:38:07"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">I think both images are bitbaked, but the initramfs image is not added to the kernel for any unknown reasons. Maybe it's just a little magic configuration entry which is still needed</td><td class="time"><a href="#t2020-08-20T07:38:07" class="time">07:38</a></td></tr>
<tr id="t2020-08-20T07:47:32"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">maze-BUG: I wonder if your CMakeLists.txt is doing something funky with setting CC/CXX vars</td><td class="time"><a href="#t2020-08-20T07:47:32" class="time">07:47</a></td></tr>
<tr id="t2020-08-20T08:08:24"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">poky/scripts/lib/wic contains several plugins. Do you know how I can find out which one is used for me?</td><td class="time"><a href="#t2020-08-20T08:08:24" class="time">08:08</a></td></tr>
<tr id="t2020-08-20T08:14:02"><th class="nick" style="background: #8c4a4a">Hanky</th><td class="text" style="color: #8c4a4a">Hey there, have a small simple mbedtls example file. CMakeLists created, built successfully via make. Added this project via devtool add XY, but when trying to bitbake the image the do_compile can't find the mbedtls/config.h located in /usr/include/mbedtls. Yocto beginner, sorry. ;)</td><td class="time"><a href="#t2020-08-20T08:14:02" class="time">08:14</a></td></tr>
<tr id="t2020-08-20T08:15:32"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">Hanky: probably just missing a DEPENDS on mbedtls</td><td class="time"><a href="#t2020-08-20T08:15:32" class="time">08:15</a></td></tr>
<tr id="t2020-08-20T08:16:53"><th class="nick" style="background: #8c4a4a">Hanky</th><td class="text" style="color: #8c4a4a">Good point, checking that out. Thanks!</td><td class="time"><a href="#t2020-08-20T08:16:53" class="time">08:16</a></td></tr>
<tr id="t2020-08-20T08:23:02"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">fbre: what all kernel images do you see in deploydir</td><td class="time"><a href="#t2020-08-20T08:23:02" class="time">08:23</a></td></tr>
<tr id="t2020-08-20T08:24:55"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">khem: i am very confused that you are in my timezone!</td><td class="time"><a href="#t2020-08-20T08:24:55" class="time">08:24</a></td></tr>
<tr id="t2020-08-20T08:25:34"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">LetoThe2nd: heh its too hot here these days</td><td class="time"><a href="#t2020-08-20T08:25:34" class="time">08:25</a></td></tr>
<tr id="t2020-08-20T08:26:11"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">khem: so you're doing the nightlife thing?</td><td class="time"><a href="#t2020-08-20T08:26:11" class="time">08:26</a></td></tr>
<tr id="t2020-08-20T08:27:14"><th class="nick" style="background: #8c4a4a">Hanky</th><td class="text" style="color: #8c4a4a">LetoThe2nd DEPENDS = &quot;mbedtls&quot; in the .bb worked. Thank you! (y)</td><td class="time"><a href="#t2020-08-20T08:27:14" class="time">08:27</a></td></tr>
<tr id="t2020-08-20T08:27:27"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">Hanky: \m/</td><td class="time"><a href="#t2020-08-20T08:27:27" class="time">08:27</a></td></tr>
<tr id="t2020-08-20T08:27:39"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">khem: you can see the content of my deploy dir here: <a href="https://www.dropbox.com/s/yj1rpqj4pmg5w8z/20200820_102534.jpg?dl=0" rel="nofollow">https://www.dropbox.com/s/yj1rpqj4pmg5w8z/20200820_102534.jpg?dl=0</a></td><td class="time"><a href="#t2020-08-20T08:27:39" class="time">08:27</a></td></tr>
<tr id="t2020-08-20T08:28:41"><td class="nickchange" colspan="2">*** florian_kc is now known as florian</td><td><a href="#t2020-08-20T08:28:41" class="time">08:28</a></td></tr>
<tr id="t2020-08-20T08:29:06"><th class="nick" style="background: #8c4a4a">Hanky</th><td class="text" style="color: #8c4a4a">I wonder why devtool add doesn't look at CMakeLists properly. I added target_link_libraries(myclient mbedtls mbedx509 mbedcrypto) to it but when doing a devtool add XY it seems not to take care of these dependencies.</td><td class="time"><a href="#t2020-08-20T08:29:06" class="time">08:29</a></td></tr>
<tr id="t2020-08-20T08:30:21"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">fbre: Image-initramfs* is the kernel+initramfs image</td><td class="time"><a href="#t2020-08-20T08:30:21" class="time">08:30</a></td></tr>
<tr id="t2020-08-20T08:31:56"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">khem: According to the docs, I dd this one to SD card: core-image-minimal-imx8mmevk-[timestamp].rootfs.wic</td><td class="time"><a href="#t2020-08-20T08:31:56" class="time">08:31</a></td></tr>
<tr id="t2020-08-20T08:32:49"><th class="nick" style="background: #8c4a4a">Hanky</th><td class="text" style="color: #8c4a4a">khem That's correct, I did the same thing with the imx8mnevk :)&nbsp;&nbsp;But don't forget the uboot.</td><td class="time"><a href="#t2020-08-20T08:32:49" class="time">08:32</a></td></tr>
<tr id="t2020-08-20T08:33:05"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">khem: How can I find out if Image-initramfs is within that .wic file?</td><td class="time"><a href="#t2020-08-20T08:33:05" class="time">08:33</a></td></tr>
<tr id="t2020-08-20T08:33:29"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">khem: And what do you mean with &quot;don't forget the uboot&quot;?</td><td class="time"><a href="#t2020-08-20T08:33:29" class="time">08:33</a></td></tr>
<tr id="t2020-08-20T08:33:32"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">fbre: wic uses IMAGE_BOOT_FILES to populate files in boot partition</td><td class="time"><a href="#t2020-08-20T08:33:32" class="time">08:33</a></td></tr>
<tr id="t2020-08-20T08:33:52"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">Hanky: i don't think devtool inspects the dependencies, its jsut up to you.</td><td class="time"><a href="#t2020-08-20T08:33:52" class="time">08:33</a></td></tr>
<tr id="t2020-08-20T08:34:29"><th class="nick" style="background: #8c4a4a">Hanky</th><td class="text" style="color: #8c4a4a">Ah, ok</td><td class="time"><a href="#t2020-08-20T08:34:29" class="time">08:34</a></td></tr>
<tr id="t2020-08-20T08:35:01"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">Hanky: there's just oo many ways one could define a form of dependency in autotools, cmake, meson, etc.</td><td class="time"><a href="#t2020-08-20T08:35:01" class="time">08:35</a></td></tr>
<tr id="t2020-08-20T08:35:08"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">khem: Do I have to change/adapt that variable IMAGE_BOOT_FILES?</td><td class="time"><a href="#t2020-08-20T08:35:08" class="time">08:35</a></td></tr>
<tr id="t2020-08-20T08:35:28"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">fbre: so perhaps add IMAGE_BOOT_FILES_append = &quot; ${KERNEL_IMAGETYPE}-initramfs-${MACHINE}.bin&quot; via local.conf or machine config file</td><td class="time"><a href="#t2020-08-20T08:35:28" class="time">08:35</a></td></tr>
<tr id="t2020-08-20T08:36:25"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">LetoThe2nd: devtool can inspect for deps but its best-effort approach</td><td class="time"><a href="#t2020-08-20T08:36:25" class="time">08:36</a></td></tr>
<tr id="t2020-08-20T08:36:56"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">khem: ah. which translates to &quot;you always have to check it&quot;</td><td class="time"><a href="#t2020-08-20T08:36:56" class="time">08:36</a></td></tr>
<tr id="t2020-08-20T08:37:01"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">it reallty depends how components build system is written, it can grok some of them but not convoluted ones</td><td class="time"><a href="#t2020-08-20T08:37:01" class="time">08:37</a></td></tr>
<tr id="t2020-08-20T08:37:10"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">right</td><td class="time"><a href="#t2020-08-20T08:37:10" class="time">08:37</a></td></tr>
<tr id="t2020-08-20T08:37:14"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">:)</td><td class="time"><a href="#t2020-08-20T08:37:14" class="time">08:37</a></td></tr>
<tr id="t2020-08-20T08:37:39"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">khem: oh, sounds promising! And if that file is populated in the boot partition, does the kernel load it? Do I have to set root=/dev/ram0 in u-boot?</td><td class="time"><a href="#t2020-08-20T08:37:39" class="time">08:37</a></td></tr>
<tr id="t2020-08-20T08:38:04"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">fbre: that file is kernel image</td><td class="time"><a href="#t2020-08-20T08:38:04" class="time">08:38</a></td></tr>
<tr id="t2020-08-20T08:38:34"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">so you have to ensure that the bootloader params are set to load it</td><td class="time"><a href="#t2020-08-20T08:38:34" class="time">08:38</a></td></tr>
<tr id="t2020-08-20T08:39:40"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">khem: uh, I see. I think LetoThe2nd gave me the hint to setenv root=/dev/ram0&nbsp;&nbsp;in u-boot to tell the Linux kernel to load that bundled initramfs.</td><td class="time"><a href="#t2020-08-20T08:39:40" class="time">08:39</a></td></tr>
<tr id="t2020-08-20T08:40:07"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">it wasn't me, but it sounds legit.</td><td class="time"><a href="#t2020-08-20T08:40:07" class="time">08:40</a></td></tr>
<tr id="t2020-08-20T08:41:16"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">khem: thanx! Now I'm heading over to tweak that IMAGE_BOOT_FILES_append.... I hope it will work ... D:</td><td class="time"><a href="#t2020-08-20T08:41:16" class="time">08:41</a></td></tr>
<tr id="t2020-08-20T08:44:02"><td class="nickchange" colspan="2">*** camus1 is now known as kaspter</td><td><a href="#t2020-08-20T08:44:02" class="time">08:44</a></td></tr>
<tr id="t2020-08-20T08:44:46"><th class="nick" style="background: #4d4d93">chris_ber</th><td class="text" style="color: #4d4d93">with `bitbake linux-imx -c menuconfig` i selected the kernel module CP210x but it seems to be that the module isn't built. I see a lot of other kernel modules. Any ideas?</td><td class="time"><a href="#t2020-08-20T08:44:46" class="time">08:44</a></td></tr>
<tr id="t2020-08-20T08:48:15"><th class="nick" style="background: #4d4d93">chris_ber</th><td class="text" style="color: #4d4d93">i also added in my local.conf: `CORE_IMAGE_EXTRA_INSTALL += &quot; kernel-modules&quot;`</td><td class="time"><a href="#t2020-08-20T08:48:15" class="time">08:48</a></td></tr>
<tr id="t2020-08-20T08:51:31"><th class="nick" style="background: #4d4d93">chris_ber</th><td class="text" style="color: #4d4d93">when i added `IMAGE_INSTALL_append += &quot;kernel-module-cp210x&quot; i got the message: No match for argument: kernel-module-cp210x</td><td class="time"><a href="#t2020-08-20T08:51:31" class="time">08:51</a></td></tr>
<tr id="t2020-08-20T09:01:24"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">chris_ber: the changes resulting from -c menuconfig should be made persistent, so did you regernate the defconfig or add a config fragment to add the option ? if not then this change will be lost on nextt kernel rebuild</td><td class="time"><a href="#t2020-08-20T09:01:24" class="time">09:01</a></td></tr>
<tr id="t2020-08-20T09:02:13"><th class="nick" style="background: #4d4d93">chris_ber</th><td class="text" style="color: #4d4d93">i just saved the changes exit the menuconfig</td><td class="time"><a href="#t2020-08-20T09:02:13" class="time">09:02</a></td></tr>
<tr id="t2020-08-20T09:05:01"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">these changes perhaps got saved into kernel workdir not into yocto metadata or kernel source tree, yocto will wipe our workdir on rebuilds</td><td class="time"><a href="#t2020-08-20T09:05:01" class="time">09:05</a></td></tr>
<tr id="t2020-08-20T09:07:43"><td class="action" colspan="2">* khem -&gt;sleep()</td><td><a href="#t2020-08-20T09:07:43" class="time">09:07</a></td></tr>
<tr id="t2020-08-20T09:09:51"><th class="nick" style="background: #854685">erbo</th><td class="text" style="color: #854685">anyone knows how to make npm use python2 instead of python3 when building node_modules (using yocto)?</td><td class="time"><a href="#t2020-08-20T09:09:51" class="time">09:09</a></td></tr>
<tr id="t2020-08-20T09:15:05"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">khem: The good news is the .wic files increased its size by about 50MB after I set IMAGE_BOOT_FILES_append. So I guess the initramfs is really bundled now to .wic :-)</td><td class="time"><a href="#t2020-08-20T09:15:05" class="time">09:15</a></td></tr>
<tr id="t2020-08-20T09:17:09"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">khem: The bad news is it still boots from /dev/mmcblk1p2 by default. And when I set root=/dev/ram0 rootwait rw&nbsp;&nbsp;it just says &quot;Waiting for root device /dev/ram0...&quot;</td><td class="time"><a href="#t2020-08-20T09:17:09" class="time">09:17</a></td></tr>
<tr id="t2020-08-20T09:18:30"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">khem: When I set root=/dev/ram0 rw&nbsp;&nbsp; it says kernel panic because of &quot;VFS: Cannot open root device &quot;ram0&quot; or unknown-block.....</td><td class="time"><a href="#t2020-08-20T09:18:30" class="time">09:18</a></td></tr>
<tr id="t2020-08-20T09:22:11"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">khem: But the console still says the same old sizes as if I haven't managed to bundle the initramfs: 28021248 bytes read in 320 ms (83.5 MiB/s)&nbsp;&nbsp; ....Booting from mmc... 44652 bytes read in 16 ms (2.7 MiB/s)</td><td class="time"><a href="#t2020-08-20T09:22:11" class="time">09:22</a></td></tr>
<tr id="t2020-08-20T09:22:54"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">khem: So I suppose it still reads the old size without initramfs from flash</td><td class="time"><a href="#t2020-08-20T09:22:54" class="time">09:22</a></td></tr>
<tr id="t2020-08-20T09:23:15"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">khem: is there a size setting to do somewhere?</td><td class="time"><a href="#t2020-08-20T09:23:15" class="time">09:23</a></td></tr>
<tr id="t2020-08-20T09:24:15"><th class="nick" style="background: #97974f">ak77</th><td class="text" style="color: #97974f">hmm.</td><td class="time"><a href="#t2020-08-20T09:24:15" class="time">09:24</a></td></tr>
<tr id="t2020-08-20T09:25:06"><th class="nick" style="background: #97974f">ak77</th><td class="text" style="color: #97974f">building a shared library by hand has exported functions, using recipe's do_compile ${CC} SAMEFLAGS ... does not have exported functions</td><td class="time"><a href="#t2020-08-20T09:25:06" class="time">09:25</a></td></tr>
<tr id="t2020-08-20T09:28:43"><th class="nick" style="background: #9b519b">gaston53</th><td class="text" style="color: #9b519b">I have added mariadb to my linux yocto image, I am using sumo yocto image, so I have build mariadb 5.5 version. How can I change the version to mariadb 10 ?</td><td class="time"><a href="#t2020-08-20T09:28:43" class="time">09:28</a></td></tr>
<tr id="t2020-08-20T09:30:01"><th class="nick" style="background: #9b519b">gaston53</th><td class="text" style="color: #9b519b">you can see here : <a href="https://layers.openembedded.org/layerindex/recipe/82252/" rel="nofollow">https://layers.openembedded.org/layerindex/recipe/82252/</a></td><td class="time"><a href="#t2020-08-20T09:30:01" class="time">09:30</a></td></tr>
<tr id="t2020-08-20T09:31:23"><th class="nick" style="background: #97974f">ak77</th><td class="text" style="color: #97974f">I have copied command line, run compiler with all the flags and functions are exported from a .so, using bitbake they aren't, what could cause this?</td><td class="time"><a href="#t2020-08-20T09:31:23" class="time">09:31</a></td></tr>
<tr id="t2020-08-20T09:34:14"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">khem-&gt;wake() ;-)</td><td class="time"><a href="#t2020-08-20T09:34:14" class="time">09:34</a></td></tr>
<tr id="t2020-08-20T09:40:37"><th class="nick" style="background: #97974f">ak77</th><td class="text" style="color: #97974f">ok. solved. stupid me. exports are of course missing if you don't specify any .c file... (TIL: you can create shared .so file without any source files)</td><td class="time"><a href="#t2020-08-20T09:40:37" class="time">09:40</a></td></tr>
<tr id="t2020-08-20T09:47:04"><th class="nick" style="background: #9b519b">gaston53</th><td class="text" style="color: #9b519b">IMAGE_INSTALL_append = &quot; mariadb&quot;</td><td class="time"><a href="#t2020-08-20T09:47:04" class="time">09:47</a></td></tr>
<tr id="t2020-08-20T09:47:06"><th class="nick" style="background: #9b519b">gaston53</th><td class="text" style="color: #9b519b">PREFERRED_VERSION_mariadb = &quot;10.4.12&quot;</td><td class="time"><a href="#t2020-08-20T09:47:06" class="time">09:47</a></td></tr>
<tr id="t2020-08-20T09:47:13"><th class="nick" style="background: #9b519b">gaston53</th><td class="text" style="color: #9b519b">poky SUMO</td><td class="time"><a href="#t2020-08-20T09:47:13" class="time">09:47</a></td></tr>
<tr id="t2020-08-20T09:47:29"><th class="nick" style="background: #9b519b">gaston53</th><td class="text" style="color: #9b519b">I have added these variables in local.conf file</td><td class="time"><a href="#t2020-08-20T09:47:29" class="time">09:47</a></td></tr>
<tr id="t2020-08-20T09:47:40"><th class="nick" style="background: #9b519b">gaston53</th><td class="text" style="color: #9b519b">but this build mariadb 5.5 version :/</td><td class="time"><a href="#t2020-08-20T09:47:40" class="time">09:47</a></td></tr>
<tr id="t2020-08-20T09:47:46"><th class="nick" style="background: #9b519b">gaston53</th><td class="text" style="color: #9b519b">not 10.4.12</td><td class="time"><a href="#t2020-08-20T09:47:46" class="time">09:47</a></td></tr>
<tr id="t2020-08-20T09:47:56"><th class="nick" style="background: #9b519b">gaston53</th><td class="text" style="color: #9b519b">how can I build another version ?</td><td class="time"><a href="#t2020-08-20T09:47:56" class="time">09:47</a></td></tr>
<tr id="t2020-08-20T09:48:22"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">Is such construction like an if-statement?:&nbsp;&nbsp; ${@bb.utils.contains('BLA', '${BLUB1}', '${BLUB2}', '', d)}</td><td class="time"><a href="#t2020-08-20T09:48:22" class="time">09:48</a></td></tr>
<tr id="t2020-08-20T09:50:08"><th class="nick" style="background: #8c4a4a">Hanky</th><td class="text" style="color: #8c4a4a">gaston53 Which Yocto Project version are you using? Seems to be outdated: <a href="https://layers.openembedded.org/layerindex/recipe/5974/" rel="nofollow">https://layers.openembedded.org/layerindex/recipe/5974/</a></td><td class="time"><a href="#t2020-08-20T09:50:08" class="time">09:50</a></td></tr>
<tr id="t2020-08-20T09:50:43"><th class="nick" style="background: #9b519b">gaston53</th><td class="text" style="color: #9b519b">Hanky sumo (Yocto Project 2.5)</td><td class="time"><a href="#t2020-08-20T09:50:43" class="time">09:50</a></td></tr>
<tr id="t2020-08-20T09:56:06"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">gaston53: instead of asking a thrid (or even fourth) time: either backport the recipes (complicated, probably), or update your yocto version (probably also complicated). and please do not go bitching here for sumo support. its not our fault that you're using outdated software.</td><td class="time"><a href="#t2020-08-20T09:56:06" class="time">09:56</a></td></tr>
<tr id="t2020-08-20T09:58:31"><th class="nick" style="background: #9b519b">gaston53</th><td class="text" style="color: #9b519b">and it's not my fault that existing variables in the yocto manual docs like `preferred_version` don't work</td><td class="time"><a href="#t2020-08-20T09:58:31" class="time">09:58</a></td></tr>
<tr id="t2020-08-20T09:59:07"><th class="nick" style="background: #9b519b">gaston53</th><td class="text" style="color: #9b519b">if it's not useful, I don't think that yocto will put such a variable in its docs</td><td class="time"><a href="#t2020-08-20T09:59:07" class="time">09:59</a></td></tr>
<tr id="t2020-08-20T09:59:36"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">fbre: ah, this function returns third argument if the second argument is subset of the first argument else returns fourth argument</td><td class="time"><a href="#t2020-08-20T09:59:36" class="time">09:59</a></td></tr>
<tr id="t2020-08-20T10:00:51"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">gaston53: nope. seriously, you just do not understand how the variable works. its not a magic switch to use any version: its a selection amongst *available recipes*. so if no recipe provides the version you want, the variable &quot;does not work&quot;.&nbsp;&nbsp;do not claim the docs are misleading, they certainly are not: <a href="https://www.yoctoproject.org/docs/3.1/ref-manual/ref-manual.html#var-PREFERRED_VERSION" rel="nofollow">https://www.yoctoproject.org/docs/3.1/ref-manual/ref-manual.html#var-PREFERRED_VERSION</a></td><td class="time"><a href="#t2020-08-20T10:00:51" class="time">10:00</a></td></tr>
<tr id="t2020-08-20T10:01:25"><th class="nick" style="background: #4b904b">LetoThe2nd</th><td class="text" style="color: #4b904b">gaston53: and to prove my point, the same text is already stated in the sumo version of the manual: <a href="https://www.yoctoproject.org/docs/2.5/ref-manual/ref-manual.html#var-PREFERRED_VERSION" rel="nofollow">https://www.yoctoproject.org/docs/2.5/ref-manual/ref-manual.html#var-PREFERRED_VERSION</a></td><td class="time"><a href="#t2020-08-20T10:01:25" class="time">10:01</a></td></tr>
<tr id="t2020-08-20T10:16:25"><th class="nick" style="background: #539e9e">mcfrisk</th><td class="text" style="color: #539e9e">hi, meta-java has sadly download issues with for example <a href="https://bitbucket.org/cacaovm/cacao-staging/get/2d6f6c14daf9.zip" rel="nofollow">https://bitbucket.org/cacaovm/cacao-staging/get/2d6f6c14daf9.zip</a> which has been removed. Could some of the files be mirrored in yocto download mirror?</td><td class="time"><a href="#t2020-08-20T10:16:25" class="time">10:16</a></td></tr>
<tr id="t2020-08-20T10:21:48"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">Question regarding wic: Is there an order in which all the files appended to IMAGE_BOOT_FILES have to appear? The first one is ${KERNEL_IMAGETYPE}, the second one is ${@make_dtb_boot_files(d)}. Where is the place where my ${KERNEL_IMAGETYPE}-initramfs-${MACHINE}.bin has to be?</td><td class="time"><a href="#t2020-08-20T10:21:48" class="time">10:21</a></td></tr>
<tr id="t2020-08-20T10:53:03"><td class="nickchange" colspan="2">*** camus1 is now known as kaspter</td><td><a href="#t2020-08-20T10:53:03" class="time">10:53</a></td></tr>
<tr id="t2020-08-20T11:06:17"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">If an initramfs is bundled to the kernel, how does the kernel detect this bundled file? By address, by name, ...?</td><td class="time"><a href="#t2020-08-20T11:06:17" class="time">11:06</a></td></tr>
<tr id="t2020-08-20T11:07:40"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">Or do I have to replace the ${KERNEL_IMAGETYPE} with my new image ${KERNEL_IMAGETYPE}-initramfs-${MACHINE}.bin ?</td><td class="time"><a href="#t2020-08-20T11:07:40" class="time">11:07</a></td></tr>
<tr id="t2020-08-20T11:09:03"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">If I don't get that initramfs to work, I'm gonna move to nuthouse tomorrow X) ;( :')</td><td class="time"><a href="#t2020-08-20T11:09:03" class="time">11:09</a></td></tr>
<tr id="t2020-08-20T11:10:37"><td class="nickchange" colspan="2">*** gsalazar84 is now known as gsalazar</td><td><a href="#t2020-08-20T11:10:37" class="time">11:10</a></td></tr>
<tr id="t2020-08-20T11:13:08"><th class="nick" style="background: #a25555">zandrey</th><td class="text" style="color: #a25555">fbre: i've written you yesterday about the IMAGE_BOOT_FILES and KERNEL_IMAGETYPE. order should not matter, as IMAGE_BOOT_FILES it treated as a list when wic uses it, and populates all files onto fat partition</td><td class="time"><a href="#t2020-08-20T11:13:08" class="time">11:13</a></td></tr>
<tr id="t2020-08-20T11:14:27"><th class="nick" style="background: #a25555">zandrey</th><td class="text" style="color: #a25555">fbre: important is to tell the u-boot that you would like to load that kernel, and *not* Image</td><td class="time"><a href="#t2020-08-20T11:14:27" class="time">11:14</a></td></tr>
<tr id="t2020-08-20T11:16:41"><th class="nick" style="background: #a25555">zandrey</th><td class="text" style="color: #a25555">marex: thanks again for hint regarding the &quot;fdt_high&quot; and &quot;bootm_size&quot;. this was indeed a source if all inflate troubles. we'd make a patch to cover imx8m derivatives, and would send it to u-boot, NXP and append it in the meta-freescale layer.</td><td class="time"><a href="#t2020-08-20T11:16:41" class="time">11:16</a></td></tr>
<tr id="t2020-08-20T11:17:07"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">zandrey: oh, I think yesterday I was not already so far to understand what you mean with IMAGE_BOOT_FILES, sorry. OK, I tried this but it leads to errors:&nbsp;&nbsp;setenv mmcroot /dev/ram0 rw</td><td class="time"><a href="#t2020-08-20T11:17:07" class="time">11:17</a></td></tr>
<tr id="t2020-08-20T11:18:03"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">zandrey: A kernel boots but it grumbles about missing a bootable thing in /dev/ram0</td><td class="time"><a href="#t2020-08-20T11:18:03" class="time">11:18</a></td></tr>
<tr id="t2020-08-20T11:18:53"><td class="part" colspan="2">*** gaston53 &lt;gaston53!669c3026@102.156.48.38&gt; has left #yocto</td><td><a href="#t2020-08-20T11:18:53" class="time">11:18</a></td></tr>
<tr id="t2020-08-20T11:19:12"><th class="nick" style="background: #a25555">zandrey</th><td class="text" style="color: #a25555">fbre: you should change the bootcmd's rootfs=/dev/ram0 param, and not the mmcroot... you still want to load your combined image from eMMC, right ;)</td><td class="time"><a href="#t2020-08-20T11:19:12" class="time">11:19</a></td></tr>
<tr id="t2020-08-20T11:19:53"><th class="nick" style="background: #a25555">zandrey</th><td class="text" style="color: #a25555">fbre: pastebin your boot log, would be easier to figure out what's wrong</td><td class="time"><a href="#t2020-08-20T11:19:53" class="time">11:19</a></td></tr>
<tr id="t2020-08-20T11:19:56"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">zandrey: aaaaaaah Okaaaaaaay.....</td><td class="time"><a href="#t2020-08-20T11:19:56" class="time">11:19</a></td></tr>
<tr id="t2020-08-20T11:20:15"><th class="nick" style="background: #a25555">zandrey</th><td class="text" style="color: #a25555">and &quot;env print&quot;, just like marex suggested to me yesterday</td><td class="time"><a href="#t2020-08-20T11:20:15" class="time">11:20</a></td></tr>
<tr id="t2020-08-20T11:26:29"><th class="nick" style="background: #57a657">marex</th><td class="text" style="color: #57a657">zandrey: yeah, that fdt_high detail is particularly nasty</td><td class="time"><a href="#t2020-08-20T11:26:29" class="time">11:26</a></td></tr>
<tr id="t2020-08-20T11:26:35"><th class="nick" style="background: #57a657">marex</th><td class="text" style="color: #57a657">zandrey: glad to hear it helped</td><td class="time"><a href="#t2020-08-20T11:26:35" class="time">11:26</a></td></tr>
<tr id="t2020-08-20T11:27:22"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">zandrey: Do you mean I must set this one in u-boot?:&nbsp;&nbsp;&nbsp;&nbsp; setenv rootfs /dev/ram0</td><td class="time"><a href="#t2020-08-20T11:27:22" class="time">11:27</a></td></tr>
<tr id="t2020-08-20T11:30:07"><th class="nick" style="background: #57a657">marex</th><td class="text" style="color: #57a657">fbre: really, pastebin the whole log from power on till failure AND pastebin output of 'env print' in U-Boot</td><td class="time"><a href="#t2020-08-20T11:30:07" class="time">11:30</a></td></tr>
<tr id="t2020-08-20T11:30:15"><th class="nick" style="background: #57a657">marex</th><td class="text" style="color: #57a657">otherwise its all guessing and it is difficult to help</td><td class="time"><a href="#t2020-08-20T11:30:15" class="time">11:30</a></td></tr>
<tr id="t2020-08-20T11:36:56"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">zandrey: here we go with the whole log: <a href="https://www.dropbox.com/s/u15bu3l0oinjnb8/log.txt?dl=0" rel="nofollow">https://www.dropbox.com/s/u15bu3l0oinjnb8/log.txt?dl=0</a>&nbsp;&nbsp;Thanx in advance for helping me</td><td class="time"><a href="#t2020-08-20T11:36:56" class="time">11:36</a></td></tr>
<tr id="t2020-08-20T11:38:34"><th class="nick" style="background: #57a657">marex</th><td class="text" style="color: #57a657">fbre: your machine seems to boot though, so whats the problem ?</td><td class="time"><a href="#t2020-08-20T11:38:34" class="time">11:38</a></td></tr>
<tr id="t2020-08-20T11:38:40"><th class="nick" style="background: #57a657">marex</th><td class="text" style="color: #57a657">fbre: also, initrd_high and fdt_high is broken</td><td class="time"><a href="#t2020-08-20T11:38:40" class="time">11:38</a></td></tr>
<tr id="t2020-08-20T11:38:58"><th class="nick" style="background: #57a657">marex</th><td class="text" style="color: #57a657">if set to -1 that is</td><td class="time"><a href="#t2020-08-20T11:38:58" class="time">11:38</a></td></tr>
<tr id="t2020-08-20T11:40:16"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">marex: I bundled an initramfs to the kernel with INITRAMFS_IMAGE_BUNDLE = '1'. The kernel should load that RAM filesystem. I can't see it is doing that. Instead it</td><td class="time"><a href="#t2020-08-20T11:40:16" class="time">11:40</a></td></tr>
<tr id="t2020-08-20T11:41:01"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">...boots the roofs from /dev/mmcblk1p2</td><td class="time"><a href="#t2020-08-20T11:41:01" class="time">11:41</a></td></tr>
<tr id="t2020-08-20T11:42:02"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">marex: I bundled this one: INITRAMFS_IMAGE = 'core-image-tiny-initramfs'</td><td class="time"><a href="#t2020-08-20T11:42:02" class="time">11:42</a></td></tr>
<tr id="t2020-08-20T11:42:05"><th class="nick" style="background: #57a657">marex</th><td class="text" style="color: #57a657">fbre: you are not booting using fitImage, are you ?</td><td class="time"><a href="#t2020-08-20T11:42:05" class="time">11:42</a></td></tr>
<tr id="t2020-08-20T11:42:12"><th class="nick" style="background: #57a657">marex</th><td class="text" style="color: #57a657">uh</td><td class="time"><a href="#t2020-08-20T11:42:12" class="time">11:42</a></td></tr>
<tr id="t2020-08-20T11:42:34"><td class="part" colspan="2">*** beneth &lt;beneth!~beneth@irc.beneth.fr&gt; has left #yocto</td><td><a href="#t2020-08-20T11:42:34" class="time">11:42</a></td></tr>
<tr id="t2020-08-20T11:42:34-2"><th class="nick" style="background: #57a657">marex</th><td class="text" style="color: #57a657">I havent used bundled initrd for a long time</td><td class="time"><a href="#t2020-08-20T11:42:34-2" class="time">11:42</a></td></tr>
<tr id="t2020-08-20T11:42:50"><th class="nick" style="background: #57a657">marex</th><td class="text" style="color: #57a657">isn't there some noinitrd or somesuch kernel bootarg which controls what gets booted first ?</td><td class="time"><a href="#t2020-08-20T11:42:50" class="time">11:42</a></td></tr>
<tr id="t2020-08-20T11:43:12"><th class="nick" style="background: #57a657">marex</th><td class="text" style="color: #57a657">well, of course, check whetehr the kernel you are booting really has the initrd in it</td><td class="time"><a href="#t2020-08-20T11:43:12" class="time">11:43</a></td></tr>
<tr id="t2020-08-20T11:44:40"><th class="nick" style="background: #57a657">marex</th><td class="text" style="color: #57a657">also</td><td class="time"><a href="#t2020-08-20T11:44:40" class="time">11:44</a></td></tr>
<tr id="t2020-08-20T11:44:41"><th class="nick" style="background: #57a657">marex</th><td class="text" style="color: #57a657">[&nbsp;&nbsp;&nbsp;&nbsp;0.000000] Kernel command line: console=ttymxc1,115200 root=/dev/mmcblk1p2 rootwait rw</td><td class="time"><a href="#t2020-08-20T11:44:41" class="time">11:44</a></td></tr>
<tr id="t2020-08-20T11:44:45"><th class="nick" style="background: #57a657">marex</th><td class="text" style="color: #57a657">your kernel command line was never changed</td><td class="time"><a href="#t2020-08-20T11:44:45" class="time">11:44</a></td></tr>
<tr id="t2020-08-20T11:44:54"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">marex: That's a good question. The docs actually say it's enough to set INITRAMFS_IMAGE and INITRAMFS_IMAGE_BUNDLE. Now I found out I have to additionally add that new .wic file to the boot partition by appending it to IMAGE_BOOT_FILES</td><td class="time"><a href="#t2020-08-20T11:44:54" class="time">11:44</a></td></tr>
<tr id="t2020-08-20T11:46:21"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">marex: yes, that is why I setenv mmcroot /dev/ram0 rootwait rw&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;because mmcroot changes that root cmdline parameter</td><td class="time"><a href="#t2020-08-20T11:46:21" class="time">11:46</a></td></tr>
<tr id="t2020-08-20T11:46:39"><th class="nick" style="background: #a25555">zandrey</th><td class="text" style="color: #a25555">fbre: you should change this env variable =&gt; mmcargs=setenv bootargs ${jh_clk} console=${console} root=${mmcroot}</td><td class="time"><a href="#t2020-08-20T11:46:39" class="time">11:46</a></td></tr>
<tr id="t2020-08-20T11:47:21"><th class="nick" style="background: #a25555">zandrey</th><td class="text" style="color: #a25555">=&gt; setenv mmcargs 'setenv bootargs ${jh_clk} console=${console} root=/dev/ram0'</td><td class="time"><a href="#t2020-08-20T11:47:21" class="time">11:47</a></td></tr>
<tr id="t2020-08-20T11:47:27"><th class="nick" style="background: #a25555">zandrey</th><td class="text" style="color: #a25555">and then boot</td><td class="time"><a href="#t2020-08-20T11:47:27" class="time">11:47</a></td></tr>
<tr id="t2020-08-20T11:49:16"><th class="nick" style="background: #a25555">zandrey</th><td class="text" style="color: #a25555">marex: indeed, those fdt_high is problematic, but good that you've suggested the change to be done! :) this is definitely worth repairing for imx8m derivatives everywhere, since a lot of people might hit the same case</td><td class="time"><a href="#t2020-08-20T11:49:16" class="time">11:49</a></td></tr>
<tr id="t2020-08-20T11:50:13"><td class="nickchange" colspan="2">*** camus1 is now known as kaspter</td><td><a href="#t2020-08-20T11:50:13" class="time">11:50</a></td></tr>
<tr id="t2020-08-20T11:50:13-2"><th class="nick" style="background: #a25555">zandrey</th><td class="text" style="color: #a25555">marex: fbre does not use fit, his boot_fit is set to &quot;no&quot;, so he's not (yet) :) affected by the fdh_high</td><td class="time"><a href="#t2020-08-20T11:50:13-2" class="time">11:50</a></td></tr>
<tr id="t2020-08-20T11:52:18"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">zandrey|marex: This is what happens with root=/dev/ram0 : <a href="https://www.dropbox.com/s/pcez63qkhd3szgc/log2.txt?dl=0" rel="nofollow">https://www.dropbox.com/s/pcez63qkhd3szgc/log2.txt?dl=0</a></td><td class="time"><a href="#t2020-08-20T11:52:18" class="time">11:52</a></td></tr>
<tr id="t2020-08-20T11:52:54"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">zandrey marex: It seems the kernel cannot find an initramfs</td><td class="time"><a href="#t2020-08-20T11:52:54" class="time">11:52</a></td></tr>
<tr id="t2020-08-20T11:56:22"><th class="nick" style="background: #57a657">marex</th><td class="text" style="color: #57a657">fbre: zcat /proc/config.gz | grep INITR</td><td class="time"><a href="#t2020-08-20T11:56:22" class="time">11:56</a></td></tr>
<tr id="t2020-08-20T11:56:32"><th class="nick" style="background: #57a657">marex</th><td class="text" style="color: #57a657">fbre: is it enabled ? and the matching compression method ?</td><td class="time"><a href="#t2020-08-20T11:56:32" class="time">11:56</a></td></tr>
<tr id="t2020-08-20T11:56:46"><th class="nick" style="background: #57a657">marex</th><td class="text" style="color: #57a657">reboot the system and run that on it ^</td><td class="time"><a href="#t2020-08-20T11:56:46" class="time">11:56</a></td></tr>
<tr id="t2020-08-20T11:58:03"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">zandrey marex: I think, my .wic file contains 2 images:&nbsp;&nbsp;${KERNEL_IMAGETYPE} and ${KERNEL_IMAGETYPE}-initramfs-${MACHINE}.bin&nbsp;&nbsp; because both ones are in the list of IMAGE_BOOT_FILES. How does u-boot know which one to boot?</td><td class="time"><a href="#t2020-08-20T11:58:03" class="time">11:58</a></td></tr>
<tr id="t2020-08-20T12:00:32"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">marex: that zcat call outputs this stuff:&nbsp;&nbsp;&nbsp;&nbsp;CONFIG_BLK_DEV_INITRD=y&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CONFIG_INITRAMFS_SOURCE=&quot;&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CONFIG_ARCH_HAS_KEEPINITRD=y</td><td class="time"><a href="#t2020-08-20T12:00:32" class="time">12:00</a></td></tr>
<tr id="t2020-08-20T12:05:13"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">I wonder if it's important why CONFIG_INITRAMFS_SOURCE is not set</td><td class="time"><a href="#t2020-08-20T12:05:13" class="time">12:05</a></td></tr>
<tr id="t2020-08-20T12:15:00"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">Are you still around?</td><td class="time"><a href="#t2020-08-20T12:15:00" class="time">12:15</a></td></tr>
<tr id="t2020-08-20T12:15:54"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">Is there something I should/can do next to find out things and solve this problem?</td><td class="time"><a href="#t2020-08-20T12:15:54" class="time">12:15</a></td></tr>
<tr id="t2020-08-20T12:21:08"><th class="nick" style="background: #57a657">marex</th><td class="text" style="color: #57a657">fbre: shouldn't CONFIG_INITRAMFS_SOURCE be set to the initramfs cpio archive if the archive is built in ?</td><td class="time"><a href="#t2020-08-20T12:21:08" class="time">12:21</a></td></tr>
<tr id="t2020-08-20T12:21:25"><th class="nick" style="background: #57a657">marex</th><td class="text" style="color: #57a657">and then, check supported compression, e.g. if you build cpio.gz, make sure the kernel has GZ support in it</td><td class="time"><a href="#t2020-08-20T12:21:25" class="time">12:21</a></td></tr>
<tr id="t2020-08-20T12:24:08"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">marex: CONFIG_INITRAMFS_SOURCE is mentioned here but I don't understand whether I must set it or not: <a href="https://www.yoctoproject.org/docs/2.4.1/dev-manual/dev-manual.html#building-an-initramfs-image" rel="nofollow">https://www.yoctoproject.org/docs/2.4.1/dev-manual/dev-manual.html#building-an-initramfs-image</a></td><td class="time"><a href="#t2020-08-20T12:24:08" class="time">12:24</a></td></tr>
<tr id="t2020-08-20T12:25:44"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">marex: See the content of my deploy dir here. Should I set CONFIG_INITRAMFS_SOURCE to any of those filesnames?: <a href="https://www.dropbox.com/s/yj1rpqj4pmg5w8z/20200820_102534.jpg?dl=0" rel="nofollow">https://www.dropbox.com/s/yj1rpqj4pmg5w8z/20200820_102534.jpg?dl=0</a></td><td class="time"><a href="#t2020-08-20T12:25:44" class="time">12:25</a></td></tr>
<tr id="t2020-08-20T12:26:53"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">marex: I don't understand the docs here what I should really do with that variable CONFIG_INITRAMFS_SOURCE. I assumed it's handled automatically by the build system somehow</td><td class="time"><a href="#t2020-08-20T12:26:53" class="time">12:26</a></td></tr>
<tr id="t2020-08-20T12:31:27"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">marex: all compression checkboxes are switched on in the menuconfig of the kernel: <a href="https://www.dropbox.com/s/woszsscp67q7koa/20200820_143013.jpg?dl=0" rel="nofollow">https://www.dropbox.com/s/woszsscp67q7koa/20200820_143013.jpg?dl=0</a></td><td class="time"><a href="#t2020-08-20T12:31:27" class="time">12:31</a></td></tr>
<tr id="t2020-08-20T12:40:52"><th class="nick" style="background: #5959a9">ant__</th><td class="text" style="color: #5959a9">fbre, the magic happens in kernel.bbclass, there are some comments as well about it</td><td class="time"><a href="#t2020-08-20T12:40:52" class="time">12:40</a></td></tr>
<tr id="t2020-08-20T12:41:27"><th class="nick" style="background: #57a657">marex</th><td class="text" style="color: #57a657">also docs for 2.4.y are obsolete, update to 3.y</td><td class="time"><a href="#t2020-08-20T12:41:27" class="time">12:41</a></td></tr>
<tr id="t2020-08-20T12:57:34"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">When I'm looking at the boot partition of the SD card via file browser I can see a file Image (27MB) and also Image-initramfs-imx8mmevk.bin (65MB). I suppose Image is the kernel which boots from u-boot on command 'boot'. But which magic tell that kernel to use Image-initramfs-imx8mmevk.bin as initial RAM filesystem? Or do I have a general</td><td class="time"><a href="#t2020-08-20T12:57:34" class="time">12:57</a></td></tr>
<tr id="t2020-08-20T12:57:35"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">misunderstanding in the logic?</td><td class="time"><a href="#t2020-08-20T12:57:35" class="time">12:57</a></td></tr>
<tr id="t2020-08-20T12:59:36"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">The other possibility is to let u-boot use Image-initramfs-imx8mmevk.bin (65MB) as kernel which somehow have that initial RAM filesystem included. But how do I tell u-boot to use that one?</td><td class="time"><a href="#t2020-08-20T12:59:36" class="time">12:59</a></td></tr>
<tr id="t2020-08-20T13:00:42"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">The cmdline parameter root just tells what the root filesystem is _after_ that whole initial RAM filesystem thingy</td><td class="time"><a href="#t2020-08-20T13:00:42" class="time">13:00</a></td></tr>
<tr id="t2020-08-20T13:01:20"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">So far my understanding and questions :)</td><td class="time"><a href="#t2020-08-20T13:01:20" class="time">13:01</a></td></tr>
<tr id="t2020-08-20T13:03:03"><th class="nick" style="background: #adad5b">mihai-</th><td class="text" style="color: #adad5b">fbre: if you used IMAGE_INITRAMFS_BUNDLE, Image-initramfs-* should be the kernel + initramfs, you need to boot that</td><td class="time"><a href="#t2020-08-20T13:03:03" class="time">13:03</a></td></tr>
<tr id="t2020-08-20T13:03:29"><th class="nick" style="background: #adad5b">mihai-</th><td class="text" style="color: #adad5b">or INITRAMFS_IMAGE_BUNDLE, whatever its name is</td><td class="time"><a href="#t2020-08-20T13:03:29" class="time">13:03</a></td></tr>
<tr id="t2020-08-20T13:05:51"><td class="nickchange" colspan="2">*** tgamblin_ is now known as tgamblin</td><td><a href="#t2020-08-20T13:05:51" class="time">13:05</a></td></tr>
<tr id="t2020-08-20T13:07:39"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">mihai-: How do I tell u-boot which file to load as kernel? My boot partition contains two Image files (Image and Image-initramfs-imx8mmevk.bin, and some other stuff imx8mm_m4_TCP* and .dtb ...)</td><td class="time"><a href="#t2020-08-20T13:07:39" class="time">13:07</a></td></tr>
<tr id="t2020-08-20T13:15:01"><th class="nick" style="background: #539e9e">mcfrisk</th><td class="text" style="color: #539e9e">hi, does nativesdk-clang work from meta-clang? I managed to compile and install but it seems to have issues finding linkers and binaries, as if it's not configured correctly at all.</td><td class="time"><a href="#t2020-08-20T13:15:01" class="time">13:15</a></td></tr>
<tr id="t2020-08-20T13:20:15"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">aaaaaaaaaah, in u-boot I have to call this command:&nbsp;&nbsp;&nbsp;&nbsp; setenv image&nbsp;&nbsp;Image-initramfs-imx8mmevk.bin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; and now it boots that other kernel with the bundled initramfs =D</td><td class="time"><a href="#t2020-08-20T13:20:15" class="time">13:20</a></td></tr>
<tr id="t2020-08-20T13:22:26"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">I think I'm a step further. Now proceeds until this logging:&nbsp;&nbsp; [&nbsp;&nbsp;&nbsp;&nbsp;4.166205] Run /init as init process&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Starting version 243.2+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Waiting for removable media...</td><td class="time"><a href="#t2020-08-20T13:22:26" class="time">13:22</a></td></tr>
<tr id="t2020-08-20T13:22:45"><th class="nick" style="background: #539e9e">mcfrisk</th><td class="text" style="color: #539e9e">oops, nativesdk-clang seems to be a clang for SDK arch target? How is the real target compiler called?</td><td class="time"><a href="#t2020-08-20T13:22:45" class="time">13:22</a></td></tr>
<tr id="t2020-08-20T13:28:57"><th class="nick" style="background: #b15db1">zandrey_</th><td class="text" style="color: #b15db1">fbre: this is already a good sign - it means your bundled image is operable. i guess next thing to do is to analyze what's missing in the initramdisk to boot into console</td><td class="time"><a href="#t2020-08-20T13:28:57" class="time">13:28</a></td></tr>
<tr id="t2020-08-20T13:31:30"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">zandrey_: yeah! I'm quite happy already. Many thanx to you all for helping me. Without that I'd already given up :-)&nbsp;&nbsp; It was so hard to find out I have 2 files in my boot partition and must tell u-boot the new (right) one. Tomorrow I'll look into that initramdisk.</td><td class="time"><a href="#t2020-08-20T13:31:30" class="time">13:31</a></td></tr>
<tr id="t2020-08-20T13:32:49"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">Maybe I should also try core-image-minimal-initramfs&nbsp;&nbsp; instead of core-image-tiny-initramfs&nbsp;&nbsp; as bundle and see if that works better</td><td class="time"><a href="#t2020-08-20T13:32:49" class="time">13:32</a></td></tr>
<tr id="t2020-08-20T13:38:49"><th class="nick" style="background: #adad5b">mihai-</th><td class="text" style="color: #adad5b">fbre: there should be a way to have setenv image done on packaging somehow, maybe through an uboot env file</td><td class="time"><a href="#t2020-08-20T13:38:49" class="time">13:38</a></td></tr>
<tr id="t2020-08-20T13:41:15"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">mihai-: yes, that's true. I even used that already before but can't remember right now. Not a problem right now for me.</td><td class="time"><a href="#t2020-08-20T13:41:15" class="time">13:41</a></td></tr>
<tr id="t2020-08-20T13:41:53"><th class="nick" style="background: #adad5b">mihai-</th><td class="text" style="color: #adad5b">fbre: or you can just rename Image-initramfs to Image</td><td class="time"><a href="#t2020-08-20T13:41:53" class="time">13:41</a></td></tr>
<tr id="t2020-08-20T13:41:59"><th class="nick" style="background: #adad5b">mihai-</th><td class="text" style="color: #adad5b">fbre: ok :)</td><td class="time"><a href="#t2020-08-20T13:41:59" class="time">13:41</a></td></tr>
<tr id="t2020-08-20T14:56:00"><td class="nickchange" colspan="2">*** TundraMan is now known as marka</td><td><a href="#t2020-08-20T14:56:00" class="time">14:56</a></td></tr>
<tr id="t2020-08-20T15:36:32"><th class="nick" style="background: #5fb4b4">JPEW</th><td class="text" style="color: #5fb4b4">fray: I left a small comment on your github change: <a href="https://github.com/mhatle/poky/commit/86fbd639261319de4c951708d9805abba6036510#r41629137" rel="nofollow">https://github.com/mhatle/poky/commit/86fbd639261319de4c951708d9805abba6036510#r41629137</a></td><td class="time"><a href="#t2020-08-20T15:36:32" class="time">15:36</a></td></tr>
<tr id="t2020-08-20T15:37:08"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">ok, I'll look at it in a bit.. reworking it based on RPs comments about delVar right now</td><td class="time"><a href="#t2020-08-20T15:37:08" class="time">15:37</a></td></tr>
<tr id="t2020-08-20T15:48:17"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">JPEW the chang to the BB_TASKHASH to BB_UNIHASH was on suggestion of RP yesterday when we were talking..&nbsp;&nbsp;Without making the BB_UNIHASH change there, any future lookups of the PR service info would be using the task hash and not unihash..</td><td class="time"><a href="#t2020-08-20T15:48:17" class="time">15:48</a></td></tr>
<tr id="t2020-08-20T15:48:45"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">I assume this could happen if you were restoring from sstate-cache via a unihash for some reason</td><td class="time"><a href="#t2020-08-20T15:48:45" class="time">15:48</a></td></tr>
<tr id="t2020-08-20T15:49:00"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">fray: I'm torn on that one to be honest, I'm now not sure it is right :/</td><td class="time"><a href="#t2020-08-20T15:49:00" class="time">15:49</a></td></tr>
<tr id="t2020-08-20T15:49:21"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">it could mean a different PR value was returned in a later build</td><td class="time"><a href="#t2020-08-20T15:49:21" class="time">15:49</a></td></tr>
<tr id="t2020-08-20T15:49:39"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">your changes probably make that semi irrelevant anyway</td><td class="time"><a href="#t2020-08-20T15:49:39" class="time">15:49</a></td></tr>
<tr id="t2020-08-20T15:49:44"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">this is where I'm a bit naive on the order of operations..&nbsp;&nbsp;BEFORE the task starts building, it looks up the task hash and converts to unihash if it's in the database right?</td><td class="time"><a href="#t2020-08-20T15:49:44" class="time">15:49</a></td></tr>
<tr id="t2020-08-20T15:50:07"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">so if we're in a situation where the hash is in the database, but the sstate-cache isn't available for the do_package task.&nbsp;&nbsp;Then we'd want it right?</td><td class="time"><a href="#t2020-08-20T15:50:07" class="time">15:50</a></td></tr>
<tr id="t2020-08-20T15:50:34"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">should be reproducible with cleansstate right?</td><td class="time"><a href="#t2020-08-20T15:50:34" class="time">15:50</a></td></tr>
<tr id="t2020-08-20T15:51:09"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">so my test case of modifying do_patch_append in glibc works now.&nbsp;&nbsp;core-image-minimal build only 10 tasks ran</td><td class="time"><a href="#t2020-08-20T15:51:09" class="time">15:51</a></td></tr>
<tr id="t2020-08-20T15:51:12"><th class="nick" style="background: #6464bf">kergoth</th><td class="text" style="color: #6464bf">thinking about this hurts my head :) i'm glad i'm not the one neck deep in it</td><td class="time"><a href="#t2020-08-20T15:51:12" class="time">15:51</a></td></tr>
<tr id="t2020-08-20T15:51:23"><th class="nick" style="background: #6464bf">kergoth</th><td class="text" style="color: #6464bf">so thanks to you all for taking it on :)</td><td class="time"><a href="#t2020-08-20T15:51:23" class="time">15:51</a></td></tr>
<tr id="t2020-08-20T15:53:15"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">fray: I think of it this way. If the task reruns, we want it to be deterministic. The first time it runs, it will be with TASKHASH. I'm struggling to think of a case where it would match unihash and run with a new unihash, I guess that could happen if sstate was unavailable</td><td class="time"><a href="#t2020-08-20T15:53:15" class="time">15:53</a></td></tr>
<tr id="t2020-08-20T15:53:46"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">ok.. I'll pull that line of change back out.. we can monitor it and add it back if needed later</td><td class="time"><a href="#t2020-08-20T15:53:46" class="time">15:53</a></td></tr>
<tr id="t2020-08-20T15:54:12"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">Hmm..&nbsp;&nbsp;ya, the one place it could affect.. no sstate-cache, but we have the unihash database..</td><td class="time"><a href="#t2020-08-20T15:54:12" class="time">15:54</a></td></tr>
<tr id="t2020-08-20T15:54:24"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">since the PR used will be the NEW PR, even though the unihash will store the record..</td><td class="time"><a href="#t2020-08-20T15:54:24" class="time">15:54</a></td></tr>
<tr id="t2020-08-20T15:54:24-2"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">fray: its probably fine either way. Thinking about the above, BB_UNIHASH may avoid unwanted PR bumps that aren't needed</td><td class="time"><a href="#t2020-08-20T15:54:24-2" class="time">15:54</a></td></tr>
<tr id="t2020-08-20T15:54:41"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">Ya, that as well</td><td class="time"><a href="#t2020-08-20T15:54:41" class="time">15:54</a></td></tr>
<tr id="t2020-08-20T15:54:59"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">and the UNIHASH is likely what is expoted by the PR server?&nbsp;&nbsp;or might that be another bug we need to find/fix..</td><td class="time"><a href="#t2020-08-20T15:54:59" class="time">15:54</a></td></tr>
<tr id="t2020-08-20T15:55:51"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">fray: the PR server just expects some id string, it doesn't care what</td><td class="time"><a href="#t2020-08-20T15:55:51" class="time">15:55</a></td></tr>
<tr id="t2020-08-20T15:55:55"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">case I'm thinking of is user has a PR database (or exported config), and has the unihash database as well.. but their connection to their sstaet-cache data breaks.. they need to be able to build and get a matching version out</td><td class="time"><a href="#t2020-08-20T15:55:55" class="time">15:55</a></td></tr>
<tr id="t2020-08-20T15:55:59"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">ID changes, new PR</td><td class="time"><a href="#t2020-08-20T15:55:59" class="time">15:55</a></td></tr>
<tr id="t2020-08-20T15:56:36"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">but the exported PR data only has the 'latest' (matching) hashes in it, not all know hashes.. (I think, maybe I'm remembering wrong)</td><td class="time"><a href="#t2020-08-20T15:56:36" class="time">15:56</a></td></tr>
<tr id="t2020-08-20T15:57:04"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">I'm still going to pull it out into a separate commit thoguh</td><td class="time"><a href="#t2020-08-20T15:57:04" class="time">15:57</a></td></tr>
<tr id="t2020-08-20T15:57:17"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">I don't want it to be confused with the rest of this change</td><td class="time"><a href="#t2020-08-20T15:57:17" class="time">15:57</a></td></tr>
<tr id="t2020-08-20T15:58:17"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">kergoth: I found the old variable dependency work you did on an old harddisk the other day before we managed to turn it into what we merged into bitbake. Quite a trip down memory lane!</td><td class="time"><a href="#t2020-08-20T15:58:17" class="time">15:58</a></td></tr>
<tr id="t2020-08-20T15:58:42"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">kergoth: hashequiv makes my head hurt too</td><td class="time"><a href="#t2020-08-20T15:58:42" class="time">15:58</a></td></tr>
<tr id="t2020-08-20T15:59:02"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">it's simple in principal.. it's the corner cases.. far far too many corner cases</td><td class="time"><a href="#t2020-08-20T15:59:02" class="time">15:59</a></td></tr>
<tr id="t2020-08-20T15:59:15"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">(I have a MUCH better understanding of it now then I did a week ago)</td><td class="time"><a href="#t2020-08-20T15:59:15" class="time">15:59</a></td></tr>
<tr id="t2020-08-20T16:05:16"><th class="nick" style="background: #5fb4b4">JPEW</th><td class="text" style="color: #5fb4b4">fray: Ya, unfortunately missing sstate objects that the hashequiv server things should exist happens all the time. I was just explaining it to someone yesterday</td><td class="time"><a href="#t2020-08-20T16:05:16" class="time">16:05</a></td></tr>
<tr id="t2020-08-20T16:05:29"><th class="nick" style="background: #5fb4b4">JPEW</th><td class="text" style="color: #5fb4b4">s/things/thinks</td><td class="time"><a href="#t2020-08-20T16:05:29" class="time">16:05</a></td></tr>
<tr id="t2020-08-20T16:07:23"><th class="nick" style="background: #6464bf">kergoth</th><td class="text" style="color: #6464bf">heh, simple in principle but a ton of corner cases, that sums up half the project, no? ;0</td><td class="time"><a href="#t2020-08-20T16:07:23" class="time">16:07</a></td></tr>
<tr id="t2020-08-20T16:08:36"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">JPEW yes.. I'm working on a reproducer for the corner case now, to prove the BB_UNIHASH is needed</td><td class="time"><a href="#t2020-08-20T16:08:36" class="time">16:08</a></td></tr>
<tr id="t2020-08-20T16:09:15"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">Just an FYI, I pushed up the changes to that same github location.. (force push).&nbsp;&nbsp;The second commit is what&nbsp;&nbsp;I think will be a reprocuer case, but I've not yet validated that.. in progress now</td><td class="time"><a href="#t2020-08-20T16:09:15" class="time">16:09</a></td></tr>
<tr id="t2020-08-20T16:10:36"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161"><a href="https://github.com/mhatle/poky/commits/mgh/hash-pr-equiv" rel="nofollow">https://github.com/mhatle/poky/commits/mgh/hash-pr-equiv</a></td><td class="time"><a href="#t2020-08-20T16:10:36" class="time">16:10</a></td></tr>
<tr id="t2020-08-20T16:10:43"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">top two commits are the important ones</td><td class="time"><a href="#t2020-08-20T16:10:43" class="time">16:10</a></td></tr>
<tr id="t2020-08-20T16:11:57"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">JPEW as I was mentioning to RP.&nbsp;&nbsp;I used the suffix '.oe_nohash'.&nbsp;&nbsp;I figued someone MIGHT call something .nohash, but nobody is going to use .oe_nohash in a regular filename unless they REALLY are trying to trigger this code</td><td class="time"><a href="#t2020-08-20T16:11:57" class="time">16:11</a></td></tr>
<tr id="t2020-08-20T17:12:04"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">kergoth: we don't have corner cases do we? :)</td><td class="time"><a href="#t2020-08-20T17:12:04" class="time">17:12</a></td></tr>
<tr id="t2020-08-20T17:12:15"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">perhaps features</td><td class="time"><a href="#t2020-08-20T17:12:15" class="time">17:12</a></td></tr>
<tr id="t2020-08-20T17:38:17"><td class="nickchange" colspan="2">*** King_InuYasha is now known as Conan_Kudo</td><td><a href="#t2020-08-20T17:38:17" class="time">17:38</a></td></tr>
<tr id="t2020-08-20T17:38:36"><td class="nickchange" colspan="2">*** Conan_Kudo is now known as King_InuYasha</td><td><a href="#t2020-08-20T17:38:36" class="time">17:38</a></td></tr>
<tr id="t2020-08-20T17:43:35"><td class="nickchange" colspan="2">*** King_InuYasha is now known as Conan_Kudo</td><td><a href="#t2020-08-20T17:43:35" class="time">17:43</a></td></tr>
<tr id="t2020-08-20T17:44:00"><td class="nickchange" colspan="2">*** Conan_Kudo is now known as King_InuYasha</td><td><a href="#t2020-08-20T17:44:00" class="time">17:44</a></td></tr>
<tr id="t2020-08-20T17:50:34"><th class="nick" style="background: #c3c366">roussinm</th><td class="text" style="color: #c3c366">fray: is the work you've done helps in anyway when sstate-object is not available on the remote server? Or it's not related at all?</td><td class="time"><a href="#t2020-08-20T17:50:34" class="time">17:50</a></td></tr>
<tr id="t2020-08-20T17:53:34"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">RP: I see that you are still reverting the revert of reverting -fno-common defaults on master-next :)</td><td class="time"><a href="#t2020-08-20T17:53:34" class="time">17:53</a></td></tr>
<tr id="t2020-08-20T17:54:10"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">RP: I think all fixed need to default to -fno-common are in now</td><td class="time"><a href="#t2020-08-20T17:54:10" class="time">17:54</a></td></tr>
<tr id="t2020-08-20T17:54:34"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">roussinm only if unihash is involved, otherwise no</td><td class="time"><a href="#t2020-08-20T17:54:34" class="time">17:54</a></td></tr>
<tr id="t2020-08-20T17:55:08"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">JPEW / RP the second patch doesn't work in the documented test case.. what is interesting is that it actually create a NEW PR..&nbsp;&nbsp;So in the unihash not the same as the initial task hash?</td><td class="time"><a href="#t2020-08-20T17:55:08" class="time">17:55</a></td></tr>
<tr id="t2020-08-20T17:56:56"><th class="nick" style="background: #5fb4b4">JPEW</th><td class="text" style="color: #5fb4b4">fray: It should be the same</td><td class="time"><a href="#t2020-08-20T17:56:56" class="time">17:56</a></td></tr>
<tr id="t2020-08-20T17:57:17"><th class="nick" style="background: #5fb4b4">JPEW</th><td class="text" style="color: #5fb4b4">fray: Or rather it will be the same unless the hash server knows otherwise</td><td class="time"><a href="#t2020-08-20T17:57:17" class="time">17:57</a></td></tr>
<tr id="t2020-08-20T17:58:24"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">original build PRAUTO .0.&nbsp;&nbsp;first change PRAUTO .1, hash equivalency of the first build...&nbsp;&nbsp;remove sstate-cache and tmp.. third build (no changes to layer)&nbsp;&nbsp;I got PRAUTO of .2, where I was expecting 0</td><td class="time"><a href="#t2020-08-20T17:58:24" class="time">17:58</a></td></tr>
<tr id="t2020-08-20T17:58:44"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">I'm going to have to repeat the experiement and this time capture the hash changes from the log as I go</td><td class="time"><a href="#t2020-08-20T17:58:44" class="time">17:58</a></td></tr>
<tr id="t2020-08-20T17:59:35"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">From the PRSERV db:</td><td class="time"><a href="#t2020-08-20T17:59:35" class="time">17:59</a></td></tr>
<tr id="t2020-08-20T17:59:36"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">linux-libc-headers-5.4-r0|cortexa57|2e9490caff2bc96a4b6e95da78710c8205fe30c7107496ae93747e813ef4f255|0</td><td class="time"><a href="#t2020-08-20T17:59:36" class="time">17:59</a></td></tr>
<tr id="t2020-08-20T17:59:36-2"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">glibc-2.32-r0|cortexa57|41429b6dbf811d96d78d755d21e21684319402b0636e4fa5fc16a81d9afab8fe|1</td><td class="time"><a href="#t2020-08-20T17:59:36-2" class="time">17:59</a></td></tr>
<tr id="t2020-08-20T17:59:36-3"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">glibc-2.32-r0|cortexa57|6d2c9e211c52ab3cb04240e9d683e09c9fed578ecc83ef6d2e5384723c89847d|2</td><td class="time"><a href="#t2020-08-20T17:59:36-3" class="time">17:59</a></td></tr>
<tr id="t2020-08-20T17:59:49"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">this is odd, where did 0 go.. is the BB_UNIHASH blank on the first pass?</td><td class="time"><a href="#t2020-08-20T17:59:49" class="time">17:59</a></td></tr>
<tr id="t2020-08-20T18:46:59"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">JPEW / RP : So the BB_UNIHASH did exactly what it should have.. However, the call to the PR service somehow erased the version '0', and replaced it with a version '2'?!</td><td class="time"><a href="#t2020-08-20T18:46:59" class="time">18:46</a></td></tr>
<tr id="t2020-08-20T18:47:22"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">looking at the prserv database, and the three runs I get:</td><td class="time"><a href="#t2020-08-20T18:47:22" class="time">18:47</a></td></tr>
<tr id="t2020-08-20T18:47:28"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">run1: glibc-2.32-r0|cortexa57|f77a1419d3693c90374e79d161b838709592b16bf1c58fc064ec665c491ee0e6|0</td><td class="time"><a href="#t2020-08-20T18:47:28" class="time">18:47</a></td></tr>
<tr id="t2020-08-20T18:47:30"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">run2:</td><td class="time"><a href="#t2020-08-20T18:47:30" class="time">18:47</a></td></tr>
<tr id="t2020-08-20T18:47:34"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">glibc-2.32-r0|cortexa57|f77a1419d3693c90374e79d161b838709592b16bf1c58fc064ec665c491ee0e6|0</td><td class="time"><a href="#t2020-08-20T18:47:34" class="time">18:47</a></td></tr>
<tr id="t2020-08-20T18:47:34-2"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">glibc-2.32-r0|cortexa57|fce498b97366e298899d395546538252107acea07a5ac959401dbe243c664792|1</td><td class="time"><a href="#t2020-08-20T18:47:34-2" class="time">18:47</a></td></tr>
<tr id="t2020-08-20T18:47:41"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">(both expected)</td><td class="time"><a href="#t2020-08-20T18:47:41" class="time">18:47</a></td></tr>
<tr id="t2020-08-20T18:47:44"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">run3:</td><td class="time"><a href="#t2020-08-20T18:47:44" class="time">18:47</a></td></tr>
<tr id="t2020-08-20T18:47:50"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">glibc-2.32-r0|cortexa57|fce498b97366e298899d395546538252107acea07a5ac959401dbe243c664792|1</td><td class="time"><a href="#t2020-08-20T18:47:50" class="time">18:47</a></td></tr>
<tr id="t2020-08-20T18:47:50-2"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">glibc-2.32-r0|cortexa57|f77a1419d3693c90374e79d161b838709592b16bf1c58fc064ec665c491ee0e6|2</td><td class="time"><a href="#t2020-08-20T18:47:50-2" class="time">18:47</a></td></tr>
<tr id="t2020-08-20T18:47:56"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">somehow 0 was replaced by 2?!</td><td class="time"><a href="#t2020-08-20T18:47:56" class="time">18:47</a></td></tr>
<tr id="t2020-08-20T18:52:26"><th class="nick" style="background: #57a657">marex</th><td class="text" style="color: #57a657">rollback protection ?</td><td class="time"><a href="#t2020-08-20T18:52:26" class="time">18:52</a></td></tr>
<tr id="t2020-08-20T18:53:14"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">ya, I'm not really sure.. that's why I'm confused by this..&nbsp;&nbsp;If it IS rollback protection, we need a way to detect that rollback is 'acceptable'?&nbsp;&nbsp;or maybe a way to remove a PR when we decide the task hash isn't going to be used but unihash is..</td><td class="time"><a href="#t2020-08-20T18:53:14" class="time">18:53</a></td></tr>
<tr id="t2020-08-20T18:53:26"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">i.e. the |1 version really never 'existed'</td><td class="time"><a href="#t2020-08-20T18:53:26" class="time">18:53</a></td></tr>
<tr id="t2020-08-20T19:03:23"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">fray: it is rollback protection, the value must always increase :/</td><td class="time"><a href="#t2020-08-20T19:03:23" class="time">19:03</a></td></tr>
<tr id="t2020-08-20T19:03:36"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">JPEW: this looks like fun&nbsp;&nbsp;package target-sdk-provides-dummy-1.0-r0.sdk_provides_dummy_target conflicts with /bin/sh provided by nativesdk-curl-7.71.1-r0.i686_nativesdk_mingw32 :/</td><td class="time"><a href="#t2020-08-20T19:03:36" class="time">19:03</a></td></tr>
<tr id="t2020-08-20T19:04:23"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">Ok, so how do we deal with this situation then -- No sstate-cache, but I have a hash equip and pr service, but I'm not pointing to the latest PR.. do we need a way to &quot;remove&quot; the latest (taskhash) PR in a unihash environment?</td><td class="time"><a href="#t2020-08-20T19:04:23" class="time">19:04</a></td></tr>
<tr id="t2020-08-20T19:04:24"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">fray: does BB_TASKHASH work any better?</td><td class="time"><a href="#t2020-08-20T19:04:24" class="time">19:04</a></td></tr>
<tr id="t2020-08-20T19:05:06"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">I'm going to go back and double check, but I believe it returns '.1', so the .0 version is effectively gone unless you have the sstate-cache</td><td class="time"><a href="#t2020-08-20T19:05:06" class="time">19:05</a></td></tr>
<tr id="t2020-08-20T19:09:49"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">(build for the test takes abotu 15 minutes to bootstrap, then a few minutes each for the next two test passes before I can get an answer)</td><td class="time"><a href="#t2020-08-20T19:09:49" class="time">19:09</a></td></tr>
<tr id="t2020-08-20T19:14:44"><th class="nick" style="background: #5fb4b4">JPEW</th><td class="text" style="color: #5fb4b4">RP: Well... that's weird. curl wasn't a valid shell last time I checked</td><td class="time"><a href="#t2020-08-20T19:14:44" class="time">19:14</a></td></tr>
<tr id="t2020-08-20T19:33:32"><th class="nick" style="background: #5fb4b4">JPEW</th><td class="text" style="color: #5fb4b4">fray: I don't know much about the PR server, but it does seem like conflicting requirements: bump the PR automatically, but detect equivalencies with the hash server</td><td class="time"><a href="#t2020-08-20T19:33:32" class="time">19:33</a></td></tr>
<tr id="t2020-08-20T19:34:08"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">yes.. if an equivalency has been detected, we really need to tell the PR server.. so likely that is the next step</td><td class="time"><a href="#t2020-08-20T19:34:08" class="time">19:34</a></td></tr>
<tr id="t2020-08-20T19:37:00"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">the real concern for me is that w/o the sstate-cache contents the results aren't deterministic (to the prior build)</td><td class="time"><a href="#t2020-08-20T19:37:00" class="time">19:37</a></td></tr>
<tr id="t2020-08-20T19:54:22"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">RP verified -- using BB_TASKHASH (instead of UNIHASH) for the PR service.. the PR goes from .0 to .0 (as expected), clear the sstate-cache and it goes to .1</td><td class="time"><a href="#t2020-08-20T19:54:22" class="time">19:54</a></td></tr>
<tr id="t2020-08-20T19:58:35"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">fray: cool, we were right not to change it originally :)</td><td class="time"><a href="#t2020-08-20T19:58:35" class="time">19:58</a></td></tr>
<tr id="t2020-08-20T19:59:01"><th class="nick" style="background: #5fb4b4">JPEW</th><td class="text" style="color: #5fb4b4">fray: It would be better if the server was more aware of the sstate contents; I don't know the best way to do that though</td><td class="time"><a href="#t2020-08-20T19:59:01" class="time">19:59</a></td></tr>
<tr id="t2020-08-20T19:59:29"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">I am going to look at the server and see if I can trigger a removal of the current entry if the taskhash and unihash differ..</td><td class="time"><a href="#t2020-08-20T19:59:29" class="time">19:59</a></td></tr>
<tr id="t2020-08-20T19:59:34"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">so order of operation is..</td><td class="time"><a href="#t2020-08-20T19:59:34" class="time">19:59</a></td></tr>
<tr id="t2020-08-20T20:00:57"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">we use BB_UNIHASH and request PR..&nbsp;&nbsp;we do the packaging work.. we calculate the UNIHASH, IF it changes to task hash (no longer the same as what was originally requested) changes, then we remove the 'new' entry from the PR database</td><td class="time"><a href="#t2020-08-20T20:00:57" class="time">20:00</a></td></tr>
<tr id="t2020-08-20T20:02:57"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">fray: I'm not sure it matters</td><td class="time"><a href="#t2020-08-20T20:02:57" class="time">20:02</a></td></tr>
<tr id="t2020-08-20T20:03:21"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">it does, because now the build with the sstate-cache and without result in two different sets of packages..</td><td class="time"><a href="#t2020-08-20T20:03:21" class="time">20:03</a></td></tr>
<tr id="t2020-08-20T20:03:44"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">fray: that is the case for prserv anyway?</td><td class="time"><a href="#t2020-08-20T20:03:44" class="time">20:03</a></td></tr>
<tr id="t2020-08-20T20:03:52"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">last/tmp/deploy/rpm/cortexa57/libc6-2.32-r0.0.cortexa57.rpm</td><td class="time"><a href="#t2020-08-20T20:03:52" class="time">20:03</a></td></tr>
<tr id="t2020-08-20T20:03:52-2"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">tmp/deploy/rpm/cortexa57/libc6-2.32-r0.1.cortexa57.rpm</td><td class="time"><a href="#t2020-08-20T20:03:52-2" class="time">20:03</a></td></tr>
<tr id="t2020-08-20T20:04:16"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">but I have the prsev and unihash data.. &quot;but for some reason&quot; (rm -rf) I cant get to the sstate-cache..</td><td class="time"><a href="#t2020-08-20T20:04:16" class="time">20:04</a></td></tr>
<tr id="t2020-08-20T20:04:31"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">so between the last and current build, I had a change.. even though NOTHIGN in the layers or the prserv/unihash datbases changed</td><td class="time"><a href="#t2020-08-20T20:04:31" class="time">20:04</a></td></tr>
<tr id="t2020-08-20T20:05:16"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">(the for some reason in a more real-world situation is the network goes down)</td><td class="time"><a href="#t2020-08-20T20:05:16" class="time">20:05</a></td></tr>
<tr id="t2020-08-20T20:08:29"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">fray: Instead why don't we a) not expand EXTENDPRAUTO at all in the packagewrite code b) Move the PR serv query to the users of the data in the pkg data reads in the do_package_write*</td><td class="time"><a href="#t2020-08-20T20:08:29" class="time">20:08</a></td></tr>
<tr id="t2020-08-20T20:09:01"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">fray: this should hopefully simplify the code so the PR serv really only does bump when needed?</td><td class="time"><a href="#t2020-08-20T20:09:01" class="time">20:09</a></td></tr>
<tr id="t2020-08-20T20:09:34"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">we'd end up using the taskhash of the do_package_write instead..&nbsp;&nbsp;(which is fine), but in the sstate-cache case, it's still going to have to build it and would get the wrong value</td><td class="time"><a href="#t2020-08-20T20:09:34" class="time">20:09</a></td></tr>
<tr id="t2020-08-20T20:10:10"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">fray: no, its not fine, but you can lookup the hash of do_package there and get the resolved unihash</td><td class="time"><a href="#t2020-08-20T20:10:10" class="time">20:10</a></td></tr>
<tr id="t2020-08-20T20:10:34"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">since by that point its made the comparison</td><td class="time"><a href="#t2020-08-20T20:10:34" class="time">20:10</a></td></tr>
<tr id="t2020-08-20T20:10:37"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">How do you do that (look up the hash of do_packge in do_pacakge_write?</td><td class="time"><a href="#t2020-08-20T20:10:37" class="time">20:10</a></td></tr>
<tr id="t2020-08-20T20:10:47"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">fray: BB_TASKDEPDATA</td><td class="time"><a href="#t2020-08-20T20:10:47" class="time">20:10</a></td></tr>
<tr id="t2020-08-20T20:10:58"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">that contains the revised unihash?</td><td class="time"><a href="#t2020-08-20T20:10:58" class="time">20:10</a></td></tr>
<tr id="t2020-08-20T20:10:59"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">It has to be a dependency but this obviously is</td><td class="time"><a href="#t2020-08-20T20:10:59" class="time">20:10</a></td></tr>
<tr id="t2020-08-20T20:11:05"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">I think it should</td><td class="time"><a href="#t2020-08-20T20:11:05" class="time">20:11</a></td></tr>
<tr id="t2020-08-20T20:11:32"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">is it a dependency if do_package was in the sstate-cache, but do_package_write_* isn?t</td><td class="time"><a href="#t2020-08-20T20:11:32" class="time">20:11</a></td></tr>
<tr id="t2020-08-20T20:12:13"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">Its deterministic so sstate cache isn't relevant</td><td class="time"><a href="#t2020-08-20T20:12:13" class="time">20:12</a></td></tr>
<tr id="t2020-08-20T20:12:21"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">ok</td><td class="time"><a href="#t2020-08-20T20:12:21" class="time">20:12</a></td></tr>
<tr id="t2020-08-20T20:13:31"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">fray: sorry to be slow in coming up with this but I think its probably simpler and will avoid a ton of complexity</td><td class="time"><a href="#t2020-08-20T20:13:31" class="time">20:13</a></td></tr>
<tr id="t2020-08-20T20:13:32"><th class="nick" style="background: #5fb4b4">JPEW</th><td class="text" style="color: #5fb4b4">fray: The taskhash and the unihash should be in BB_TASKDEPDATA</td><td class="time"><a href="#t2020-08-20T20:13:32" class="time">20:13</a></td></tr>
<tr id="t2020-08-20T20:13:45"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">right, it should have both iirc</td><td class="time"><a href="#t2020-08-20T20:13:45" class="time">20:13</a></td></tr>
<tr id="t2020-08-20T20:14:46"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">is there an example of the data in BB_TASKDEPDATA?&nbsp;&nbsp;Since what I need to do is find the UNIHASH result for do_package</td><td class="time"><a href="#t2020-08-20T20:14:46" class="time">20:14</a></td></tr>
<tr id="t2020-08-20T20:17:23"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">fray: the data is build in lib/bb/runqueue.py: taskdepdata[revdep] = [pn, taskname, fn, deps, provides, taskhash, unihash]</td><td class="time"><a href="#t2020-08-20T20:17:23" class="time">20:17</a></td></tr>
<tr id="t2020-08-20T20:17:41"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">that's what I needed.. ok</td><td class="time"><a href="#t2020-08-20T20:17:41" class="time">20:17</a></td></tr>
<tr id="t2020-08-20T20:17:45"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">fray: example users are staging.bbclass, you want those last two fields in the array</td><td class="time"><a href="#t2020-08-20T20:17:45" class="time">20:17</a></td></tr>
<tr id="t2020-08-20T20:19:29"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">it looks like all of the package classes already call 'read_subpackage_metadata'.&nbsp;&nbsp;So I should be able to add something there...</td><td class="time"><a href="#t2020-08-20T20:19:29" class="time">20:19</a></td></tr>
<tr id="t2020-08-20T20:20:18"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">thinking of moving package_get_auto_pr from package.bbclass to packagedata.bbclass</td><td class="time"><a href="#t2020-08-20T20:20:18" class="time">20:20</a></td></tr>
<tr id="t2020-08-20T20:54:23"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">fray: RP: then why not integrate the prserv function with hashequiv-server if these are so related ...</td><td class="time"><a href="#t2020-08-20T20:54:23" class="time">20:54</a></td></tr>
<tr id="t2020-08-20T20:55:22"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">keep the old prserv for legacy, but if hashequiv is used, store the PR right there together with the equiv hashes ?</td><td class="time"><a href="#t2020-08-20T20:55:22" class="time">20:55</a></td></tr>
<tr id="t2020-08-20T20:56:09"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">and on the plus side your prserv/hashequiv won't get out of sync.</td><td class="time"><a href="#t2020-08-20T20:56:09" class="time">20:56</a></td></tr>
<tr id="t2020-08-20T20:57:15"><td class="part" colspan="2">*** matthewzmd &lt;matthewzmd!~user@216-58-109-18.cpe.distributel.net&gt; has left #yocto</td><td><a href="#t2020-08-20T20:57:15" class="time">20:57</a></td></tr>
<tr id="t2020-08-20T21:11:26"><th class="nick" style="background: #5fb4b4">JPEW</th><td class="text" style="color: #5fb4b4">dl9pf: It seems like it would be hard to make sure the versions didn't go backward; it's not clear to me how you would link the PR information to the hash equiv database</td><td class="time"><a href="#t2020-08-20T21:11:26" class="time">21:11</a></td></tr>
<tr id="t2020-08-20T21:11:44"><th class="nick" style="background: #5fb4b4">JPEW</th><td class="text" style="color: #5fb4b4">But again, I'm not familiar with the PR server</td><td class="time"><a href="#t2020-08-20T21:11:44" class="time">21:11</a></td></tr>
<tr id="t2020-08-20T21:12:16"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">can you show me a sample hashequiv db entry/line ?</td><td class="time"><a href="#t2020-08-20T21:12:16" class="time">21:12</a></td></tr>
<tr id="t2020-08-20T21:13:25"><th class="nick" style="background: #5fb4b4">JPEW</th><td class="text" style="color: #5fb4b4">dl9pf: Here's the database schema <a href="http://git.openembedded.org/bitbake/tree/lib/hashserv/__init__.py#n29" rel="nofollow">http://git.openembedded.org/bitbake/tree/lib/hashserv/__init__.py#n29</a></td><td class="time"><a href="#t2020-08-20T21:13:25" class="time">21:13</a></td></tr>
<tr id="t2020-08-20T21:14:29"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">prserv is e.g. glibc-2.32-r0|cortexa57|f77a1419d3693c90374e79d161b838709592b16bf1c58fc064ec665c491ee0e6|2</td><td class="time"><a href="#t2020-08-20T21:14:29" class="time">21:14</a></td></tr>
<tr id="t2020-08-20T21:14:29-2"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">that is ${PF} | ${PACKAGE_ARCH} | taskhash?? | 'pr'</td><td class="time"><a href="#t2020-08-20T21:14:29-2" class="time">21:14</a></td></tr>
<tr id="t2020-08-20T21:14:47"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">you already have the optional field of 'pr' in the schema I see</td><td class="time"><a href="#t2020-08-20T21:14:47" class="time">21:14</a></td></tr>
<tr id="t2020-08-20T21:15:21"><th class="nick" style="background: #5fb4b4">JPEW</th><td class="text" style="color: #5fb4b4">dl9pf: True; thats optional and only sent by the client if debugging is enabled</td><td class="time"><a href="#t2020-08-20T21:15:21" class="time">21:15</a></td></tr>
<tr id="t2020-08-20T21:15:37"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">so the only thing not in there is $PACKAGE_ARCH</td><td class="time"><a href="#t2020-08-20T21:15:37" class="time">21:15</a></td></tr>
<tr id="t2020-08-20T21:15:39"><th class="nick" style="background: #5fb4b4">JPEW</th><td class="text" style="color: #5fb4b4">It's more for tracking a unhelp hash back to the source :)</td><td class="time"><a href="#t2020-08-20T21:15:39" class="time">21:15</a></td></tr>
<tr id="t2020-08-20T21:16:00"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">so all is more or less in there 'as well'</td><td class="time"><a href="#t2020-08-20T21:16:00" class="time">21:16</a></td></tr>
<tr id="t2020-08-20T21:16:56"><th class="nick" style="background: #5fb4b4">JPEW</th><td class="text" style="color: #5fb4b4">Hmm... I wonder what the query would be</td><td class="time"><a href="#t2020-08-20T21:16:56" class="time">21:16</a></td></tr>
<tr id="t2020-08-20T21:19:58"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">e.g. <a href="http://git.openembedded.org/bitbake/tree/lib/prserv/db.py#n71" rel="nofollow">http://git.openembedded.org/bitbake/tree/lib/prserv/db.py#n71</a> ?</td><td class="time"><a href="#t2020-08-20T21:19:58" class="time">21:19</a></td></tr>
<tr id="t2020-08-20T21:20:24"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">data=self._execute(&quot;SELECT value FROM %s WHERE version=? AND pkgarch=? AND checksum=?;&quot; % self.table, (version, pkgarch, checksum))</td><td class="time"><a href="#t2020-08-20T21:20:24" class="time">21:20</a></td></tr>
<tr id="t2020-08-20T21:20:41"><th class="nick" style="background: #488888">fbre</th><td class="text" style="color: #488888">zandrey marex: the bundled initramfs works now :-)&nbsp;&nbsp;I just have to tweak the recipes-core/initrdscripts/files/init-live.sh script a bit for not waiting for a plugging in a CD or stick. I wrote it all together in an answer in the NXP community forum. Thank you guys and free beer for all here. Party on! B-)&nbsp;&nbsp;(y)</td><td class="time"><a href="#t2020-08-20T21:20:41" class="time">21:20</a></td></tr>
<tr id="t2020-08-20T21:23:18"><th class="nick" style="background: #5fb4b4">JPEW</th><td class="text" style="color: #5fb4b4">dl9pf: Right, that would get you the reported PR for a given entry, but its not clear to me how you get a monotonically incrementing value</td><td class="time"><a href="#t2020-08-20T21:23:18" class="time">21:23</a></td></tr>
<tr id="t2020-08-20T21:24:29"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6"><a href="http://git.openembedded.org/bitbake/tree/lib/prserv/db.py#n79" rel="nofollow">http://git.openembedded.org/bitbake/tree/lib/prserv/db.py#n79</a></td><td class="time"><a href="#t2020-08-20T21:24:29" class="time">21:24</a></td></tr>
<tr id="t2020-08-20T21:25:03"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">fray: the prserv has a 'hist' and 'nohist' code branch</td><td class="time"><a href="#t2020-08-20T21:25:03" class="time">21:25</a></td></tr>
<tr id="t2020-08-20T21:25:43"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">that explains why it got replaced ...</td><td class="time"><a href="#t2020-08-20T21:25:43" class="time">21:25</a></td></tr>
<tr id="t2020-08-20T21:26:13"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">nohist is self._execute(&quot;INSERT OR REPLACE INTO %s VALUES (?, ?, ?, (select ifnull(max(value)+1,0) from %s where version=? AND pkgarch=?));&quot; % (self.table,self.table), (version, pkgarch, checksum, version, pkgarch))</td><td class="time"><a href="#t2020-08-20T21:26:13" class="time">21:26</a></td></tr>
<tr id="t2020-08-20T21:26:47"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">hist is self._execute(&quot;INSERT INTO %s VALUES (?, ?, ?, (select ifnull(max(value)+1,0) from %s where version=? AND pkgarch=?));&quot; % (self.table,self.table), (version,pkgarch, checksum,version, pkgarch))</td><td class="time"><a href="#t2020-08-20T21:26:47" class="time">21:26</a></td></tr>
<tr id="t2020-08-20T21:27:15"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">nohist is set by default.</td><td class="time"><a href="#t2020-08-20T21:27:15" class="time">21:27</a></td></tr>
<tr id="t2020-08-20T21:43:03"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">khem: was that curl change related to the mingw issue?</td><td class="time"><a href="#t2020-08-20T21:43:03" class="time">21:43</a></td></tr>
<tr id="t2020-08-20T21:44:27"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">dl9pf: I think hashequiv is problematic enough without putting the PR policy there as well</td><td class="time"><a href="#t2020-08-20T21:44:27" class="time">21:44</a></td></tr>
<tr id="t2020-08-20T21:45:06"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">dl9pf: I am broadly in favour of moving prser into the hashequiv server and having one set of server code but I think I'd still prefer separate data tables</td><td class="time"><a href="#t2020-08-20T21:45:06" class="time">21:45</a></td></tr>
<tr id="t2020-08-20T21:46:01"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">how is nohist vs hist selected in pr server?</td><td class="time"><a href="#t2020-08-20T21:46:01" class="time">21:46</a></td></tr>
<tr id="t2020-08-20T21:46:21"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">fray: i saw no cmdline switch</td><td class="time"><a href="#t2020-08-20T21:46:21" class="time">21:46</a></td></tr>
<tr id="t2020-08-20T21:47:55"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">PRData's __init__(self, filename, nohist=True):&nbsp;&nbsp;and self.nohist=nohist</td><td class="time"><a href="#t2020-08-20T21:47:55" class="time">21:47</a></td></tr>
<tr id="t2020-08-20T21:47:59"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">dl9pf: there may be a variable</td><td class="time"><a href="#t2020-08-20T21:47:59" class="time">21:47</a></td></tr>
<tr id="t2020-08-20T21:48:31"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">self.db = prserv.db.PRData(self.dbfile)</td><td class="time"><a href="#t2020-08-20T21:48:31" class="time">21:48</a></td></tr>
<tr id="t2020-08-20T21:48:58"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">so nohist is default and hist never used</td><td class="time"><a href="#t2020-08-20T21:48:58" class="time">21:48</a></td></tr>
<tr id="t2020-08-20T21:49:14"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">dl9pf: I know I have used it but I probably just hacked the code</td><td class="time"><a href="#t2020-08-20T21:49:14" class="time">21:49</a></td></tr>
<tr id="t2020-08-20T21:49:47"><th class="nick" style="background: #b86161">fray</th><td class="text" style="color: #b86161">I suspect it was defaulted to hist in the past, and must have changed to avoid rollbacks</td><td class="time"><a href="#t2020-08-20T21:49:47" class="time">21:49</a></td></tr>
<tr id="t2020-08-20T21:50:21"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">probably ...</td><td class="time"><a href="#t2020-08-20T21:50:21" class="time">21:50</a></td></tr>
<tr id="t2020-08-20T21:51:50"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">We wrote the two policies, we obviously just exposed one</td><td class="time"><a href="#t2020-08-20T21:51:50" class="time">21:51</a></td></tr>
<tr id="t2020-08-20T21:54:37"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6"><a href="http://git.openembedded.org/bitbake/commit/lib/prserv?id=379567ee879dcdc09a51f7f1212bde1076147a6f" rel="nofollow">http://git.openembedded.org/bitbake/commit/lib/prserv?id=379567ee879dcdc09a51f7f1212bde1076147a6f</a></td><td class="time"><a href="#t2020-08-20T21:54:37" class="time">21:54</a></td></tr>
<tr id="t2020-08-20T21:55:21"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">switchover was to nohist when introduced</td><td class="time"><a href="#t2020-08-20T21:55:21" class="time">21:55</a></td></tr>
<tr id="t2020-08-20T21:55:51"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">dl9pf: That was a while ago, PRC Intel team.</td><td class="time"><a href="#t2020-08-20T21:55:51" class="time">21:55</a></td></tr>
<tr id="t2020-08-20T22:21:48"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">RP: actually, I was looking for a CVE fix which was fixed 3 days ago.</td><td class="time"><a href="#t2020-08-20T22:21:48" class="time">22:21</a></td></tr>
<tr id="t2020-08-20T22:23:02"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">khem: ok, so the mystery probably remains on that failure :/</td><td class="time"><a href="#t2020-08-20T22:23:02" class="time">22:23</a></td></tr>
<tr id="t2020-08-20T22:23:11"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">khem: thought I'd ask! :)</td><td class="time"><a href="#t2020-08-20T22:23:11" class="time">22:23</a></td></tr>
<tr id="t2020-08-20T22:57:49"><th class="nick" style="background: #c668c6">dl9pf</th><td class="text" style="color: #c668c6">cccccckulcfnlknguunnifveujdutjnfvgeuejhhevhn</td><td class="time"><a href="#t2020-08-20T22:57:49" class="time">22:57</a></td></tr>
<tr id="t2020-08-20T23:07:28"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">log.do_package_write_rpm:Provides: /bin/sh nativesdk-curl = 7.72.0-r0</td><td class="time"><a href="#t2020-08-20T23:07:28" class="time">23:07</a></td></tr>
<tr id="t2020-08-20T23:07:45"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">why does rpmdeps think a windows binary provides /bin/sh ? :/</td><td class="time"><a href="#t2020-08-20T23:07:45" class="time">23:07</a></td></tr>
<tr id="t2020-08-20T23:08:18"><td class="part" colspan="2">*** beneth &lt;beneth!~beneth@irc.beneth.fr&gt; has left #yocto</td><td><a href="#t2020-08-20T23:08:18" class="time">23:08</a></td></tr>
<tr id="t2020-08-20T23:12:03"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">zeddii: I am seeing a warning with 5.8 kernel on qemumips <a href="https://pastebin.com/J4nytSCG" rel="nofollow">https://pastebin.com/J4nytSCG</a></td><td class="time"><a href="#t2020-08-20T23:12:03" class="time">23:12</a></td></tr>
<tr id="t2020-08-20T23:12:45"><th class="nick" style="background: #818144">khem</th><td class="text" style="color: #818144">RP: yeah currently trying to reduce CVE backlog on dunfell a little</td><td class="time"><a href="#t2020-08-20T23:12:45" class="time">23:12</a></td></tr>
<tr id="t2020-08-20T23:16:00"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">&nbsp;&nbsp;&nbsp;&nbsp;print_deps(srcrprovides + (&quot; /bin/sh&quot; if srcname.startswith(&quot;nativesdk-&quot;) else &quot;&quot;), &quot;Provides&quot;, spec_preamble_top, d)</td><td class="time"><a href="#t2020-08-20T23:16:00" class="time">23:16</a></td></tr>
<tr id="t2020-08-20T23:16:20"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62">fray: any recollection why package_rpm does that?</td><td class="time"><a href="#t2020-08-20T23:16:20" class="time">23:16</a></td></tr>
<tr id="t2020-08-20T23:17:18"><th class="nick" style="background: #62bb62">RP</th><td class="text" style="color: #62bb62"><a href="http://git.yoctoproject.org/cgit.cgi/poky/commit/meta/classes/package_rpm.bbclass?h=master-next&amp;id=1cf9dd6492e2e234a3b41419d84e94ca1520954c" rel="nofollow">http://git.yoctoproject.org/cgit.cgi/poky/commit/meta/classes/package_rpm.bbclass?h=master-next&amp;id=1cf9dd6492e2e234a3b41419d84e94ca1520954c</a></td><td class="time"><a href="#t2020-08-20T23:17:18" class="time">23:17</a></td></tr>
<tr id="t2020-08-20T23:55:31"><th class="nick" style="background: #407a40">robbawebba</th><td class="text" style="color: #407a40">Hi, I have a question regarding dynamically linked binaries produced by native recipes. I would like to ditribute a single native binary for use on other host systems, not necessarily the build host. The only issue I'm sitll experiencing is the exact linker being available on other hosts. It it possible to compile the native package such that it supports using other interpreters such as</td><td class="time"><a href="#t2020-08-20T23:55:31" class="time">23:55</a></td></tr>
<tr id="t2020-08-20T23:55:33"><th class="nick" style="background: #407a40">robbawebba</th><td class="text" style="color: #407a40">/lib64/ld-linux-x86_64.so.2? Thanks in advance. I'm not all that familiar with linking so any feedback is appreciated.</td><td class="time"><a href="#t2020-08-20T23:55:33" class="time">23:55</a></td></tr>
</table>
<div class="navigation"> <a href="%23yocto.2020-08-19.log.html">&#171; Wednesday, 2020-08-19</a> <a href="index.html">Index</a> <a href="%23yocto.2020-08-21.log.html">Friday, 2020-08-21 &#187;</a> </div>

<div class="generatedby">
<p>Generated by irclog2html.py 2.17.2 by <a href="mailto:marius@pov.lt">Marius Gedminas</a>
 - find it at <a href="https://mg.pov.lt/irclog2html/">https://mg.pov.lt/irclog2html/</a>!</p>
</div>
</body>
</html>
