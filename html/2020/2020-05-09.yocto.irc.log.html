<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Saturday, 2020-05-09</title>
  <link rel="stylesheet" href="irclog.css" />
  <meta name="generator" content="irclog2html.py 2.17.2 by Marius Gedminas" />
  <meta name="version" content="2.17.2 - 2019-04-23" />
</head>
<body>
<h1>Saturday, 2020-05-09</h1>
<div class="navigation"> <a href="%23yocto.2020-05-08.log.html">&#171; Friday, 2020-05-08</a> <a href="index.html">Index</a> <a href="%23yocto.2020-05-10.log.html">Sunday, 2020-05-10 &#187;</a> </div>
<table class="irclog">
<tr id="t2020-05-09T02:43:05"><th class="nick" style="background: #407a40">tlwoerner</th><td class="text" style="color: #407a40">halstead: thanks for the link, that's what i was looking for</td><td class="time"><a href="#t2020-05-09T02:43:05" class="time">02:43</a></td></tr>
<tr id="t2020-05-09T02:43:46"><th class="nick" style="background: #42427e">halstead</th><td class="text" style="color: #42427e">You're welcome tlwoerner :)</td><td class="time"><a href="#t2020-05-09T02:43:46" class="time">02:43</a></td></tr>
<tr id="t2020-05-09T02:44:11"><th class="nick" style="background: #407a40">tlwoerner</th><td class="text" style="color: #407a40">halstead: the XOrg/freedesktop project is thinking of reorganizing their infrastructure and, apparently, &quot;yocto&quot; downloads are so prevalent it came up as part of the discussion :-)</td><td class="time"><a href="#t2020-05-09T02:44:11" class="time">02:44</a></td></tr>
<tr id="t2020-05-09T02:45:07"><th class="nick" style="background: #407a40">tlwoerner</th><td class="text" style="color: #407a40">halstead: but with the YP's mirror, i told them it's safe to reorganize. old branches can find stuff on the mirror, and newer stuff can be updated to point to the new location(s)</td><td class="time"><a href="#t2020-05-09T02:45:07" class="time">02:45</a></td></tr>
<tr id="t2020-05-09T02:46:46"><th class="nick" style="background: #407a40">tlwoerner</th><td class="text" style="color: #407a40">halstead: i've asked for a list, and if anything's not on the mirror i'll poke you about getting it transferred?</td><td class="time"><a href="#t2020-05-09T02:46:46" class="time">02:46</a></td></tr>
<tr id="t2020-05-09T02:47:18"><th class="nick" style="background: #42427e">halstead</th><td class="text" style="color: #42427e">tlwoerner, I think that should work well. Then we can see how many are building using un-maintained branches based on mirror fetches. ;)</td><td class="time"><a href="#t2020-05-09T02:47:18" class="time">02:47</a></td></tr>
<tr id="t2020-05-09T02:47:36"><th class="nick" style="background: #407a40">tlwoerner</th><td class="text" style="color: #407a40">nice :-)</td><td class="time"><a href="#t2020-05-09T02:47:36" class="time">02:47</a></td></tr>
<tr id="t2020-05-09T02:47:54"><th class="nick" style="background: #42427e">halstead</th><td class="text" style="color: #42427e">That is very helpful. Thanks for doing the double check tlwoerner!</td><td class="time"><a href="#t2020-05-09T02:47:54" class="time">02:47</a></td></tr>
<tr id="t2020-05-09T09:03:36"><th class="nick" style="background: #818144">RP</th><td class="text" style="color: #818144">JPEW: it was lost, sorry. I thought I'd added to the branch but I had not, probably fear of full rebuilds</td><td class="time"><a href="#t2020-05-09T09:03:36" class="time">09:03</a></td></tr>
<tr id="t2020-05-09T10:18:39"><th class="nick" style="background: #854685">RobertBerger</th><td class="text" style="color: #854685">I just discovered that pre/postfuncs behave differently from _pre/_append. Let's say do_unpack_and_patch modifies S, WORKDIR,... if I have a function which uses S and is called via pre/postfuncs the modification to S by do_unpack_and_patch is not being picked up by my function, if I use e.g. do_patch_prepend instead my fucntion gets the modified version of S. Is this by design? Is this documented somewhere?</td><td class="time"><a href="#t2020-05-09T10:18:39" class="time">10:18</a></td></tr>
<tr id="t2020-05-09T10:28:29"><th class="nick" style="background: #818144">RP</th><td class="text" style="color: #818144">RobertBerger: I think it depends which function is making the modification and how</td><td class="time"><a href="#t2020-05-09T10:28:29" class="time">10:28</a></td></tr>
<tr id="t2020-05-09T10:29:01"><th class="nick" style="background: #818144">RP</th><td class="text" style="color: #818144">RobertBerger: most functions do not do that, the archiver ones are 'creative'</td><td class="time"><a href="#t2020-05-09T10:29:01" class="time">10:29</a></td></tr>
<tr id="t2020-05-09T10:59:16"><th class="nick" style="background: #854685">RobertBerger</th><td class="text" style="color: #854685">@RP I tried to &quot;fix&quot; meta-java since it it broken when you use the archiver.bbclass.</td><td class="time"><a href="#t2020-05-09T10:59:16" class="time">10:59</a></td></tr>
<tr id="t2020-05-09T11:01:34"><th class="nick" style="background: #854685">RobertBerger</th><td class="text" style="color: #854685">@RP and this is what seems to work: <a href="https://github.com/RobertBerger/meta-java/commit/f988b1d7ac332bff3ed21d40b91b78247ad52610" rel="nofollow">https://github.com/RobertBerger/meta-java/commit/f988b1d7ac332bff3ed21d40b91b78247ad52610</a></td><td class="time"><a href="#t2020-05-09T11:01:34" class="time">11:01</a></td></tr>
<tr id="t2020-05-09T11:04:29"><th class="nick" style="background: #854685">RobertBerger</th><td class="text" style="color: #854685">@RP what puzzled me for a long time is that so far I could not break the archiver and that meta-java/openjdk up to now for sure was incompatible with archiver</td><td class="time"><a href="#t2020-05-09T11:04:29" class="time">11:04</a></td></tr>
<tr id="t2020-05-09T11:21:07"><th class="nick" style="background: #818144">RP</th><td class="text" style="color: #818144">RobertBerger: The archiver code calls into the fetcher and executes the fetch functions directly. It therefore doesn't catch modifications the recipe makes to the fetched sources</td><td class="time"><a href="#t2020-05-09T11:21:07" class="time">11:21</a></td></tr>
<tr id="t2020-05-09T11:21:37"><th class="nick" style="background: #818144">RP</th><td class="text" style="color: #818144">RobertBerger: you did tell if you wanted the original sources, not any modifications ;-)</td><td class="time"><a href="#t2020-05-09T11:21:37" class="time">11:21</a></td></tr>
<tr id="t2020-05-09T11:38:53"><th class="nick" style="background: #854685">RobertBerger</th><td class="text" style="color: #854685">@RP: it fails in do_patch ;) since this <a href="https://github.com/RobertBerger/meta-java/blob/2020-05-08-dunfell/recipes-core/openjdk/openjdk-8-common.inc#L33" rel="nofollow">https://github.com/RobertBerger/meta-java/blob/2020-05-08-dunfell/recipes-core/openjdk/openjdk-8-common.inc#L33</a>&nbsp;&nbsp;extracts sources into the wrong dirs when the modified S, WORKDIR,... are not picked up. So I don't think the problem is the archiver, but meta-java ;)</td><td class="time"><a href="#t2020-05-09T11:38:53" class="time">11:38</a></td></tr>
<tr id="t2020-05-09T12:16:52"><th class="nick" style="background: #818144">RP</th><td class="text" style="color: #818144">RobertBerger: I don't understand, the recipe shouldn't see any of that :/</td><td class="time"><a href="#t2020-05-09T12:16:52" class="time">12:16</a></td></tr>
<tr id="t2020-05-09T12:19:19"><th class="nick" style="background: #854685">RobertBerger</th><td class="text" style="color: #854685">@RP: think about that: without archiver all is good. cd &quot;${S}&quot; followed by tar xjf ${WORKDIR}/${CORBA_FILE_LOCAL} --transform &quot;s,-${CORBA_CHANGESET},,g&quot; works</td><td class="time"><a href="#t2020-05-09T12:19:19" class="time">12:19</a></td></tr>
<tr id="t2020-05-09T12:21:22"><th class="nick" style="background: #854685">RobertBerger</th><td class="text" style="color: #854685">@RP: now if the archiver moves S to S/archiver-workdir or so tar xjf ${WORKDIR}/${CORBA_FILE_LOCAL} --transform &quot;s,-${CORBA_CHANGESET},,g&quot; does not work anymore, it should be $WORKDIR/../${CORBA_FILE_LOCAL}</td><td class="time"><a href="#t2020-05-09T12:21:22" class="time">12:21</a></td></tr>
<tr id="t2020-05-09T12:22:06"><th class="nick" style="background: #854685">RobertBerger</th><td class="text" style="color: #854685">and do_patch from do_unpack_and_patch can not patch since the files to be patches are unavailable</td><td class="time"><a href="#t2020-05-09T12:22:06" class="time">12:22</a></td></tr>
<tr id="t2020-05-09T12:25:13"><th class="nick" style="background: #818144">RP</th><td class="text" style="color: #818144">RobertBerger: Hmm. The better fix may be to have that function use ${S} instead of WORKDIR</td><td class="time"><a href="#t2020-05-09T12:25:13" class="time">12:25</a></td></tr>
<tr id="t2020-05-09T12:26:05"><th class="nick" style="background: #818144">RP</th><td class="text" style="color: #818144">RobertBerger: although it changes WORKDIR, not S that is what is confusing me</td><td class="time"><a href="#t2020-05-09T12:26:05" class="time">12:26</a></td></tr>
<tr id="t2020-05-09T12:26:25"><th class="nick" style="background: #854685">RobertBerger</th><td class="text" style="color: #854685">archiver changes both</td><td class="time"><a href="#t2020-05-09T12:26:25" class="time">12:26</a></td></tr>
<tr id="t2020-05-09T12:28:17"><th class="nick" style="background: #818144">RP</th><td class="text" style="color: #818144">RobertBerger: It doesn't change S, S contains WORKDIR</td><td class="time"><a href="#t2020-05-09T12:28:17" class="time">12:28</a></td></tr>
<tr id="t2020-05-09T12:29:13"><th class="nick" style="background: #818144">RP</th><td class="text" style="color: #818144">RobertBerger: depends on how you look at it</td><td class="time"><a href="#t2020-05-09T12:29:13" class="time">12:29</a></td></tr>
<tr id="t2020-05-09T12:52:13"><th class="nick" style="background: #818144">RP</th><td class="text" style="color: #818144">RobertBerger1: I think this is the local fetcher being a pain. I think if we 'fetch' the file urls in do_unpack_and_patch this would work better</td><td class="time"><a href="#t2020-05-09T12:52:13" class="time">12:52</a></td></tr>
<tr id="t2020-05-09T12:53:46"><th class="nick" style="background: #488888">RobertBerger1</th><td class="text" style="color: #488888">You mean hacking the archiver class?</td><td class="time"><a href="#t2020-05-09T12:53:46" class="time">12:53</a></td></tr>
<tr id="t2020-05-09T13:02:08"><th class="nick" style="background: #488888">RobertBerger1</th><td class="text" style="color: #488888">RP: if you feel like unbreaking the archiver class I am happy to test. I tried not to touch the archiver class and come up with some minimal intrusive patch for meta-java.</td><td class="time"><a href="#t2020-05-09T13:02:08" class="time">13:02</a></td></tr>
<tr id="t2020-05-09T13:03:33"><td class="part" colspan="2">*** RobertBerger1 &lt;RobertBerger1!~rber@ppp-2-86-153-22.home.otenet.gr&gt; has left #yocto</td><td><a href="#t2020-05-09T13:03:33" class="time">13:03</a></td></tr>
<tr id="t2020-05-09T13:04:36"><td class="part" colspan="2">*** RobertBerger1 &lt;RobertBerger1!~rber@ppp-2-86-153-22.home.otenet.gr&gt; has left #yocto</td><td><a href="#t2020-05-09T13:04:36" class="time">13:04</a></td></tr>
<tr id="t2020-05-09T16:04:48"><td class="nickchange" colspan="2">*** camus1 is now known as kaspter</td><td><a href="#t2020-05-09T16:04:48" class="time">16:04</a></td></tr>
<tr id="t2020-05-09T16:43:05"><th class="nick" style="background: #407a40">tlwoerner</th><td class="text" style="color: #407a40">halstead: i wonder if it would make sense for the tools in the yocto project that fetch from the mirrors use a &quot;secret&quot; user-agent, and maybe setup the server so it only delivers to the secret agent. in hopes of deterring traffic from using the mirror for non-yocto-related purposes?</td><td class="time"><a href="#t2020-05-09T16:43:05" class="time">16:43</a></td></tr>
<tr id="t2020-05-09T16:43:42"><th class="nick" style="background: #407a40">tlwoerner</th><td class="text" style="color: #407a40">or at the very least to track yocto and non-yocto usage?</td><td class="time"><a href="#t2020-05-09T16:43:42" class="time">16:43</a></td></tr>
<tr id="t2020-05-09T16:48:57"><td class="nickchange" colspan="2">*** Guest65957 is now known as mischief</td><td><a href="#t2020-05-09T16:48:57" class="time">16:48</a></td></tr>
<tr id="t2020-05-09T17:41:17"><th class="nick" style="background: #8c4a4a">smurray</th><td class="text" style="color: #8c4a4a">tlwoerner: do you think there's actually any non-yocto usage, though?</td><td class="time"><a href="#t2020-05-09T17:41:17" class="time">17:41</a></td></tr>
<tr id="t2020-05-09T17:44:21"><th class="nick" style="background: #8c4a4a">smurray</th><td class="text" style="color: #8c4a4a">tlwoerner: it sort of seems like a non-problem unless the hosting cost of the mirror is dramatically higher than expected</td><td class="time"><a href="#t2020-05-09T17:44:21" class="time">17:44</a></td></tr>
<tr id="t2020-05-09T17:51:54"><th class="nick" style="background: #818144">RP</th><td class="text" style="color: #818144">tlwoerner: I'm also wondering if this is a problem we need to solve</td><td class="time"><a href="#t2020-05-09T17:51:54" class="time">17:51</a></td></tr>
<tr id="t2020-05-09T20:32:11"><th class="nick" style="background: #4b904b">JPEW</th><td class="text" style="color: #4b904b">RP: I don't think it will cause rebuilds because I whitelisted the variable</td><td class="time"><a href="#t2020-05-09T20:32:11" class="time">20:32</a></td></tr>
<tr id="t2020-05-09T21:21:26"><th class="nick" style="background: #818144">RP</th><td class="text" style="color: #818144">JPEW: true, it was more that I had enough other issues to worry about I guess. Its tested and in now</td><td class="time"><a href="#t2020-05-09T21:21:26" class="time">21:21</a></td></tr>
<tr id="t2020-05-09T21:51:31-2"><td class="nickchange" colspan="2">*** aidanh_ is now known as aidanh</td><td><a href="#t2020-05-09T21:51:31-2" class="time">21:51</a></td></tr>
</table>
<div class="navigation"> <a href="%23yocto.2020-05-08.log.html">&#171; Friday, 2020-05-08</a> <a href="index.html">Index</a> <a href="%23yocto.2020-05-10.log.html">Sunday, 2020-05-10 &#187;</a> </div>

<div class="generatedby">
<p>Generated by irclog2html.py 2.17.2 by <a href="mailto:marius@pov.lt">Marius Gedminas</a>
 - find it at <a href="https://mg.pov.lt/irclog2html/">https://mg.pov.lt/irclog2html/</a>!</p>
</div>
</body>
</html>
